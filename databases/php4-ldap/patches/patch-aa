$NetBSD: patch-aa,v 1.2 2002/02/01 19:22:55 jlam Exp $

--- config.m4.orig	Mon May 21 15:47:15 2001
+++ config.m4
@@ -41,13 +41,16 @@
   dnl these here if necessary.   -RL
   dnl Is this really necessary? -Troels Arvin
 
-  if test `uname` = "Linux"; then
+  if test "x${PTHREAD_TYPE}" = "xnative"; then
     LDAP_PTHREAD=pthread
   else
     LDAP_PTHREAD=
   fi
 
   if test -f $LDAP_LIBDIR/liblber.a -o -f $LDAP_LIBDIR/liblber.so -o -f $LDAP_LIBDIR/liblber.sl; then
+    if test -n "$LDAP_PTHREAD"; then 
+      PHP_ADD_LIBRARY_WITH_PATH($LDAP_PTHREAD, $LDAP_LIBDIR, LDAP_SHARED_LIBADD)
+    fi
     PHP_ADD_LIBRARY_WITH_PATH(lber, $LDAP_LIBDIR, LDAP_SHARED_LIBADD)
     PHP_ADD_LIBRARY_WITH_PATH(ldap, $LDAP_LIBDIR, LDAP_SHARED_LIBADD)
 
