$NetBSD: patch-aa,v 1.3 2003/08/31 19:55:31 jdolecek Exp $

--- config.m4.orig	2003-08-31 13:11:08.000000000 +0200
+++ config.m4	2003-08-31 13:12:20.000000000 +0200
@@ -42,13 +42,16 @@
   dnl these here if necessary.   -RL
   dnl Is this really necessary? -Troels Arvin
 
-  if test `uname` = "Linux"; then
+  if test "x${PTHREAD_TYPE}" = "xnative"; then
     LDAP_PTHREAD=pthread
   else
     LDAP_PTHREAD=
   fi
 
   if test -f $LDAP_LIBDIR/liblber.a -o -f $LDAP_LIBDIR/liblber.$SHLIB_SUFFIX_NAME; then
+    if test -n "$LDAP_PTHREAD"; then
+      PHP_ADD_LIBRARY_WITH_PATH($LDAP_PTHREAD, $LDAP_LIBDIR, LDAP_SHARED_LIBADD)
+    fi
     PHP_ADD_LIBRARY_WITH_PATH(lber, $LDAP_LIBDIR, LDAP_SHARED_LIBADD)
     PHP_ADD_LIBRARY_WITH_PATH(ldap, $LDAP_LIBDIR, LDAP_SHARED_LIBADD)
 
