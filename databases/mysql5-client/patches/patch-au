$NetBSD: patch-au,v 1.2 2007/03/11 18:42:29 adam Exp $

--- client/mysql.cc.orig	2007-03-05 20:21:21.000000000 +0100
+++ client/mysql.cc
@@ -37,7 +37,15 @@
 #endif
 #include "my_readline.h"
 #include <signal.h>
+#ifdef IRIX5
+#define _MYSQL_END_TYPE (void (*)(...))
+#else
+#define _MYSQL_END_TYPE
+#endif
 #include <violite.h>
+#ifdef NEEDS_BSTRING_H              // defines bzero()
+#include <bstring.h>
+#endif
 
 #if defined(USE_LIBEDIT_INTERFACE) && defined(HAVE_LOCALE_H)
 #include <locale.h>
@@ -438,10 +446,10 @@ int main(int argc,char *argv[])
     ignore_errors=1;				// Don't abort monitor
 
   if (opt_sigint_ignore)
-    signal(SIGINT, SIG_IGN);
+    signal(SIGINT, _MYSQL_END_TYPE SIG_IGN);
   else
-    signal(SIGINT, mysql_sigint);		// Catch SIGINT to clean up
-  signal(SIGQUIT, mysql_end);			// Catch SIGQUIT to clean up
+    signal(SIGINT, _MYSQL_END_TYPE mysql_sigint);		// Catch SIGINT to clean up
+  signal(SIGQUIT, _MYSQL_END_TYPE mysql_end);			// Catch SIGQUIT to clean up
 
   /*
     Run in interactive mode like the ingres/postgres monitor
@@ -513,7 +521,7 @@ sig_handler mysql_sigint(int sig)
   char kill_buffer[40];
   MYSQL *kill_mysql= NULL;
 
-  signal(SIGINT, mysql_sigint);
+  signal(SIGINT, _MYSQL_END_TYPE mysql_sigint);
 
   /* terminate if no query being executed, or we already tried interrupting */
   if (!executing_query || interrupted_query++)
