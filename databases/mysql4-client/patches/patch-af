$NetBSD: patch-af,v 1.8 2006/05/26 18:25:34 seb Exp $

--- configure.orig	2006-05-23 01:12:19.000000000 +0000
+++ configure
@@ -20463,7 +20463,7 @@ then
   FIND_PROC="$PS \$\$PID | grep -v grep | grep mysqld > /dev/null"
 else
   case $SYSTEM_TYPE in
-    *freebsd*)
+    *freebsd* | *dragonfly*)
       FIND_PROC="$PS p \$\$PID | grep -v grep | grep mysqld > /dev/null"
       ;;
     *darwin*)
@@ -24651,6 +24651,10 @@ case $SYSTEM_TYPE in
       MAX_C_OPTIMIZE="-O"
     fi
     ;;
+  *dragonfly*)
+    CXXFLAGS="$CXXFLAGS -DMYSQLD_NET_RETRY_COUNT=1000000"
+    ;;
+    
   *freebsd*)
     echo "Adding fix for interrupted reads"
     OSVERSION=`sysctl -a | grep osreldate | awk '{ print $2 }'`
@@ -36551,30 +36555,10 @@ else
 fi;
 
 
-echo "$as_me:$LINENO: checking for ORBit" >&5
-echo $ECHO_N "checking for ORBit... $ECHO_C" >&6
-orbit_config_path=`which orbit-config`
-if test -n "$orbit_config_path" -a $? = 0
-then
-  orbit_exec_prefix=`orbit-config --exec-prefix`
-  orbit_includes=`orbit-config --cflags server`
-  orbit_libs=`orbit-config --libs server`
-  orbit_idl="$orbit_exec_prefix/bin/orbit-idl"
-  echo "$as_me:$LINENO: result: found!" >&5
-echo "${ECHO_T}found!" >&6
-
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_ORBIT 1
-_ACEOF
-
-else
   orbit_exec_prefix=
   orbit_includes=
   orbit_libs=
   orbit_idl=
-  echo "$as_me:$LINENO: result: not found" >&5
-echo "${ECHO_T}not found" >&6
-fi
 
 
 
@@ -36864,7 +36848,7 @@ then
 else
   bench_dirs=""
 fi
-bench_dirs="$bench_dirs mysql-test"
+#bench_dirs="$bench_dirs mysql-test"
 
 
 # Don't build readline, i have it already
@@ -36981,7 +36965,7 @@ int
 main ()
 {
 
-		char res= *(*rl_completion_entry_function)(0,0);
+		char res=(*rl_completion_entry_function)(0,0);
 		completion_matches(0,0);
 
   ;
