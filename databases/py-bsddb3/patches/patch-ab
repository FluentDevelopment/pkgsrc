$NetBSD: patch-ab,v 1.5 2006/01/10 21:06:31 wiz Exp $

--- extsrc/_bsddb.c.orig	2005-06-06 20:09:39.000000000 +0200
+++ extsrc/_bsddb.c
@@ -4294,8 +4294,13 @@ DBEnv_lock_stat(DBEnvObject* self, PyObj
 #endif
     MAKE_ENTRY(nrequests);
     MAKE_ENTRY(nreleases);
+#if (DBVER < 44)
     MAKE_ENTRY(nnowaits);
     MAKE_ENTRY(nconflicts);
+#else
+    MAKE_ENTRY(lock_nowait);
+    MAKE_ENTRY(lock_wait);
+#endif
     MAKE_ENTRY(ndeadlocks);
     MAKE_ENTRY(regsize);
     MAKE_ENTRY(region_wait);
@@ -5133,7 +5138,11 @@ DL_EXPORT(void) init_bsddb(void)
     ADD_INT(d, DB_LOCK_IREAD);
     ADD_INT(d, DB_LOCK_IWR);
 #if (DBVER >= 33)
+#if (DBVER < 44)
     ADD_INT(d, DB_LOCK_DIRTY);
+#else
+    ADD_INT(d, DB_LOCK_READ_UNCOMMITTED);
+#endif
     ADD_INT(d, DB_LOCK_WWRITE);
 #endif
 
@@ -5230,7 +5239,11 @@ DL_EXPORT(void) init_bsddb(void)
     ADD_INT(d, DB_OPFLAGS_MASK);
     ADD_INT(d, DB_RMW);
 #if (DBVER >= 33)
+#if (DBVER < 44)
     ADD_INT(d, DB_DIRTY_READ);
+#else
+    ADD_INT(d, DB_READ_UNCOMMITTED);
+#endif
     ADD_INT(d, DB_MULTIPLE);
     ADD_INT(d, DB_MULTIPLE_KEY);
 #endif
