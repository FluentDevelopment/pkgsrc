$NetBSD: patch-ab,v 1.6 2002/04/11 13:45:24 fredb Exp $

--- mit-pthreads/machdep/engine-m68000-netbsd.c.orig	Thu Feb 14 11:30:25 2002
+++ mit-pthreads/machdep/engine-m68000-netbsd.c
@@ -66,14 +66,14 @@
 }
 
 /* ==========================================================================
- * machdep_save_state()
+ * machdep_save_float_state()
  */
 void machdep_save_float_state(struct pthread * pthread)
 {
     char * fdata = pthread->machdep_data.machdep_fstate;
 
-    __asm__ ( "fmovem fp0-fp7,%0"::"m" (*fdata) );
-    __asm__ ( "fmovem fpcr/fpsr/fpi,%0"::"m" (fdata[80]) );
+    __asm__ ( "fmovem %%fp0-%%fp7,%0"::"m" (*fdata) );
+    __asm__ ( "fmovem %%fpcr/%%fpsr/%%fpi,%0"::"m" (fdata[80]) );
 }
 
 /* ==========================================================================
@@ -83,9 +83,8 @@
 {
     char * fdata = pthread_run->machdep_data.machdep_fstate;
 
-    __asm__ ( "fmovem %0,fp0-fp7"::"m" (*fdata) );
-    __asm__ ( "fmovem %0,fpcr/fpsr/fpi"::"m" (fdata[80]) );
-
+    __asm__ ( "fmovem %0,%%fp0-%%fp7"::"m" (*fdata) );
+    __asm__ ( "fmovem %0,%%fpcr/%%fpsr/%%fpi"::"m" (fdata[80]) );
 }
 
 /* ==========================================================================
