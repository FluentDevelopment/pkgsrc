$NetBSD: patch-ag,v 1.1 2005/10/26 17:33:49 joerg Exp $

--- vio/vio.c.orig	2005-10-14 10:23:58.000000000 +0000
+++ vio/vio.c
@@ -132,7 +132,7 @@ Vio *vio_new(my_socket sd, enum enum_vio
 	    vio->sd);
 #if !defined(__WIN__) && !defined(__EMX__) && !defined(OS2)
 #if !defined(NO_FCNTL_NONBLOCK)
-#if defined(__FreeBSD__)
+#if defined(__FreeBSD__) || defined(__DragonFly__)
     fcntl(sd, F_SETFL, vio->fcntl_mode); /* Yahoo! FreeBSD patch */
 #endif
     vio->fcntl_mode = fcntl(sd, F_GETFL);
