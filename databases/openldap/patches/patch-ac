$NetBSD: patch-ac,v 1.9 2005/10/26 15:08:13 jlam Exp $

--- libraries/libldap_r/thr_posix.c.orig	2005-09-27 20:30:29.000000000 -0400
+++ libraries/libldap_r/thr_posix.c
@@ -132,9 +132,11 @@ ldap_pvt_thread_create( ldap_pvt_thread_
 #endif
 
 #ifdef LDAP_PVT_THREAD_SET_STACK_SIZE
+#if defined(_POSIX_THREAD_ATTR_STACKSIZE)
 	/* this should be tunable */
 	pthread_attr_setstacksize( &attr, LDAP_PVT_THREAD_STACK_SIZE );
 #endif
+#endif
 
 #if HAVE_PTHREADS > 5
 	detach = detach ? PTHREAD_CREATE_DETACHED : PTHREAD_CREATE_JOINABLE;
