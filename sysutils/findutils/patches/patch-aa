$NetBSD: patch-aa,v 1.3 2002/10/22 11:35:40 wiz Exp $

--- locate/Makefile.in.orig	Sat Nov  5 15:44:08 1994
+++ locate/Makefile.in
@@ -29,7 +29,7 @@ libexecdir = $(exec_prefix)/libexec
 datadir = $(prefix)/share
 sysconfdir = $(prefix)/etc
 sharedstatedir = $(prefix)/com
-localstatedir = $(prefix)/var
+localstatedir = /var/run
 libdir = $(exec_prefix)/lib
 infodir = $(prefix)/info
 mandir = $(prefix)/man
@@ -38,6 +38,7 @@ oldincludedir = /usr/include
 
 INSTALL = @INSTALL@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
+INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_DATA = @INSTALL_DATA@
 transform = @program_transform_name@
 
@@ -68,7 +69,7 @@ DIST_CONF = Makefile.am Makefile.in
 DIST_FILES = $(DIST_CONF) $(SOURCES) $(TEXINFOS) $(INFOS) $(MANS) $(DIST_OTHER)
 
 # The default database to build and search.
-LOCATE_DB = $(localstatedir)/locatedb
+LOCATE_DB = /var/db/locate.database
 
 PROGRAMS = locate
 LIBPROGRAMS = frcode code bigram
@@ -96,9 +97,12 @@ install:: install-programs
 
 install-programs: $(PROGRAMS) $(SCRIPTS)
 	$(top_srcdir)/mkinstalldirs $(bindir)
-	for p in $(PROGRAMS) $(SCRIPTS); do \
+	for p in $(PROGRAMS); do \
 	  $(INSTALL_PROGRAM) $$p $(bindir)/`echo $$p|sed '$(transform)'`; \
 	done
+	for p in $(SCRIPTS); do \
+	  $(INSTALL_SCRIPT) $$p $(bindir)/`echo $$p|sed '$(transform)'`; \
+	done
 
 uninstall:: uninstall-programs
 
@@ -140,14 +144,15 @@ install-man:
 	for man in $(MANS); do \
 	  sect=`echo $$man|sed 's%.*\.\([0-9][a-z]*\)$$%\1%'`; \
 	  inst=`basename $$man $$sect|sed '$(transform)'`$$sect; \
+	  inst0=`basename $$man $$sect|sed '$(transform)'`0; \
 	  mdir=$(mandir)/man$$sect; \
 	  $(top_srcdir)/mkinstalldirs $$mdir; \
 	  echo installing $$man as $$mdir/$$inst; \
 	  $(INSTALL_DATA) $(srcdir)/$$man $$mdir/$$inst; \
 	  cdir=$(mandir)/cat$$sect; \
 	  if test -d $$cdir; then \
-	    echo formatting $$man as $$cdir/$$inst; \
-	    $(NROFF) -man $(srcdir)/$$man > $$cdir/$$inst; \
+	    echo formatting $$man as $$cdir/$$inst0; \
+	    $(NROFF) -man $(srcdir)/$$man > $$cdir/$$inst0; \
 	  fi; \
 	done
 
