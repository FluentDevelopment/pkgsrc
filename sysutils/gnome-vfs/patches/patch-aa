$NetBSD: patch-aa,v 1.7 2005/04/15 02:09:27 rh Exp $

--- modules/cdda-cddb.c.orig	2001-03-16 12:44:25.000000000 +1000
+++ modules/cdda-cddb.c
@@ -339,7 +339,7 @@ CDDBDoQuery (cdrom_drive *cd_desc, CDDBS
     query->query_match=MATCH_INEXACT;
     query->query_matches=0;
 
-    while(!CDDBReadLine(socket,inbuffer,256)) {
+    while(query->query_matches < MAX_INEXACT_MATCHES && !CDDBReadLine(socket,inbuffer,256)) {
       query->query_list[query->query_matches].list_genre=
 	CDDBGenreValue(ChopWhite(strtok(inbuffer," ")));
       
