$NetBSD: patch-bg,v 1.2 2006/06/26 12:14:25 drochner Exp $

--- sysdeps/freebsd/prockernel.c.orig	2006-06-13 22:20:53.000000000 +0200
+++ sysdeps/freebsd/prockernel.c
@@ -56,11 +56,7 @@
 #endif
 
 #ifdef __NetBSD__
-#include <machine/vmparam.h>
-#include <machine/pmap.h>
-#ifdef __arm32__
-#define	KERNBASE	KERNEL_BASE
-#endif
+#include <sys/resourcevar.h>
 #endif
 
 
@@ -116,8 +112,10 @@ glibtop_get_proc_kernel_p (glibtop *serv
 
 	/* Get the process information */
 	pinfo = kvm_getprocs (server->machine.kd, KERN_PROC_PID, pid, &count);
-	if ((pinfo == NULL) || (count != 1))
-		glibtop_error_io_r (server, "kvm_getprocs (%d)", pid);
+	if ((pinfo == NULL) || (count != 1)) {
+		glibtop_warn_io_r (server, "kvm_getprocs (%d)", pid);
+		return;
+	}
 
 #if defined(__FreeBSD__) && (__FreeBSD_version >= 500013)
 
