$NetBSD: patch-al,v 1.3 2006/02/28 23:48:12 joerg Exp $

--- sysdeps/freebsd/procmem.c.orig	2005-03-01 23:03:57.000000000 +0000
+++ sysdeps/freebsd/procmem.c
@@ -213,8 +213,8 @@ glibtop_get_proc_mem_p (glibtop *server,
 			return;
 		}
 
-#ifdef __FreeBSD__
-#if __FreeBSD__ >= 4
+#if defined(__FreeBSD__) || defined(__DragonFly__)
+#if defined(__DragonFly__) || (defined(__FreeBSD__) && __FreeBSD__ >= 4)
 		if (entry.eflags & (MAP_ENTRY_IS_SUB_MAP))
 			continue;
 #else
