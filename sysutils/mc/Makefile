# $NetBSD: Makefile,v 1.50 2005/03/17 22:46:41 wiz Exp $

DISTNAME=	mc-4.6.1-pre2b
PKGNAME=	mc-4.6.1rc2
PKGREVISION=	2
CATEGORIES=	sysutils
MASTER_SITES=	http://pavelsh.pp.ru/mc/
#MASTER_SITES=	http://www.ibiblio.org/pub/Linux/utils/file/managers/mc/ \
#		${MASTER_SITE_SUNSITE:=utils/file/managers/mc/}

MAINTAINER=	pavel.arnost@clnet.cz
HOMEPAGE=	http://www.ibiblio.org/mc/
COMMENT=	User-friendly file manager and visual shell

USE_BUILDLINK3=		YES
GNU_CONFIGURE=		YES
USE_GNU_TOOLS+=		make
USE_PKGLOCALEDIR=	YES
CPPFLAGS.NetBSD+=	-D__unix__

# see options.mk for an explanation of these options
PKG_OPTIONS_VAR=	PKG_OPTIONS.mc
PKG_SUPPORTED_OPTIONS=	charset edit largefile ncurses samba slang	\
			subshell vfs x11
PKG_DEFAULT_OPTIONS=	charset edit largefile slang subshell vfs

.include "../../mk/bsd.prefs.mk"
.include "../../mk/bsd.options.mk"

.if ${OPSYS} == "Linux"
PLIST_SRC+=	${PKGDIR}/PLIST.cons.saver
.endif

# remove dir if no extensions were installed there
post-install:
	@${RMDIR} ${PREFIX}/lib/mc 2>/dev/null || ${TRUE}

# we need working e2fsprogs and gpm packages first
CONFIGURE_ARGS+=	--without-ext2undel
CONFIGURE_ARGS+=	--without-gpm-mouse

PLIST_SRC+=  	${PKGDIR}/PLIST

.include "options.mk"

.include "../../devel/glib2/buildlink3.mk"
.include "../../devel/gettext-lib/buildlink3.mk"
.include "../../devel/pkgconfig/buildlink3.mk"
.include "../../mk/bsd.pkg.mk"
