$NetBSD: patch-aj,v 1.1 2006/10/13 13:04:31 is Exp $

--- mk_direntry.c.orig	2005-02-28 00:17:45.000000000 +0100
+++ mk_direntry.c
@@ -227,7 +227,8 @@ static void clear_scan(char *longname, i
 	s->free_end = s->got_slots = s->free_start = 0;
 
 	if (use_longname & 1)
-                s->size_needed = 2 + (strlen(longname)/VSE_NAMELEN);
+                s->size_needed = 1 +
+		    (strlen(longname) + VSE_NAMELEN - 1)/VSE_NAMELEN;
 	else
                 s->size_needed = 1;
 }
