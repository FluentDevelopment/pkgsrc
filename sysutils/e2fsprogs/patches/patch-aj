$NetBSD: patch-aj,v 1.1 2006/01/13 18:14:54 joerg Exp $

--- lib/e2p/iod.c.orig	2006-01-13 18:05:23.000000000 +0000
+++ lib/e2p/iod.c
@@ -54,7 +54,11 @@ int iterate_on_dir (const char * dir_nam
 		return -1;
 	}
 	while ((dep = readdir (dir))) {
+#if defined(__DragonFly__) && defined(_DIRENT_MINSIZ)
+		len = _DIRENT_MINSIZ(dep);
+#else
 		len = dep->d_reclen;
+#endif
 		if (len < (sizeof(struct dirent)))
 			len = sizeof(struct dirent);
 		if (len > max_len)
