$NetBSD: patch-ac,v 1.3 2006/07/14 15:55:02 rillig Exp $

--- tools/run-with-tmp-session-bus.sh.orig	2005-03-17 18:48:29.000000000 +0100
+++ tools/run-with-tmp-session-bus.sh	2006-07-14 17:38:50.642306696 +0200
@@ -1,10 +1,10 @@
-#! /bin/bash
+#! /bin/sh
 
 SCRIPTNAME=$0
 WRAPPED_SCRIPT=$1
 shift
 
-function die() 
+die() 
 {
     if ! test -z "$DBUS_SESSION_BUS_PID" ; then
         echo "killing message bus "$DBUS_SESSION_BUS_PID >&2
@@ -19,7 +19,7 @@ if test -z "$DBUS_TOP_BUILDDIR" ; then
 fi
 
 ## convenient to be able to ctrl+C without leaking the message bus process
-trap 'die "Received SIGINT"' SIGINT
+trap 'die "Received SIGINT"' INT
 
 CONFIG_FILE=./run-with-tmp-session-bus.conf
 SERVICE_DIR="$DBUS_TOP_BUILDDIR/test/data/valid-service-files"
@@ -34,9 +34,10 @@ cat $DBUS_TOP_BUILDDIR/bus/session.conf 
 
 echo "Created configuration file $CONFIG_FILE" >&2
 
-export PATH=$DBUS_TOP_BUILDDIR/bus:$PATH
+PATH=$DBUS_TOP_BUILDDIR/bus:$PATH
 ## the libtool script found by the path search should already do this, but
-export LD_LIBRARY_PATH=$DBUS_TOP_BUILDDIR/dbus/.libs:$LD_LIBRARY_PATH
+LD_LIBRARY_PATH=$DBUS_TOP_BUILDDIR/dbus/.libs:$LD_LIBRARY_PATH
+export PATH LD_LIBRARY_PATH
 
 unset DBUS_SESSION_BUS_ADDRESS
 unset DBUS_SESSION_BUS_PID
