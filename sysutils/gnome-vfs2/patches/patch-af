$NetBSD: patch-af,v 1.7 2005/03/22 15:56:41 jmmv Exp $

--- libgnomevfs/gnome-vfs-cdrom.c.orig	2005-02-10 11:00:21.000000000 +0100
+++ libgnomevfs/gnome-vfs-cdrom.c
@@ -37,6 +37,8 @@
 
 #ifdef __linux__
 #include <linux/cdrom.h>
+#elif defined(__APPLE__)
+#include <modules/cdda-cdrom-extensions.h>
 #endif
 
 #ifdef HAVE_SYS_CDIO_H
@@ -143,6 +145,7 @@ _gnome_vfs_get_cdrom_type (const char *v
 #endif /* defined(__FreeBSD__) */
 	return type;
 #else
+	#if !defined(__APPLE__)
 	*fd = open (vol_dev_path, O_RDONLY|O_NONBLOCK);
 	if (*fd  < 0) {
 		return -1;
@@ -153,6 +156,7 @@ _gnome_vfs_get_cdrom_type (const char *v
 		return -1;
 	}
 	return ioctl (*fd, CDROM_DISC_STATUS, CDSL_CURRENT);
+	#endif
 #endif
 }
 
