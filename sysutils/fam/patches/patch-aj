$NetBSD: patch-aj,v 1.4 2004/02/09 18:14:45 jmmv Exp $

--- fam/Listener.c++.orig	2003-04-15 06:52:40.000000000 +0200
+++ fam/Listener.c++
@@ -22,6 +22,8 @@
 
 #include "Listener.h"
 
+#include <stdio.h>
+#include <stdlib.h>
 #include <assert.h>
 #include <fcntl.h>
 #include <stdlib.h>
@@ -33,6 +35,7 @@
 #include <rpc/clnt.h>
 #include <sys/ioctl.h>
 #include <sys/socket.h>
+#include <sys/param.h>
 #include <sys/stat.h>
 #include <sys/un.h>
 #include <unistd.h>
@@ -206,7 +209,7 @@ Listener::create_local_client(TCP_Client
     putenv("TMPDIR=");
 
     char *tmpfile = tempnam("/tmp", ".fam");
-#if defined(__FreeBSD__)
+#if defined(__FreeBSD__) || defined(__NetBSD__) || defined(__OpenBSD__)
     sockaddr_un sun = { sizeof(sockaddr_un), AF_UNIX, "" };
 #else
     sockaddr_un sun = { AF_UNIX, "" };
@@ -280,7 +283,7 @@ Listener::accept_localclient(int ofd, vo
 
     // Get the new socket.
 
-#if defined(__FreeBSD__)
+#if defined(__FreeBSD__) || defined(__NetBSD__) || defined(__OpenBSD__)
     struct sockaddr_un sun = { sizeof(sockaddr_un), AF_UNIX, "" };
 #else
     struct sockaddr_un sun = { AF_UNIX, "" };
@@ -346,7 +349,7 @@ Listener::accept_localclient(int ofd, vo
 void
 Listener::dirty_ugly_hack()
 {
-#if defined(__FreeBSD__)
+#if defined(__FreeBSD__) || defined(__NetBSD__) || defined(__OpenBSD__)
     static sockaddr_un sun = { sizeof (sockaddr_un), AF_UNIX, "/tmp/.fam_socket" };
 #else
     static sockaddr_un sun = { AF_UNIX, "/tmp/.fam_socket" };
