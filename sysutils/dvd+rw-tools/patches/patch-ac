$NetBSD: patch-ac,v 1.5 2006/06/11 15:22:21 wiz Exp $

--- growisofs.c.orig	2006-01-26 21:16:54.000000000 +0000
+++ growisofs.c
@@ -372,7 +372,7 @@
 # ifndef _GNU_SOURCE
 #  define _GNU_SOURCE
 # endif
-#elif defined(__OpenBSD__) || defined(__NetBSD__) || defined(__FreeBSD__)
+#elif defined(__OpenBSD__) || defined(__NetBSD__) || defined(__FreeBSD__) || defined(__DragonFly__)
 # define off64_t	off_t
 # define stat64		stat
 # define fstat64	fstat
@@ -856,7 +856,7 @@ char *setup_fds (char *device)
     goto open_rw;
 }
 
-#elif defined(__FreeBSD__)
+#elif defined(__FreeBSD__) || defined(__DragonFly__)
 
 #include <sys/cdio.h>
 #include <camlib.h>
@@ -2266,7 +2266,9 @@ int main (int argc, char *argv[])
 # ifdef __FreeBSD__
 	syscall(SYS_mlockall,3);
 # else
+#  if !defined(__NetBSD__) && !defined(__DragonFly__)
 	mlockall(MCL_CURRENT|MCL_FUTURE);
+#  endif
 # endif
     } while (0);
 #endif
