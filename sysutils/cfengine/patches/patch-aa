$NetBSD: patch-aa,v 1.5 2004/09/10 21:12:21 wiz Exp $

--- configure.in.orig	2002-08-15 07:59:16.000000000 +0200
+++ configure.in
@@ -86,6 +86,7 @@ AC_CHECK_LIB(wrap, main)   dnl TCP wrapp
 AC_CHECK_LIB(nsl, main)    dnl Debian -lwrap needs nsl
 AC_CHECK_LIB(rx, main)     dnl GNU regex lib if you have regcomp in libc you shouldn't have this
 AC_CHECK_LIB(crypto,main)
+AC_CHECK_LIB(des,main)
 
 
 dnl ######################################################################
@@ -159,17 +160,17 @@ dnl ####################################
 dnl Handle DCE + threading stuff
 dnl #######################################################################
 
-AC_CHECK_LIB(pthread,main)         dnl POSIX threads
+dnl AC_CHECK_LIB(pthread,main)         dnl POSIX threads
 
-if test "$ac_cv_lib_pthread_main" = "yes"; then
-	AC_CHECK_HEADERS(pthread.h)
-	AC_CHECK_HEADERS(sched.h)
-fi
+dnl if test "$ac_cv_lib_pthread_main" = "yes"; then
+dnl 	AC_CHECK_HEADERS(pthread.h)
+dnl 	AC_CHECK_HEADERS(sched.h)
+dnl fi
 
 AC_CHECK_FUNC(lchown, AC_DEFINE(HAVE_LCHOWN))
 
-AC_CHECK_FUNC(pthread_attr_setstacksize, AC_DEFINE(HAVE_PTHREAD_ATTR_SETSTACKSIZE), AC_CHECK_LIB(pthread, pthread_create))
-AC_CHECK_FUNC(pthread_sigmask, AC_DEFINE(HAVE_PTHREAD_SIGMASK), AC_CHECK_LIB(pthread, pthread_create))
+dnl AC_CHECK_FUNC(pthread_attr_setstacksize, AC_DEFINE(HAVE_PTHREAD_ATTR_SETSTACKSIZE), AC_CHECK_LIB(pthread, pthread_create))
+dnl AC_CHECK_FUNC(pthread_sigmask, AC_DEFINE(HAVE_PTHREAD_SIGMASK), AC_CHECK_LIB(pthread, pthread_create))
 
 AC_ARG_ENABLE(DCE,[  --enable-DCE            support for DCE and ACLs],[
   case "$enableval" in
@@ -235,8 +236,8 @@ case "$target_os" in
    aix*)
 	AC_DEFINE(AIX)
         CPPFLAGS="$CPPFLAGS -w"
-	AC_CHECK_LIB(pthreads, main)
-        AC_CHECK_HEADER(pthreads.h)
+dnl 	AC_CHECK_LIB(pthreads, main)
+dnl     AC_CHECK_HEADER(pthreads.h)
         ;;
    osf*)
 	AC_DEFINE(OSF)
@@ -261,8 +262,8 @@ case "$target_os" in
         ;;
    freebsd*)
 	AC_DEFINE(FREEBSD)
-         CFLAGS="$CFLAGS -pthread"
-        AC_CHECK_HEADERS(pthread.h)
+dnl     CFLAGS="$CFLAGS -pthread"
+dnl     AC_CHECK_HEADERS(pthread.h)
         ;;
    netbsd*)
 	AC_DEFINE(NETBSD)
@@ -301,10 +302,10 @@ case "$target_os" in
 
    sysv4.2MP|unix_sv*)
 	AC_DEFINE(UNIXWARE)
-        AC_CHECK_LIB(thread,main)         dnl POSIX threads, weird setup
-        if test "$ac_cv_lib_thread_main" = "yes"; then
-	   AC_CHECK_HEADERS(thread.h)
-        fi
+dnl     AC_CHECK_LIB(thread,main)         dnl POSIX threads, weird setup
+dnl     if test "$ac_cv_lib_thread_main" = "yes"; then
+dnl	   AC_CHECK_HEADERS(thread.h)
+dnl     fi
         ;;
 
    cygwin*)
