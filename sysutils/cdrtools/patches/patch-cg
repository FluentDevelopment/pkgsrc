$NetBSD: patch-cg,v 1.2 2007/03/16 22:04:54 bad Exp $

--- mkisofs/write.c.orig	2007-02-17 16:48:16.000000000 +0100
+++ mkisofs/write.c
@@ -428,7 +428,10 @@ static	char		buffer[SECTOR_SIZE * NSECT]
 			fflush(stderr);
 		}
 #endif
-		remain -= use;
+		if (use > remain)
+			remain = 0;
+		else
+			remain -= use;
 	}
 	fclose(infile);
 } /* write_one_file(... */
