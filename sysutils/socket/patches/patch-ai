$NetBSD: patch-ai,v 1.2 2005/10/04 16:12:28 tron Exp $

--- utils.c.orig	1992-09-09 15:31:16.000000000 +0100
+++ utils.c	2005-10-04 17:09:34.000000000 +0100
@@ -25,8 +25,10 @@
 #else
 #include <sys/resource.h>
 #endif
+#include <unistd.h>
 #include "globals.h"
 
+extern void initialize_siglist A((void)) ;
 
 /* Signal handler, print message and exit */
 SIG_HANDLER_RET exitsig(sig)
@@ -70,10 +72,10 @@
 
 /* set up signal handling. All except TSTP, CONT, CLD, and QUIT
  * are caught with exitsig(). */
-init_signals()
+void init_signals()
 {
     int i ;
-#ifdef SIG_SETMASK		/* only with BSD signals */
+#if defined(SIG_SETMASK) && !defined(__NetBSD__)		/* only with BSD signals */
     static struct sigvec svec = { exitsig, ~0, 0 } ;
 #endif
 
@@ -103,7 +105,7 @@
 	  case SIGQUIT:		/* if the user wants a core dump, */
 	    continue ;		/* they can have it. */
 	  default:	    
-#ifdef SIG_SETMASK
+#if defined(SIG_SETMASK) && !defined(__NetBSD__)
 	    sigvec(i, &svec, NULL) ;
 #else
 	    signal(i, exitsig) ;
