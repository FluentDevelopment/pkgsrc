$NetBSD: patch-aa,v 1.1 2002/12/30 23:12:41 kim Exp $

--- Info.pm.orig	Tue Feb 26 18:03:29 2002
+++ Info.pm	Mon Dec 30 15:18:03 2002
@@ -8,7 +8,7 @@
 	@ISA @EXPORT @EXPORT_OK %EXPORT_TAGS $VERSION $REVISION
 	@mp3_genres %mp3_genres @winamp_genres %winamp_genres $try_harder
 	@t_bitrate @t_sampling_freq @frequency_tbl %v1_tag_fields
-	@v1_tag_names %v2_tag_names %v2_to_v1_names $AUTOLOAD
+	@v1_tag_names %v2_tag_names %v2_to_symbol $AUTOLOAD
 );
 
 @ISA = 'Exporter';
@@ -471,10 +471,10 @@
 			%info = %$v2;
 			$info{TAGVERSION} = $v2h->{version};
 		} else {
-			for (keys %v2_to_v1_names) {
+			for (keys %v2_to_symbol) {
 				if (exists $v2->{$_}) {
 					if ($_ =~ /^TCON?$/ && $v2->{$_} =~ /^.?\((\d+)\)/) {
-						$info{$v2_to_v1_names{$_}} = $mp3_genres[$1];
+						$info{$v2_to_symbol{$_}} = $mp3_genres[$1];
 					} else {
 						my $data = $v2->{$_};
 
@@ -510,7 +510,8 @@
 								$data = $u->utf8;
 							}
 						}
-						$info{$v2_to_v1_names{$_}} = $data;
+						$info{$v2_to_symbol{$_}} = $data;
+						$info{$_} = $data;
 					}
 				}
 			}
@@ -1077,23 +1078,39 @@
 
 	@v1_tag_names = qw(TITLE ARTIST ALBUM YEAR COMMENT TRACKNUM GENRE);
 
-	%v2_to_v1_names = (
+	%v2_to_symbol = (
 		# v2.2 tags
+		'TT1' => 'CONTENTGROUP',
 		'TT2' => 'TITLE',
+		'TT3' => 'SUBTITLE',
 		'TP1' => 'ARTIST',
+		'TP2' => 'BAND',
+		'TP3' => 'CONDUCTOR',
+		'TP4' => 'MIXARTIST',
+		'TCM' => 'COMPOSER',
+		'TXT' => 'LYRICIST',
 		'TAL' => 'ALBUM',
 		'TYE' => 'YEAR',
 		'COM' => 'COMMENT',
 		'TRK' => 'TRACKNUM',
 		'TCO' => 'GENRE', # not clean mapping, but ...
+		'TBP' => 'BPM',
 		# v2.3 tags
+		'TIT1' => 'CONTENTGROUP',
 		'TIT2' => 'TITLE',
+		'TIT3' => 'SUBTITLE',
 		'TPE1' => 'ARTIST',
+		'TPE2' => 'BAND',
+		'TPE3' => 'CONDUCTOR',
+		'TPE4' => 'MIXARTIST',
+		'TCOM' => 'COMPOSER',
+		'TEXT' => 'LYRICIST',
 		'TALB' => 'ALBUM',
 		'TYER' => 'YEAR',
 		'COMM' => 'COMMENT',
 		'TRCK' => 'TRACKNUM',
 		'TCON' => 'GENRE',
+		'TBPM' => 'BPM',
 	);
 
 	%v2_tag_names = (
