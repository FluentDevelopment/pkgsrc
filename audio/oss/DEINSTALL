# $NetBSD: DEINSTALL,v 1.4 2002/10/03 10:34:23 jlam Exp $

OSSLIBDIR="@OSSLIBDIR@"
SFILES="@SFILES@"

case ${STAGE} in
DEINSTALL)
	#
	# Ensure the OSS LKM is unloaded.
	#
	if [ -f @RCD_SCRIPTS_DIR@/oss ]; then
		@RCD_SCRIPTS_DIR@/oss forcestop
	fi
	#
	# Unconditionally remove the OSS files in /etc.
	#
	for file in ${SFILES}; do
		${RM} -f /etc/$${file}
	done
	#
	# Unconditionally remove the OSS license file.
	#
	${RM} -f ${OSSLIBDIR}/license.asc
	#
	# Remove some files generated by soundconf/sndconf.
	#
	${RM} -f ${OSSLIBDIR}/*.log
	${RM} -f ${OSSLIBDIR}/devices.cfg
	${RM} -f ${OSSLIBDIR}/modules.cfg
	${RM} -f ${OSSLIBDIR}/order.html
	${RM} -f ${OSSLIBDIR}/pnpres.dat
	;;

POST-DEINSTALL)
	#
	# Remove the OSS devices.
	#
	${RM} -f /dev/dsp* /dev/sound /dev/audio* /dev/mixer* /dev/midi*
	${RM} -f /dev/sequencer /dev/music /dev/sndstat

	${CAT} << EOF
===========================================================================

The OSS devices in /dev have been removed.  You should run

	cd /dev; sh MAKEDEV all

to recreate any audio devices which were overwritten by the OSS devices.

===========================================================================
EOF
	;;
esac
