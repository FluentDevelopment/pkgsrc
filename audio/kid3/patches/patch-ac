$NetBSD: patch-ac,v 1.1 2007/02/07 07:54:45 wiz Exp $

--- kid3/oggfile.cpp.orig	2006-11-04 22:14:53.000000000 +0000
+++ kid3/oggfile.cpp
@@ -18,6 +18,9 @@
 #if QT_VERSION >= 0x040000
 #include <Q3CString>
 #endif
+#ifdef __NetBSD__
+#include <sys/param.h>
+#endif
 #include <sys/stat.h>
 #ifdef WIN32
 #include <sys/utime.h>
@@ -607,7 +610,7 @@ bool OggFile::FileInfo::read(const char*
 					bitrate = vi->bitrate_lower;
 				}
 			}
-#ifdef WIN32
+#if defined(WIN32) || (defined(__NetBSD__) && __NetBSD_Version__ < 299000000)
 			duration = (long)::ov_time_total(&vf, -1);
 #else
 			duration = ::lrint(::ov_time_total(&vf, -1));
