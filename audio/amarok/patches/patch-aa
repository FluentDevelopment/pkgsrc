$NetBSD: patch-aa,v 1.10 2007/02/18 00:55:06 wiz Exp $

Fix for CVE-2006-6979 based on http://bugs.kde.org/show_bug.cgi?id=138499
(without the whitespace changes).

--- amarok/src/magnatunebrowser/magnatunealbumdownloader.cpp.orig	2007-02-01 18:14:17.000000000 +0000
+++ amarok/src/magnatunebrowser/magnatunealbumdownloader.cpp
@@ -89,7 +89,7 @@ void MagnatuneAlbumDownloader::albumDown
 
     //ok, now we have the .zip file downloaded. All we need is to unpack it to the desired location and add it to the collection.
 
-    QString unzipString = "unzip \""+m_tempDir.name() + m_currentAlbumFileName + "\" -d \"" + m_currentAlbumUnpackLocation + "\" &";
+    QString unzipString = "unzip " + KProcess::quote( m_tempDir.name() + m_currentAlbumFileName ) + " -d " + KProcess::quote( m_currentAlbumUnpackLocation ) + " &";
 
     debug() << "unpacking: " << unzipString << endl;
 
