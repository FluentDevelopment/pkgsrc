$NetBSD: patch-ae,v 1.2 2002/10/27 07:21:18 rh Exp $

--- source/gdcd.c.orig	Sun Jan  9 08:13:01 2000
+++ source/gdcd.c
@@ -17,6 +17,19 @@
 #include "coverart.h"
 #include "conf.h"
 
+/*
+ * Pth is non-preemptive, so we yield the processor periodically
+ */
+#ifdef _PTH_PTHREAD_H_
+gint
+pth_nbschedule (gpointer data)
+{
+	sched_yield();
+	return TRUE;
+}
+#endif
+
+
 GtkWidget *window;
 GdkPixmap *window_bg, *splash_pm;
 GdkPixmap *play_ico, *pause_ico, *stop_ico, *error_ico, *null_ico;
@@ -1121,6 +1134,10 @@
    
    free(confitem);
    
+#ifdef _PTH_PTHREAD_H_
+   gtk_timeout_add (200, pth_nbschedule, NULL);
+#endif
+
    gtk_main();
    
    return 0;
