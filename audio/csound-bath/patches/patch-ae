$NetBSD: patch-ae,v 1.3 2003/01/19 21:31:11 hubertf Exp $

--- midisend.c.orig	Mon Nov 11 01:01:15 2002
+++ midisend.c
@@ -16,10 +16,24 @@
 #include <ctype.h>
 #include <sys/ioctl.h>
 #include <fcntl.h>
+#ifdef __NetBSD__
+#  include <sys/midiio.h>
+#  define SEQ_MIDIPUTC			SEQOLD_MIDIPUTC
+#  define SEQ_DEFINEBUF(len)		unsigned char _seqbuf[len]; int _seqbuflen = len;int _seqbufptr = 0
+#  define _SEQ_ADVBUF(len)		_seqbufptr += len
+#  define _SEQ_NEEDBUF(len)		if ((_seqbufptr+(len)) > _seqbuflen) seqbuf_dump()
+#  define SEQ_MIDIOUT(device, byte)	{_SEQ_NEEDBUF(4);\
+					_seqbuf[_seqbufptr] = SEQ_MIDIPUTC;\
+					_seqbuf[_seqbufptr+1] = (byte);\
+					_seqbuf[_seqbufptr+2] = (device);\
+					_seqbuf[_seqbufptr+3] = 0;\
+					_SEQ_ADVBUF(4);}
+#else
 #ifdef __FreeBSD__
 #  include <sys/soundcard.h>
 #else
 #  include <linux/soundcard.h>
+#endif
 #endif
 
 #define MIDI_DEV "/dev/sequencer"
