$NetBSD: patch-ad,v 1.1 2002/12/23 20:54:43 wiz Exp $

--- src/id3_tag.c.orig	Sat Oct  5 23:32:43 2002
+++ src/id3_tag.c
@@ -807,12 +807,15 @@ gint Id3tag_Get_Id3v2_Version (gchar *fi
     if ( filename!=NULL && (file=fopen(filename,"r"))!=NULL )
     {
         fseek(file,0,SEEK_SET);
-        if (fread(tmp,1,4, file) != 4)
+        if (fread(tmp,1,4, file) != 4) {
+	    fclose(file);
             return -1;
+	}
+
+	fclose(file);
 
         if (tmp[0] == 'I' && tmp[1] == 'D' && tmp[2] == '3' && tmp[3] < 0xFF)
         {
-            fclose(file);
             return (gint)tmp[3];
         }else
         {
