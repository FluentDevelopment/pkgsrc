$NetBSD: patch-aw,v 1.2 2003/12/04 00:34:06 kristerw Exp $

--- soundio.c.orig	Sat May 19 12:29:57 2001
+++ soundio.c	Wed Dec  3 23:54:20 2003
@@ -57,7 +57,7 @@
 extern  int     rtrecord(char *, int);
 extern  void    rtplay(char *, int);
 extern  void    rtclose(void);
-# ifndef OSSRTAUDIO
+# if !defined(OSSRTAUDIO) && !defined(NETBSDRTAUDIO)
 extern  void    recopen(int, int, MYFLT, int);
 extern  void    playopen(int, int, MYFLT, int);
 # endif
@@ -70,6 +70,9 @@
 #  include "OSSrtaudio.h"
 static int oss_mode = OSS_RECORD; /* Module-global state variable */
 # endif
+# ifdef NETBSDRTAUDIO
+#  include "rtNetBSD.h"
+# endif
 #ifdef PIPES
 FILE* pin=NULL, *pout=NULL;
 /*sbrandon: added NeXT to line below*/
@@ -166,7 +169,7 @@
         return(sreadin(isfd,inbuf,nbytes,p));
 }
 
-#if !defined(SYMANTEC) && !defined(_macintosh) && !defined(LINUX) && !defined(__BEOS__)
+#if !defined(SYMANTEC) && !defined(_macintosh) && !defined(LINUX) && !defined(__BEOS__) && !defined(__NetBSD__)
 extern int write(int, const void*, unsigned int);
 #endif
 /* RWD.2.98 WAVE floats format must be NORMALIZED +- 1 */
@@ -469,6 +472,10 @@
 #endif
 # ifdef LINUX
 	     || strcmp(O.outfilename,"/dev/dsp") ==0
+# endif
+# ifdef BSD
+             || strncmp(O.outfilename,"/dev/sound",10) ==0
+             || strncmp(O.outfilename,"/dev/audio",10) ==0
 # endif
              || strcmp(O.outfilename,"dac") == 0) {
 #ifdef WIN32
