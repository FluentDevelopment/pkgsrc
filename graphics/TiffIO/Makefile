# $NetBSD: Makefile,v 1.4 2006/02/05 23:09:27 joerg Exp $
#

DISTNAME=		TiffIO-110c
PKGNAME=		TiffIO-1.1.0.3
PKGREVISION=		2
CATEGORIES=		graphics
MASTER_SITES=		http://artis.imag.fr/Software/TiffIO/
EXTRACT_SUFX=		.tgz

MAINTAINER=		gdt@ir.bbn.com
HOMEPAGE=		http://artis.imag.fr/Software/TiffIO/
COMMENT=		Tiff support for QT image loader

USE_TOOLS+=     gmake
USE_LANGUAGES=  c c++

do-configure:
	(cd ${WRKSRC} && ${QTDIR}/bin/qmake -o Makefile TiffIO.pro; \
		${SED} -e 's,-rpath.*$$,-rpath "${QTDIR}/lib",' < Makefile > Makefile.new; \
		${MV} Makefile.new Makefile; \
		)

do-install:
	(cd ${WRKSRC} && \
	libtool --mode=install ${INSTALL_PROGRAM} libTiffIO.la ${PREFIX}/qt3/plugins/imageformats && \
	libtool --finish ${PREFIX}/qt3/plugins/imageformats)

BUILD_ENV+=		QTDIR="${QTDIR}"

# XXX The package uses an included version of tiff.
#.include "../../graphics/tiff/buildlink3.mk"

.include "../../x11/qt3-libs/buildlink3.mk"
.include "../../x11/qt3-tools/buildlink3.mk"

.include "../../mk/bsd.pkg.mk"
