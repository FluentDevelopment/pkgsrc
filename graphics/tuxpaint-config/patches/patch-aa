$NetBSD: patch-aa,v 1.2 2004/10/07 15:40:23 wiz Exp $

--- Makefile.orig	2004-09-11 11:59:03.000000000 +0200
+++ Makefile
@@ -14,7 +14,7 @@
 
 # Where to install things:
 
-PREFIX=/usr/local
+#PREFIX=/usr/local
 
 
 # Program:
@@ -30,7 +30,7 @@ DATA_PREFIX=$(PREFIX)/share/tuxpaint-con
 # Docs and man page:
 
 DOC_PREFIX=$(PREFIX)/share/doc/tuxpaint-config/
-MAN_PREFIX=$(PREFIX)/share/man/
+MAN_PREFIX=$(PREFIX)/man/
 
 
 # Tux Paint's 'System-wide' Config file:
@@ -69,7 +69,7 @@ FLTK_LIBS=`fltk-config --ldstaticflags`
 
 # The entire set of CFLAGS:
 
-CFLAGS=-O2 -Wall $(FLTK_CFLAGS) -DDATA_PREFIX=\"$(DATA_PREFIX)\" \
+CFLAGS+=-Wall $(FLTK_CFLAGS) -DDATA_PREFIX=\"$(DATA_PREFIX)\" \
 	-D$(NOSOUNDFLAG) -DDOC_PREFIX=\"$(DOC_PREFIX)\" \
 	-DLOCALEDIR=\"$(LOCALE_PREFIX)\" -DCONFDIR=\"$(CONFDIR)\"
 
@@ -90,8 +90,7 @@ all:	tuxpaint-config translations
 # to do this as superuser ("root"))
 
 install:	install-bin install-data install-man install-doc \
-		install-gnome install-kde install-kde-icons \
-		install-icon install-gettext
+		install-gettext
 	@echo
 	@echo "All done! Now (preferably NOT as 'root' superuser),"
 	@echo "you can type the command 'tuxpaint-config' to run the"
@@ -190,8 +189,7 @@ install-icon:
 install-bin:
 	@echo
 	@echo "...Installing program itself..."
-	cp tuxpaint-config $(BIN_PREFIX)
-	chmod a+rx,g-w,o-w $(BIN_PREFIX)/tuxpaint-config
+	${BSD_INSTALL_PROGRAM} tuxpaint-config $(BIN_PREFIX)
 
 
 # Install the data (sound, graphics, fonts):
@@ -199,7 +197,7 @@ install-bin:
 install-data:
 	@echo
 	@echo "...Installing data files..."
-	install -d $(DATA_PREFIX)
+	${BSD_INSTALL_DATA_DIR} $(DATA_PREFIX)
 	cp -R data/* $(DATA_PREFIX)
 	chmod -R a+rX,g-w,o-w $(DATA_PREFIX)
 
@@ -218,26 +216,20 @@ install-doc:
 	@echo
 	@echo "...Installing documentation..."
 	@echo "(English)"
-	install -d $(DOC_PREFIX)
-	cp docs/AUTHORS.txt $(DOC_PREFIX)
-	cp docs/CHANGES.txt $(DOC_PREFIX)
-	cp docs/COPYING.txt $(DOC_PREFIX)
-	cp docs/README.txt $(DOC_PREFIX)
-	cp docs/TODO.txt $(DOC_PREFIX)
-	@echo "(...Setting permissions)"
-	chmod a+rx,g-w,o-w $(DOC_PREFIX)
+	${BSD_INSTALL_DATA_DIR} $(DOC_PREFIX)
+	${BSD_INSTALL_DATA} docs/AUTHORS.txt $(DOC_PREFIX)
+	${BSD_INSTALL_DATA} docs/CHANGES.txt $(DOC_PREFIX)
+	${BSD_INSTALL_DATA} docs/COPYING.txt $(DOC_PREFIX)
+	${BSD_INSTALL_DATA} docs/README.txt $(DOC_PREFIX)
+	${BSD_INSTALL_DATA} docs/TODO.txt $(DOC_PREFIX)
 
 
 # Install the man page:
 
 install-man:
 	@echo "...Installing man pages..."
-	# man1 directory...
-	install -d $(MAN_PREFIX)/man1/
 	# tuxpaint-config.1
-	cp src/tuxpaint-config.1 $(MAN_PREFIX)/man1/
-	gzip -f $(MAN_PREFIX)/man1/tuxpaint-config.1
-	chmod a+rx,g-w,o-w $(MAN_PREFIX)/man1/tuxpaint-config.1.gz
+	${BSD_INSTALL_MAN} src/tuxpaint-config.1 $(MAN_PREFIX)/man1/
 
 
 # Build the program!
@@ -245,7 +237,7 @@ install-man:
 tuxpaint-config:	obj/tuxpaint-config.o obj/tuxpaint-config2.o	\
 			obj/defaults.o
 	$(CXX) $(CFLAGS) -o tuxpaint-config obj/tuxpaint-config.o 	\
-			obj/tuxpaint-config2.o obj/defaults.o $(FLTK_LIBS)
+			obj/tuxpaint-config2.o obj/defaults.o $(FLTK_LIBS) -lintl
 
 
 # Build the object for the program!
