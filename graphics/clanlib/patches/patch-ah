$NetBSD: patch-ah,v 1.6 2001/08/23 15:55:26 jlam Exp $

--- Makefile.in.orig	Sun Apr  9 14:17:58 2000
+++ Makefile.in
@@ -261,43 +261,43 @@
 	@install -d $(BIN_PREFIX)
 	@install -d $(LIB_PREFIX)
 	@for i in `find Sources/API/* -type d | grep -v CVS | sed "s/Sources\/API\///;"`; do install -d $(INC_PREFIX)/ClanLib/$$i; done
-	@for i in `find Sources/API/* -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
+	@for i in `find Sources/API/* -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -c -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
 	@echo "Libraries are being installed in $(LIB_PREFIX)."
-	@install Libs/libclanCore.so.$(D_VERSION_MINOR) $(LIB_PREFIX)
+	@install -c Libs/libclanCore.so.$(D_VERSION_MINOR) $(LIB_PREFIX)
 	@ln -s -f libclanCore.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanCore.so.$(D_VERSION_MAJOR)
 	@ln -s -f libclanCore.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanCore.so
 	@if [ -f Libs/libclanGL.so ]; then \
-		install Libs/libclanGL.so.$(D_VERSION_MINOR) $(LIB_PREFIX); \
+		install -c Libs/libclanGL.so.$(D_VERSION_MINOR) $(LIB_PREFIX); \
 		ln -s -f libclanGL.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanGL.so.$(D_VERSION_MAJOR); \
 		ln -s -f libclanGL.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanGL.so; \
 	fi
 	@if [ -f Libs/libclanMagick.so ]; then \
-		install Libs/libclanMagick.so.$(D_VERSION_MINOR) $(LIB_PREFIX); \
+		install -c Libs/libclanMagick.so.$(D_VERSION_MINOR) $(LIB_PREFIX); \
 		ln -s -f libclanMagick.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanMagick.so.$(D_VERSION_MAJOR); \
 		ln -s -f libclanMagick.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanMagick.so; \
 	fi
 	@if [ -f Libs/libclanMPEG.so ]; then \
-		install Libs/libclanMPEG.so.$(D_VERSION_MINOR) $(LIB_PREFIX); \
+		install -c Libs/libclanMPEG.so.$(D_VERSION_MINOR) $(LIB_PREFIX); \
 		ln -s -f libclanMPEG.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanMPEG.so.$(D_VERSION_MAJOR); \
 		ln -s -f libclanMPEG.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanMPEG.so; \
 	fi
 	@if [ -f Libs/libclanLua.so ]; then \
-		install Libs/libclanLua.so.$(D_VERSION_MINOR) $(LIB_PREFIX); \
+		install -c Libs/libclanLua.so.$(D_VERSION_MINOR) $(LIB_PREFIX); \
 		ln -s -f libclanLua.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanLua.so.$(D_VERSION_MAJOR); \
 		ln -s -f libclanLua.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanLua.so; \
 	fi
 	@if [ -f Libs/libclanGUI.so ]; then \
-		install Libs/libclanGUI.so.$(D_VERSION_MINOR) $(LIB_PREFIX); \
+		install -c Libs/libclanGUI.so.$(D_VERSION_MINOR) $(LIB_PREFIX); \
 		ln -s -f libclanGUI.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanGUI.so.$(D_VERSION_MAJOR); \
 		ln -s -f libclanGUI.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanGUI.so; \
 	fi
 	@if [ -f Libs/libclanMikMod.so ]; then \
-		install Libs/libclanMikMod.so.$(D_VERSION_MINOR) $(LIB_PREFIX); \
+		install -c Libs/libclanMikMod.so.$(D_VERSION_MINOR) $(LIB_PREFIX); \
 		ln -s -f libclanMikMod.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanMikMod.so.$(D_VERSION_MAJOR); \
 		ln -s -f libclanMikMod.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanMikMod.so; \
 	fi
 	@if [ -f Libs/libclanPNG.so ]; then \
-		install Libs/libclanPNG.so.$(D_VERSION_MINOR) $(LIB_PREFIX); \
+		install -c Libs/libclanPNG.so.$(D_VERSION_MINOR) $(LIB_PREFIX); \
 		ln -s -f libclanPNG.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanPNG.so.$(D_VERSION_MAJOR); \
 		ln -s -f libclanPNG.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanPNG.so; \
 	fi
@@ -306,10 +306,10 @@
 		install -d $(TARGET_PREFIX); \
 		all_targets_var="$(ALL_TARGETS)"; \
 		for curtarget in $$all_targets_var; do \
-			install $$curtarget $(TARGET_PREFIX);  \
+			install -c $$curtarget $(TARGET_PREFIX);  \
 		done; \
 	fi
-	@install clanlib-config $(BIN_PREFIX)
+	@install -c clanlib-config $(BIN_PREFIX)
 
 	@echo ""
 	@echo "Installation complete, now run 'ldconfig' as root or point the"
@@ -427,7 +427,7 @@
 	
 Libs/libclanPNG.so: Libs/libclanCore.so $(OBJF_LIB_PNG)
 	@echo "Building Libs/libclanPNG.so"
-	@$(LINK_COMMAND) -Wl,-soname=libclanPNG.so.$(D_VERSION_MAJOR) -o Libs/libclanPNG.so.$(D_VERSION_MINOR) $(OBJF_LIB_PNG) -L Libs -lclanCore -lpng
+	@$(LINK_COMMAND) -Wl,-R$(LOCALBASE)/lib -Wl,-soname=libclanPNG.so.$(D_VERSION_MAJOR) -o Libs/libclanPNG.so.$(D_VERSION_MINOR) $(OBJF_LIB_PNG) -L Libs -lclanCore -lpng
 	@ln -s -f libclanPNG.so.$(D_VERSION_MINOR) Libs/libclanPNG.so.$(D_VERSION_MAJOR)
 	@ln -s -f libclanPNG.so.$(D_VERSION_MAJOR) Libs/libclanPNG.so
 	
@@ -437,7 +437,7 @@
 
 Libs/libclan-sound.so.$(D_VERSION_MINOR): $(OBJF_SOUND_CLANSOUND)
 	@echo "Building sound target"
-	@$(LINK_COMMAND) -o Libs/libclan-sound.so.$(D_VERSION_MINOR) $(OBJF_SOUND_CLANSOUND)
+	@$(LINK_COMMAND) ${LIBOSSAUDIO} -o Libs/libclan-sound.so.$(D_VERSION_MINOR) $(OBJF_SOUND_CLANSOUND)
 
 Libs/libclan-input-tty.so.$(D_VERSION_MINOR): $(OBJF_INPUT_TTY)
 	@echo "Building tty input target"
@@ -445,7 +445,7 @@
 
 Libs/libclan-display-x11.so.$(D_VERSION_MINOR): $(OBJF_DISP_X11)
 	@echo "Building x11 target"
-	@$(LINK_COMMAND) -o Libs/libclan-display-x11.so.$(D_VERSION_MINOR) $(OBJF_DISP_X11) @x_libraries@
+	@$(LINK_COMMAND) -Wl,-R$(X11BASE)/lib -o Libs/libclan-display-x11.so.$(D_VERSION_MINOR) $(OBJF_DISP_X11) @x_libraries@
 
 Libs/libclan-display-ptc.so.$(D_VERSION_MINOR): $(OBJF_DISP_PTC) Libs/libclan-display-x11.so.$(D_VERSION_MINOR)
 	@echo "Building openptc target"
@@ -456,7 +456,7 @@
 Libs/libclan-display-glx.so.$(D_VERSION_MINOR): $(OBJF_DISP_GLX) Libs/libclan-display-x11.so.$(D_VERSION_MINOR)
 	@echo "Building glx target"
 	@ln -s -f Libs/libclan-display-x11.so.$(D_VERSION_MINOR) .
-	@$(LINK_COMMAND) -L Libs -Wl,-rpath,$(TARGET_PREFIX) libclan-display-x11.so.$(D_VERSION_MINOR) -o Libs/libclan-display-glx.so.$(D_VERSION_MINOR) $(OBJF_DISP_GLX) @x_libraries@ -lGL -lGLU 
+	@$(LINK_COMMAND) -L Libs -Wl,-R$(X11BASE)/lib libclan-display-x11.so.$(D_VERSION_MINOR) -o Libs/libclan-display-glx.so.$(D_VERSION_MINOR) $(OBJF_DISP_GLX) @x_libraries@ -lGL -lGLU 
 	@rm -f libclan-display-x11.so.$(D_VERSION_MINOR)
 
 Libs/libclan-display-ggi.so.$(D_VERSION_MINOR): $(OBJF_DISP_GGI)
