# $NetBSD: Makefile.common,v 1.13 2004/01/24 01:33:49 kristerw Exp $

DISTNAME=	aalib-${DIST_VERS}
CATEGORIES+=	graphics
MASTER_SITES+=	${MASTER_SITE_SOURCEFORGE:=aa-project/}

DIST_VERS=	1.4rc4
BASE_VERS=	1.4.0.4

MAINTAINER?=	manu@NetBSD.org
HOMEPAGE=	http://aa-project.sourceforge.net/aalib/

DISTINFO_FILE=		${.CURDIR}/../../graphics/aalib/distinfo
PATCHDIR=		${.CURDIR}/../../graphics/aalib/patches

WRKSRC=			${WRKDIR}/aalib-1.4.0
GNU_CONFIGURE=		YES
USE_LIBTOOL=		YES
LTCONFIG_OVERRIDE=	${WRKSRC}/ltconfig

CONFIGURE_ARGS+=	--with-curses-driver=no

.if ${MACHINE_ARCH} == "arm" || ${MACHINE_ARCH} == "arm32"
GCC_REQD=		2.95.3
.endif

.if !target(post-patch)
post-patch:
	@for f in `${FIND} ${WRKSRC} -name '*.[ch]'`; do		\
		${SED} -e "s|<malloc.h>|<stdlib.h>|g" $$f > $$f.patch	\
		&& ${MV} $$f.patch $$f;					\
	done
.endif

.include "../../mk/bsd.pkg.mk"
