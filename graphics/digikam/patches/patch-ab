$NetBSD: patch-ab,v 1.6 2007/01/08 03:01:29 rillig Exp $

--- digikam/libs/dmetadata/dmetadata.cpp.orig	2006-12-17 11:13:08.000000000 +0100
+++ digikam/libs/dmetadata/dmetadata.cpp	2007-01-08 03:58:59.000000000 +0100
@@ -2061,6 +2061,19 @@ bool DMetadata::removeGPSInfo()
     return false;
 }
 
+#if !defined(trunc)
+#  if defined(__DragonFly__) || defined(__NetBSD__)
+#    define trunc(x) my_trunc((x))
+static double my_trunc(double val)
+{
+	if (val > 0)
+		return floor(val);
+	else
+		return ceil(val);
+}
+#  endif
+#endif
+
 void DMetadata::convertToRational(double number, long int* numerator, 
                                    long int* denominator, int rounding)
 {
