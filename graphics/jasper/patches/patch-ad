$NetBSD: patch-ad,v 1.1 2002/11/13 14:24:21 dillo Exp $

--- src/libjasper/jp2/jp2_cod.c.orig	Thu Oct 17 23:24:48 2002
+++ src/libjasper/jp2/jp2_cod.c
@@ -335,7 +335,9 @@ jp2_box_t *jp2_box_get(jas_stream_t *in)
 		jas_stream_close(tmpstream);
 	}
 
-	jp2_box_dump(box, stderr);
+	if (jas_getdbglevel() >= 1) {
+		jp2_box_dump(box, stderr);
+	}
 
 	return box;
 	abort();
@@ -813,11 +815,15 @@ static void jp2_cmap_dumpdata(jp2_box_t 
 	jp2_cmap_t *cmap = &box->data.cmap;
 	int i;
 	jp2_cmapent_t *ent;
-	fprintf(stderr, "numchans = %d\n", (int) cmap->numchans);
+	if (jas_getdbglevel() >= 1) {
+		fprintf(stderr, "numchans = %d\n", (int) cmap->numchans);
+	}
 	for (i = 0; i < cmap->numchans; ++i) {
 		ent = &cmap->ents[i];
-		fprintf(stderr, "cmptno=%d; map=%d; pcol=%d\n",
-		  (int) ent->cmptno, (int) ent->map, (int) ent->pcol);
+		if (jas_getdbglevel() >= 1) {
+			fprintf(stderr, "cmptno=%d; map=%d; pcol=%d\n",
+ 			  (int) ent->cmptno, (int) ent->map, (int) ent->pcol);
+		}
 	}
 }
 
