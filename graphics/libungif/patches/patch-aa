$NetBSD: patch-aa,v 1.7 2005/03/20 11:07:33 schwarz Exp $

--- util/gif2iris.c.orig	2005-03-19 17:50:38.000000000 +0100
+++ util/gif2iris.c	2005-03-19 18:06:18.000000000 +0100
@@ -30,6 +30,9 @@
 #include "gl.h"
 #include "device.h"
 
+#ifndef __MSDOS__
+#include <stdlib.h>
+#endif
 #include <stdio.h>
 #include <ctype.h>
 #include <string.h>
@@ -229,8 +232,8 @@
     BackGround = GifFile->SBackGroundColor;
     ColorMap = (GifFile->Image.ColorMap ? GifFile->Image.ColorMap :
 				       GifFile->SColorMap);
-    ColorMapSize = 1 << (GifFile->Image.ColorMap ? GifFile->Image.BitsPerPixel :
-				                GifFile->SBitsPerPixel);
+    ColorMapSize = 1 << (GifFile->Image.ColorMap ? GifFile->Image.ColorMap->BitsPerPixel :
+				                GifFile->SColorMap->BitsPerPixel);
     GifQprintf("\n");
     Screen2Iris(ScreenBuffer, GifFile->SWidth, GifFile->SHeight);
 
