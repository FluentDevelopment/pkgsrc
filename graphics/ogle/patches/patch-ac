$NetBSD: patch-ac,v 1.1 2002/05/20 23:03:37 veego Exp $

--- mpeg2_video/video_output_x11.c.orig	Sun Dec  2 22:38:00 2001
+++ mpeg2_video/video_output_x11.c	Tue May 21 00:47:58 2002
@@ -1751,7 +1751,7 @@
 			      window.video_area.width) / 2;
   window.video_area.y = (int)(window.window_area.height -
 			      window.video_area.height) / 2;
-  
+  if(use_xshm) {
   XvShmPutImage(mydisplay, xv_port, dwin->win, mygc, xv_image, 
 		0, 0, 
 		dwin->image->info->picture.horizontal_size,
@@ -1761,9 +1761,18 @@
 		window.video_area.width,
 		window.video_area.height,
 		True);
-  
+  } else {
+    XvPutImage(mydisplay, xv_port, dwin->win, mygc, xv_image, 
+	       0, 0, 
+	       dwin->image->info->picture.horizontal_size,
+	       dwin->image->info->picture.vertical_size,
+	       window.video_area.x,
+	       window.video_area.y,
+	       window.video_area.width,
+	       window.video_area.height);
+  }
   //XFlush(mydisplay); ??
-  {
+  if(use_xshm) {
     XEvent ev;
     XEvent *e;
     e = &ev;
