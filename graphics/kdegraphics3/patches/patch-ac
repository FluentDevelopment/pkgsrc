$NetBSD: patch-ac,v 1.2 2003/03/11 13:24:59 markd Exp $

--- kview/Makefile.am.orig	Sun Oct 27 11:15:54 2002
+++ kview/Makefile.am
@@ -5,7 +5,7 @@ INCLUDES = -I$(top_srcdir)/kview $(all_i
 METASOURCES = AUTO
 
 bin_PROGRAMS = kview
-lib_LTLIBRARIES = kview.la libkviewsupport.la
+lib_LTLIBRARIES = libkview_main.la kview.la libkviewsupport.la
 
 noinst_HEADERS = kview.h kpreferencesdialog.h kpreferencesmodule.h kpluginselector.h kviewconfmodules.h
 
@@ -13,13 +13,17 @@ libkviewsupport_la_SOURCES = kpreference
 libkviewsupport_la_LDFLAGS = $(all_libraries) -no-undefined -version-info 0:0
 libkviewsupport_la_LIBADD  = $(LIB_KDEUI)
 
-kview_SOURCES = dummy.cpp
+kview_SOURCES = kview_main.cpp
 kview_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-kview_LDADD = kview.la
+kview_LDADD = libkview_main.la
 
-kview_la_SOURCES = kviewconfmodules.cpp kview.cpp main.cpp
+libkview_main_la_SOURCES = kviewconfmodules.cpp kview.cpp main.cpp
+libkview_main_la_LDFLAGS = $(KDE_RPATH) $(all_libraries)
+libkview_main_la_LIBADD = $(LIB_KPARTS) libkviewsupport.la
+
+kview_la_SOURCES = kview_main.cpp
 kview_la_LDFLAGS = $(KDE_RPATH) $(all_libraries) -module -avoid-version
-kview_la_LIBADD = $(LIB_KPARTS) libkviewsupport.la
+kview_la_LIBADD = libkview_main.la
 
 lnkdir = $(kde_appsdir)/Graphics
 lnk_DATA = kview.desktop
@@ -32,6 +36,3 @@ rc_DATA = kviewui.rc
 messages: rc.cpp
 	$(EXTRACTRC) kviewviewer/*.rc kviewviewer/*.ui >> rc.cpp
 	$(XGETTEXT) kviewviewer/*.cpp kviewcanvas/*.cpp *.cpp *.h -o $(podir)/kview.pot
-
-dummy.cpp:
-	echo > dummy.cpp
