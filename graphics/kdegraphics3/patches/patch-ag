$NetBSD: patch-ag,v 1.2 2003/03/11 13:25:00 markd Exp $

--- kuickshow/src/Makefile.am.orig	Mon Sep 16 09:12:49 2002
+++ kuickshow/src/Makefile.am
@@ -1,25 +1,28 @@
 ## Makefile.am for kuickshow
 
 bin_PROGRAMS = kuickshow
-lib_LTLIBRARIES = kuickshow.la
+lib_LTLIBRARIES = libkuickshow_main.la kuickshow.la
 
 # set the include path for X, qt and KDE
 INCLUDES = $(all_includes)
 KDE_CXXFLAGS = $(IMLIB_CFLAGS)
-CLEANFILES = dummy.cpp
 METASOURCES = AUTO
 
-kuickshow_la_LDFLAGS = $(all_libraries) -module -avoid-version
-kuickshow_la_LIBADD  = $(LIB_KDEPRINT) $(LIB_IMLIB)
-kuickshow_la_SOURCES =	kuickshow.cpp \
+libkuickshow_main_la_LDFLAGS = $(all_libraries)
+libkuickshow_main_la_LIBADD  = $(LIB_KDEPRINT) $(LIB_IMLIB)
+libkuickshow_main_la_SOURCES =	kuickshow.cpp \
 	aboutwidget.cpp     generalwidget.cpp  kuickconfigdlg.cpp  main.cpp \
 	defaultswidget.cpp  imagewindow.cpp    kuickdata.cpp  \
 	imdata.cpp filefinder.cpp kurlwidget.cpp filewidget.cpp \
 	kuickio.cpp kuick.cpp imlibwidget.cpp slideshowwidget.cpp printing.cpp
 
+kuickshow_la_LDFLAGS = $(all_libraries) -module -avoid-version
+kuickshow_la_LIBADD  = $(LIB_KDEPRINT) $(LIB_IMLIB) libkuickshow_main.la
+kuickshow_la_SOURCES =	kuickshow_main.cpp
+
 # now the kuickshow binary
-kuickshow_LDADD = kuickshow.la $(LIB_KIO) $(LIB_IMLIB)
-kuickshow_SOURCES = dummy.cpp
+kuickshow_LDADD = libkuickshow_main.la $(LIB_KIO) $(LIB_IMLIB)
+kuickshow_SOURCES = kuickshow_main.cpp
 kuickshow_LDFLAGS = $(all_libraries) $(KDE_RPATH)
 
 
@@ -35,6 +38,3 @@ KDE_ICON = kuickshow
  # this is where the kdelnk file will go 
 appsdir   = $(kde_appsdir)/Graphics
 apps_DATA = kuickshow.desktop
-
-dummy.cpp:
-	echo "// generated dummy file" > dummy.cpp
