$NetBSD: patch-aa,v 1.3 2005/03/10 14:07:29 tv Exp $

--- fujiplay.c.orig	1999-02-23 04:30:31.000000000 -0500
+++ fujiplay.c
@@ -36,5 +36,5 @@
 #endif
 
-#define DEFAULT_DEVICE	"/dev/fujifilm"
+#define DEFAULT_DEVICE	"/dev/tty00"
 #define TMP_PIC_FILE	".dsc_temp"
 
@@ -633,6 +633,6 @@ void download_picture(int n)
 	t2 = times(&stms);
 	if (t1==t2) t2++; /* paranoia */
-	printf("%3d seconds, ", (int)(t2-t1) / CLK_TCK);
-	printf("%4d bytes/s\n", size * CLK_TCK / (int)(t2-t1));
+	printf("%3d seconds, ", (int)((t2-t1) / CLK_TCK));
+	printf("%4d bytes/s\n", (int)(size * CLK_TCK / (int)(t2-t1)));
 	fclose(fd);
 	if (stat(TMP_PIC_FILE, &st) < 0 || st.st_size != size) {
@@ -760,32 +760,31 @@ again:
 }
 
-const char *Usage = "\
-Usage: fujiplay [OPTIONS] PICTURES...          (download)
-                          charge NUMBER        (recharge the flash)
-                          shoot                (take picture)
-                          preview              (preview to standard output)
-                          upload FILES...
-                          delete FILES...
-                          setid STRING         (set camera ID)
-                          setflash MODE        (0=Off, 1=On, 2=Strobe, 3=Auto)
-                          setdate gmt|local|YYYYMMDDHHMMSS
-Options:
-  -B NUMBER	Set baudrate (115200, 57600, 38400, 19200, 9600 or 0)
-  -D DEVICE	Select another device file (default is /dev/fujifilm)
-  -L		List command set
-  -7		DS-7 compatibility mode (experimental)
-  -d		Delete pictures after successful download
-  -f		Force (overwrite existing files)
-  -p		Assume picture numbers instead of frame numbers
-  -h		Display this help message
-  -v		Version information
-Pictures:
-  all		All pictures
-  last		Last picture
-  4		Only picture 4
-  2-10		Pictures between 2 and 10
-Files:
-  DSCxxxxx.JPG	Files to delete or to upload into the camera
-";
+const char *Usage = 
+"Usage: fujiplay [OPTIONS] PICTURES...          (download)\n"
+"                          charge NUMBER        (recharge the flash)\n"
+"                          shoot                (take picture)\n"
+"                          preview              (preview to standard output)\n"
+"                          upload FILES...\n"
+"                          delete FILES...\n"
+"                          setid STRING         (set camera ID)\n"
+"                          setflash MODE        (0=Off, 1=On, 2=Strobe, 3=Auto)\n"
+"                          setdate gmt|local|YYYYMMDDHHMMSS\n"
+"Options:\n"
+"  -B NUMBER	Set baudrate (115200, 57600, 38400, 19200, 9600 or 0)\n"
+"  -D DEVICE	Select another device file (default is /dev/fujifilm)\n"
+"  -L		List command set\n"
+"  -7		DS-7 compatibility mode (experimental)\n"
+"  -d		Delete pictures after successful download\n"
+"  -f		Force (overwrite existing files)\n"
+"  -p		Assume picture numbers instead of frame numbers\n"
+"  -h		Display this help message\n"
+"  -v		Version information\n"
+"Pictures:\n"
+"  all		All pictures\n"
+"  last		Last picture\n"
+"  4		Only picture 4\n"
+"  2-10		Pictures between 2 and 10\n"
+"Files:\n"
+"  DSCxxxxx.JPG	Files to delete or to upload into the camera\n";
 
 const char *Copyright = "\
@@ -985,5 +984,4 @@ set_date_from_arg:
 	}
 	if (delete_after) {
-		sync();
 		deleted = 0;
 		for (c = pictures; c > 0; c--)
