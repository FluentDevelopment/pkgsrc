$NetBSD: patch-ab,v 1.5 2004/01/16 08:07:54 jklos Exp $

--- src/Makefile.in.orig	Tue Jan  7 01:23:23 2003
+++ src/Makefile.in
@@ -35,6 +35,7 @@
 
 
 SHELL = @SHELL@
+GCC = @GCC@
 
 srcdir = @srcdir@
 top_srcdir = @top_srcdir@
@@ -92,9 +93,14 @@ povray_SOURCES = atmosph.cpp bbox.cpp bc
 DEFS = -DPREFIX=\"$(prefix)\" -DPOV_LIB_DIR=\"@datadir@/povray-3.5\" -DCOMPILER_VER=\".Linux.$(CC)\" -DSYSCONFDIR=\"$(sysconfdir)\" -DUSE_IO_RESTRICTIONS=\"$(ac_use_io_restrictions)\"
 NOMULTICHAR = `if [ "X$(CC)" = "Xgcc" ]; then echo "-Wno-multichar"; fi `
 LDADD = @X_LIBS@
-CFLAGS = -O3 -mcpu=i586 -march=i586 -finline-functions -ffast-math -fomit-frame-pointer -funroll-loops -fexpensive-optimizations -malign-double -foptimize-sibling-calls -minline-all-stringops -Wno-multichar
-CXXFLAGS = $(NOMULTICHAR) -O3 -finline-functions -ffast-math -fomit-frame-pointer -funroll-loops -fexpensive-optimizations -malign-double -foptimize-sibling-calls -minline-all-stringops -Wno-multichar
-LDFLAGS = @X_CFLAGS@
+.ifdef GCC
+CFLAGS = -O3 -finline-functions -ffast-math -fomit-frame-pointer -funroll-loops -fexpensive-optimizations -Wno-multichar
+CXXFLAGS = $(NOMULTICHAR) -O3 -finline-functions -ffast-math -fomit-frame-pointer -funroll-loops -fexpensive-optimizations -Wno-multichar
+.else
+CFLAGS = @CFLAGS@
+CXXFLAGS = @CXXFLAGS@
+.endif
+LDFLAGS = @LDFLAGS@
 EXTRA_DIST = xpovicon.xbm xpovmask.xbm xpovicon.xpm 
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
 CONFIG_HEADER = conf.h
