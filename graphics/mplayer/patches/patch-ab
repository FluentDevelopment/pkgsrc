$NetBSD: patch-ab,v 1.5 2002/05/07 20:26:13 wiz Exp $

--- libdha/mtrr.c.orig	Sun Apr 28 00:42:24 2002
+++ libdha/mtrr.c
@@ -13,11 +13,14 @@
 #include "AsmMacros.h"
 
 #if defined (__i386__) && defined (__NetBSD__)
+#include <sys/param.h>
+#if __NetBSD_Version__ > 105240000
 #include <stdint.h>
 #include <stdlib.h>
 #include <machine/mtrr.h>
 #include <machine/sysarch.h>
 #endif
+#endif
 
 #if defined( __i386__ )
 int	mtrr_set_type(unsigned base,unsigned size,int type)
@@ -47,6 +50,7 @@
     }
     return ENOSYS;
 #elif defined (__NetBSD__)
+#if __NetBSD_Version__ > 105240000
     struct mtrr *mtrrp;
     int n;
 
@@ -64,6 +68,10 @@
     free(mtrrp);
     return 0;
 #else
+    /* NetBSD prior to 1.5Y doesn't have MTRR support */
+    return ENOSYS;
+#endif
+#else
 #warning Please port MTRR stuff!!!
     return ENOSYS;
 #endif
