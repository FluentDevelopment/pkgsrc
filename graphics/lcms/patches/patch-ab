$NetBSD: patch-ab,v 1.3 2002/03/15 09:20:06 agc Exp $

--- source/cmsmtrx.c	Thu May 18 18:08:13 2000
+++ source/cmsmtrx.c	Mon Oct 30 09:53:39 2000
@@ -31,6 +31,7 @@
 // Vector & Matrix stuff
 
 #include "lcms.h"
+#include <sys/types.h>
 
 
 void cdecl VEC3init(LPVEC3 r, double x, double y, double z);
@@ -248,7 +249,12 @@
 // If newest __int64 defined, then use it
 
 #ifdef USE_INT64
-       __int64 l = (__int64) a * b + 0x8000i64;
+#include <sys/param.h>
+#if (defined(BSD) && BSD >= 199506)
+       u_int64_t l = (uint64_t) a * b + (uint64_t)0x8000;
+#else
+       uint64_t l = (uint64_t) a * b + (uint64_t)0x8000;
+#endif
        return (Fixed32) (l >> 16);
 #else
        return DOUBLE_TO_FIXED(FIXED_TO_DOUBLE(a) * FIXED_TO_DOUBLE(b));
