$NetBSD: patch-ae,v 1.6 2005/06/05 15:39:06 minskim Exp $

--- src/glw/Makefile.orig	2004-06-25 17:51:39.000000000 -0500
+++ src/glw/Makefile
@@ -17,7 +17,7 @@ OBJECTS = $(GLW_SOURCES:.c=.o)
 ##### RULES #####
 
 .c.o:
-	$(CC) -c $(INCDIRS) $(CFLAGS) $<
+	${LIBTOOL} --mode=compile $(CC) -c $(INCDIRS) $(CFLAGS) $<
 
 
 
@@ -33,9 +33,10 @@ clean:
 
 # Make the library
 $(LIB_DIR)/$(GLW_LIB_NAME): $(OBJECTS)
-	CC=$(CC) CXX=$(CXX) $(TOP)/bin/mklib -o $(GLW_LIB) -major $(MAJOR) -minor $(MINOR) \
-		-patch $(TINY) $(MKLIB_OPTIONS) -install $(LIB_DIR) \
-		$(GLW_LIB_DEPS) $(OBJECTS)
+	${LIBTOOL} --mode=link ${CC} -o ${GLW_LIB_NAME:.so=.la} ${OBJECTS:.o=.lo} \
+		-rpath ${PREFIX}/lib -version-info ${MAJOR}:${MINOR} \
+		-L${X11BASE}/lib ${GLW_LIB_DEPS:M-l*:S|-lGL|libGL.la}} \
+		-R ${X11BASE}/lib
 
 
 #
