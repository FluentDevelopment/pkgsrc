$NetBSD: patch-ac,v 1.10 2004/11/29 22:11:51 seb Exp $

--- configure.orig	2004-09-14 22:12:44.000000000 +0000
+++ configure
@@ -464,7 +464,7 @@ ac_includes_default="\
 # include <unistd.h>
 #endif"
 
-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os CYGWIN MINGW32 DARWIN INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar BUILDDATE CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE CXX CXXFLAGS ac_ct_CXX CXXDEPMODE am__fastdepCXX_TRUE am__fastdepCXX_FALSE LEX LEXLIB LEX_OUTPUT_ROOT YACC EGREP LN_S ECHO AR ac_ct_AR RANLIB ac_ct_RANLIB CPP CXXCPP F77 FFLAGS ac_ct_F77 LIBTOOL SED SORT KSH TOP_DIR BUILD_DIR ENABLE_DYNAGRAPH_TRUE ENABLE_DYNAGRAPH_FALSE ENABLE_GVRENDER_TRUE ENABLE_GVRENDER_FALSE ENABLE_CODEGENS_TRUE ENABLE_CODEGENS_FALSE TCLSH TCL_INCLUDES HAVE_TCL WITH_TCL_TRUE WITH_TCL_FALSE TCL_PKGINDEX TCL_VERSION TCL_MAJOR_VERSION TCL_MINOR_VERSION TCL_PATCH_LEVEL TCL_CFLAGS TCL_DEFS TCL_SHLIB_SUFFIX TCL_SRC_DIR TCL_STUB_LIB_SPEC WISH TK_INCLUDES HAVE_TK WITH_TK_TRUE WITH_TK_FALSE TK_PKGINDEX TK_VERSION TK_MAJOR_VERSION TK_MINOR_VERSION TK_PATCH_LEVEL TK_DEFS TK_XINCLUDES TK_SRC_DIR TK_CFLAGS TK_STUB_LIB_SPEC MATH_LIBS SOCKET_LIBS X_CFLAGS X_PRE_LIBS X_LIBS X_EXTRA_LIBS WITH_X_TRUE WITH_X_FALSE EXPAT_CONFIG EXPAT_INCLUDES EXPAT_LIBS XPM_INCLUDES XPM_LIBS XAW_INCLUDES XAW_LIBS Z_INCLUDES Z_LIBS GDLIB_CONFIG GD_INCLUDES GD_LIBS WITH_MYLIBGD_TRUE WITH_MYLIBGD_FALSE LIBICONV LTLIBICONV ICONV_INCLUDES ICONV_LIBS FREETYPE_CONFIG FT_INCLUDES FT_LIBS FONTCONFIG_CONFIG FC_INCLUDES FC_LIBS LIBPNG_CONFIG PNG_INCLUDES PNG_LIBS JPEG_INCLUDES JPEG_LIBS PKG_CONFIG LIBSVG_CAIRO_CFLAGS LIBSVG_CAIRO_LIBS ALLOCA LIBOBJS TCLINT_INCLUDES TKINT_INCLUDES LTLIBOBJS'
+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os CYGWIN MINGW32 DARWIN INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar BUILDDATE CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE CXX CXXFLAGS ac_ct_CXX CXXDEPMODE am__fastdepCXX_TRUE am__fastdepCXX_FALSE LEX LEXLIB LEX_OUTPUT_ROOT YACC EGREP LN_S ECHO AR ac_ct_AR RANLIB ac_ct_RANLIB CPP CXXCPP F77 FFLAGS ac_ct_F77 LIBTOOL SED SORT KSH TOP_DIR BUILD_DIR ENABLE_DYNAGRAPH_TRUE ENABLE_DYNAGRAPH_FALSE ENABLE_GVRENDER_TRUE ENABLE_GVRENDER_FALSE ENABLE_CODEGENS_TRUE ENABLE_CODEGENS_FALSE TCL_INCLUDES HAVE_TCL WITH_TCL_TRUE WITH_TCL_FALSE TCL_PKGINDEX TCL_VERSION TCL_MAJOR_VERSION TCL_MINOR_VERSION TCL_PATCH_LEVEL TCL_CFLAGS TCL_DEFS TCL_SHLIB_SUFFIX TCL_SRC_DIR TCL_STUB_LIB_SPEC TK_INCLUDES HAVE_TK WITH_TK_TRUE WITH_TK_FALSE TK_PKGINDEX TK_VERSION TK_MAJOR_VERSION TK_MINOR_VERSION TK_PATCH_LEVEL TK_DEFS TK_XINCLUDES TK_SRC_DIR TK_CFLAGS TK_STUB_LIB_SPEC MATH_LIBS SOCKET_LIBS X_CFLAGS X_PRE_LIBS X_LIBS X_EXTRA_LIBS WITH_X_TRUE WITH_X_FALSE EXPAT_CONFIG EXPAT_INCLUDES EXPAT_LIBS XPM_INCLUDES XPM_LIBS XAW_INCLUDES XAW_LIBS Z_INCLUDES Z_LIBS GDLIB_CONFIG GD_INCLUDES GD_LIBS WITH_MYLIBGD_TRUE WITH_MYLIBGD_FALSE LIBICONV LTLIBICONV ICONV_INCLUDES ICONV_LIBS FREETYPE_CONFIG FT_INCLUDES FT_LIBS FONTCONFIG_CONFIG FC_INCLUDES FC_LIBS LIBPNG_CONFIG PNG_INCLUDES PNG_LIBS JPEG_INCLUDES JPEG_LIBS PKG_CONFIG LIBSVG_CAIRO_CFLAGS LIBSVG_CAIRO_LIBS ALLOCA LIBOBJS TCLINT_INCLUDES TKINT_INCLUDES LTLIBOBJS'
 ac_subst_files=''
 
 # Initialize some variables set by options.
@@ -1054,8 +1054,6 @@ Optional Packages:
   --with-tags[=TAGS]
                           include additional configurations [automatic]
   --with-efence           use efence for debugging memory use
-  --with-tclsh=PROG       build graphviz for specific tclsh
-  --with-wish=PROG        build graphviz for specific wish
   --with-extraincludedir=DIR use extra includes from DIR
   --with-extralibdir=DIR  use extra libraries from DIR
   --with-x                use the X Window System
@@ -1676,7 +1674,10 @@ case "${target_os}" in
 	PATHSEPARATOR=":"
 	;;
   * ) # This sucks!  Whatever happened to standards for file system layout?
-	DEFAULT_FONTPATH="/usr/X11R6/lib/X11/fonts/TrueType:/usr/X11R6/lib/X11/fonts/truetype:/usr/X11R6/lib/X11/fonts/TTF:/usr/share/fonts/TrueType:/usr/share/fonts/truetype:/usr/openwin/lib/X11/fonts/TrueType:/usr/X11R6/lib/X11/fonts/Type1:/usr/common/share/fonts/ttf";
+	DEFAULT_FONTPATH="${X11PREFIX}/lib/X11/fonts/TrueType:${X11PREFIX}/lib/X11/fonts/truetype:${X11PREFIX}/lib/X11/fonts/TTF:/usr/share/fonts/TrueType:/usr/share/fonts/truetype:/usr/openwin/lib/X11/fonts/TrueType:/usr/X11R6/lib/X11/fonts/Type1:/usr/common/share/fonts/ttf";
+	if test x"$X11PREFIX" != x"$X11BASE"; then
+		DEFAULT_FONTPATH="${DEFAULT_FONTPATH}:${X11BASE}/lib/X11/fonts/TrueType:${X11BASE}/lib/X11/fonts/truetype:${X11BASE}/lib/X11/fonts/TTF:${X11BASE}/lib/X11/fonts/Type1"
+	fi
 	PATHSEPARATOR=":"
 	;;
 esac
@@ -20354,165 +20355,9 @@ fi
 # start by assuming we have it
 HAVE_TCL=1
 
+. ${TCLCONFIG}
+TCL_INCLUDES=${TCL_INCLUDE_SPEC}
 
-# Check whether --with-tclsh or --without-tclsh was given.
-if test "${with_tclsh+set}" = set; then
-  withval="$with_tclsh"
-  TCLSH=$withval
-fi;
-
-if test "x$TCLSH" = "x"; then
-    # Extract the first word of "tclsh8.4", so it can be a program name with args.
-set dummy tclsh8.4; ac_word=$2
-echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
-if test "${ac_cv_path_TCLSH+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  case $TCLSH in
-  [\\/]* | ?:[\\/]*)
-  ac_cv_path_TCLSH="$TCLSH" # Let the user override the test with a path.
-  ;;
-  *)
-  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_path_TCLSH="$as_dir/$ac_word$ac_exec_ext"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
-done
-
-  ;;
-esac
-fi
-TCLSH=$ac_cv_path_TCLSH
-
-if test -n "$TCLSH"; then
-  echo "$as_me:$LINENO: result: $TCLSH" >&5
-echo "${ECHO_T}$TCLSH" >&6
-else
-  echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6
-fi
-
-    if test "x$TCLSH" = "x"; then
-        # Extract the first word of "tclsh8.3", so it can be a program name with args.
-set dummy tclsh8.3; ac_word=$2
-echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
-if test "${ac_cv_path_TCLSH+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  case $TCLSH in
-  [\\/]* | ?:[\\/]*)
-  ac_cv_path_TCLSH="$TCLSH" # Let the user override the test with a path.
-  ;;
-  *)
-  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_path_TCLSH="$as_dir/$ac_word$ac_exec_ext"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
-done
-
-  ;;
-esac
-fi
-TCLSH=$ac_cv_path_TCLSH
-
-if test -n "$TCLSH"; then
-  echo "$as_me:$LINENO: result: $TCLSH" >&5
-echo "${ECHO_T}$TCLSH" >&6
-else
-  echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6
-fi
-
-        if test "x$TCLSH" = "x"; then
-            # Extract the first word of "tclsh", so it can be a program name with args.
-set dummy tclsh; ac_word=$2
-echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
-if test "${ac_cv_path_TCLSH+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  case $TCLSH in
-  [\\/]* | ?:[\\/]*)
-  ac_cv_path_TCLSH="$TCLSH" # Let the user override the test with a path.
-  ;;
-  *)
-  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_path_TCLSH="$as_dir/$ac_word$ac_exec_ext"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
-done
-
-  ;;
-esac
-fi
-TCLSH=$ac_cv_path_TCLSH
-
-if test -n "$TCLSH"; then
-  echo "$as_me:$LINENO: result: $TCLSH" >&5
-echo "${ECHO_T}$TCLSH" >&6
-else
-  echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6
-fi
-
-        fi
-    fi
-fi
-
-if test "x$TCLSH" = "x"; then
-    { echo "$as_me:$LINENO: WARNING: Unable to find a tclsh. The Tcl packages will not be built" >&5
-echo "$as_me: WARNING: Unable to find a tclsh. The Tcl packages will not be built" >&2;}
-    HAVE_TCL=0
-fi
-
-if test "$HAVE_TCL" = "1"; then
-    TCL_VERSION_FOUND=`echo 'puts [info tclversion]' | $TCLSH`
-
-    # can't assume ksh on all architectures
-    # TCLSH_EXEC_PREFIX=${TCLSH%%/bin/tclsh.*}
-    # so use sed instead
-    TCLSH_EXEC_PREFIX=`echo $TCLSH|sed -e 's%/bin/tclsh.*$%%'`
-
-    if test -f ${TCLSH_EXEC_PREFIX}/include/tcl${TCL_VERSION_FOUND}/tcl.h; then
-        TCL_INCLUDES="-I${TCLSH_EXEC_PREFIX}/include/tcl${TCL_VERSION_FOUND} -I${TCLSH_EXEC_PREFIX}/include/tcl${TCL_VERSION_FOUND}/generic"
-    else
-        if test "x${TCLSH_EXEC_PREFIX}" != "x/usr" -a -f ${TCLSH_EXEC_PREFIX}/include/tcl.h; then
-            TCL_INCLUDES=-I${TCLSH_EXEC_PREFIX}/include
-        fi
-    fi
-    if test "x$TCL_INCLUDES" != "x" ; then
-        echo "$as_me:$LINENO: result: using tcl headers from $TCL_INCLUDES" >&5
-echo "${ECHO_T}using tcl headers from $TCL_INCLUDES" >&6
-    fi
-
-    save_CPPFLAGS=$CPPFLAGS
-    CPPFLAGS="$CPPFLAGS $TCL_INCLUDES"
     if test "${ac_cv_header_tcl_h+set}" = set; then
   echo "$as_me:$LINENO: checking for tcl.h" >&5
 echo $ECHO_N "checking for tcl.h... $ECHO_C" >&6
@@ -20660,30 +20505,6 @@ echo "$as_me: WARNING: Unable to find he
 fi
 
 
-    CPPFLAGS=$save_CPPFLAGS
-fi
-
-if test "$HAVE_TCL" = "1"; then
-    # Some systems don't have Tcl.  Don't build
-    # the Tcl products if we don't have the library.
-    if test -f ${TCLSH_EXEC_PREFIX}/lib/tcl${TCL_VERSION_FOUND}/tclConfig.sh; then
-        TCLCONFIG=${TCLSH_EXEC_PREFIX}/lib/tcl${TCL_VERSION_FOUND}/tclConfig.sh
-    else
-        if test -f ${TCLSH_EXEC_PREFIX}/lib/tclConfig.sh; then
-            TCLCONFIG=${TCLSH_EXEC_PREFIX}/lib/tclConfig.sh
-        fi
-    fi
-    if test "x$TCLCONFIG" != "x"; then
-        echo "$as_me:$LINENO: result: using $TCLCONFIG" >&5
-echo "${ECHO_T}using $TCLCONFIG" >&6
-        file=${TCLCONFIG}
-            . $file
-    else
-        { echo "$as_me:$LINENO: WARNING: Unable to find tclConfig.sh. The Tcl packages will not be built" >&5
-echo "$as_me: WARNING: Unable to find tclConfig.sh. The Tcl packages will not be built" >&2;}
-        HAVE_TCL=0
-    fi
-fi
 
 if test "$HAVE_TCL" = "1"; then
     # TCL STUBS support is required
@@ -20775,169 +20596,9 @@ echo "$as_me: WARNING: No Tcl. The Tk pa
 fi
 
 HAVE_TK=$HAVE_TCL
+. ${TKCONFIG}
+TK_INCLUDES="-I${TK_PREFIX}/include"
 
-if test "$HAVE_TK" = "1"; then
-
-# Check whether --with-wish or --without-wish was given.
-if test "${with_wish+set}" = set; then
-  withval="$with_wish"
-  WISH=$withval
-fi;
-    if test "x$WISH" = "x"; then
-        # Extract the first word of "wish8.4", so it can be a program name with args.
-set dummy wish8.4; ac_word=$2
-echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
-if test "${ac_cv_path_WISH+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  case $WISH in
-  [\\/]* | ?:[\\/]*)
-  ac_cv_path_WISH="$WISH" # Let the user override the test with a path.
-  ;;
-  *)
-  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_path_WISH="$as_dir/$ac_word$ac_exec_ext"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
-done
-
-  ;;
-esac
-fi
-WISH=$ac_cv_path_WISH
-
-if test -n "$WISH"; then
-  echo "$as_me:$LINENO: result: $WISH" >&5
-echo "${ECHO_T}$WISH" >&6
-else
-  echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6
-fi
-
-        if test "x$WISH" = "x"; then
-    	    # Extract the first word of "wish8.3", so it can be a program name with args.
-set dummy wish8.3; ac_word=$2
-echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
-if test "${ac_cv_path_WISH+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  case $WISH in
-  [\\/]* | ?:[\\/]*)
-  ac_cv_path_WISH="$WISH" # Let the user override the test with a path.
-  ;;
-  *)
-  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_path_WISH="$as_dir/$ac_word$ac_exec_ext"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
-done
-
-  ;;
-esac
-fi
-WISH=$ac_cv_path_WISH
-
-if test -n "$WISH"; then
-  echo "$as_me:$LINENO: result: $WISH" >&5
-echo "${ECHO_T}$WISH" >&6
-else
-  echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6
-fi
-
-    	    if test "x$WISH" = "x"; then
-                # Extract the first word of "wish", so it can be a program name with args.
-set dummy wish; ac_word=$2
-echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
-if test "${ac_cv_path_WISH+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  case $WISH in
-  [\\/]* | ?:[\\/]*)
-  ac_cv_path_WISH="$WISH" # Let the user override the test with a path.
-  ;;
-  *)
-  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_path_WISH="$as_dir/$ac_word$ac_exec_ext"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
-done
-
-  ;;
-esac
-fi
-WISH=$ac_cv_path_WISH
-
-if test -n "$WISH"; then
-  echo "$as_me:$LINENO: result: $WISH" >&5
-echo "${ECHO_T}$WISH" >&6
-else
-  echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6
-fi
-
-            fi
-        fi
-    fi
-    if test "x$WISH" = "x"; then
-        { echo "$as_me:$LINENO: WARNING: Unable to find a wish. The Tk packages will not be built" >&5
-echo "$as_me: WARNING: Unable to find a wish. The Tk packages will not be built" >&2;}
-        HAVE_TK=0
-    fi
-fi
-
-if test "$HAVE_TK" = "1"; then
-    #TK_VERSION_FOUND=`echo 'puts [[info tkversion]]' | $WISH`
-    #
-    # No such var as tkversion.  Use tclversion instead.
-    TK_VERSION_FOUND=${TCL_VERSION_FOUND}
-
-    # can't assume ksh on all architectures
-    # WISH_EXEC_PREFIX=${WISH%%/bin/tclsh.*}
-    # so use sed instead
-    WISH_EXEC_PREFIX=`echo $WISH|sed -e 's%/bin/wish.*$%%'`
-
-    if test -f ${WISH_EXEC_PREFIX}/include/tk${TK_VERSION_FOUND}/tk.h; then
-	TK_INCLUDES="-I${WISH_EXEC_PREFIX}/include/tk${TK_VERSION_FOUND} -I${WISH_EXEC_PREFIX}/include/tk${TK_VERSION_FOUND}/generic"
-    else
-        if test "x${WISH_EXEC_PREFIX}" != "x/usr" -a -f ${WISH_EXEC_PREFIX}/include/tk.h; then
-	    TK_INCLUDES=-I${WISH_EXEC_PREFIX}/include
-        fi
-    fi
-    if test "x$TK_INCLUDES" != "x" ; then
-	echo "$as_me:$LINENO: result: using tk headers from $TK_INCLUDES" >&5
-echo "${ECHO_T}using tk headers from $TK_INCLUDES" >&6
-    fi
-
-    save_CPPFLAGS=$CPPFLAGS
-    CPPFLAGS="$CPPFLAGS $TCL_INCLUDES $TK_INCLUDES"
     if test "${ac_cv_header_tk_h+set}" = set; then
   echo "$as_me:$LINENO: checking for tk.h" >&5
 echo $ECHO_N "checking for tk.h... $ECHO_C" >&6
@@ -21085,31 +20746,6 @@ echo "$as_me: WARNING: Unable to find he
 fi
 
 
-    CPPFLAGS=$save_CPPFLAGS
-fi
-
-if test "$HAVE_TK" = "1"; then
-    # Some systems don't have Tcl.  Don't build
-    # Some systems have Tcl, but not TK.  Don't build
-    # the Tk products if we don't have the library.
-    if test -f ${WISH_EXEC_PREFIX}/lib/tk${TK_VERSION_FOUND}/tkConfig.sh; then
-        TKCONFIG=${WISH_EXEC_PREFIX}/lib/tk${TK_VERSION_FOUND}/tkConfig.sh
-    else
-        if test -f ${WISH_EXEC_PREFIX}/lib/tkConfig.sh; then
-	    TKCONFIG=${WISH_EXEC_PREFIX}/lib/tkConfig.sh
-        fi
-    fi
-    if test "x$TKCONFIG" != "x"; then
-        echo "$as_me:$LINENO: result: using $TKCONFIG" >&5
-echo "${ECHO_T}using $TKCONFIG" >&6
-        file=${TKCONFIG}
-        . $file
-    else
-        { echo "$as_me:$LINENO: WARNING: Unable to find tkConfig.sh. The Tk packages will not be built" >&5
-echo "$as_me: WARNING: Unable to find tkConfig.sh. The Tk packages will not be built" >&2;}
-        HAVE_TK=0
-    fi
-fi
 
 #if test "$HAVE_TK" = "1"; then
 #    # TK STUBS support is required (but support is indicated by TCL_SUPPORTS_STUBS)
@@ -27946,36 +27582,12 @@ rm -f conftest.err conftest.$ac_objext c
 
 # -----------------------------------
 # tclInt.h
-if test -f "$TCL_SRC_DIR/generic/tclInt.h"; then
-TCLINT_INCLUDES="-I$TCL_SRC_DIR/generic"
-else
-if test -f "/usr/include/tclInt.h"; then
-TCLINT_INCLUDES=""
-else
-if test -f "/usr/local/include/tclInt.h"; then
-TCLINT_INCLUDES="-I/usr/local/include"
-else
-TCLINT_INCLUDES="-I$TOP_DIR/tclstubs"
-fi
-fi
-fi
+TCLINT_INCLUDES="-I${TCL_PREFIX}/include/tcl/generic"
 
 
 # -----------------------------------
 # tkInt.h
-if test -f "$TK_SRC_DIR/generic/tkInt.h"; then
-TKINT_INCLUDES="-I$TK_SRC_DIR/generic"
-else
-if test -f "/usr/include/tkInt.h"; then
-TKINT_INCLUDES=""
-else
-if test -f "/usr/local/include/tkInt.h"; then
-TKINT_INCLUDES="-I/usr/local/include"
-else
-TKINT_INCLUDES="-I$TOP_DIR/tkstubs"
-fi
-fi
-fi
+TKINT_INCLUDES="-I${TK_PREFIX}/include/tk/generic"
 
 
 # -----------------------------------
@@ -29395,7 +29007,6 @@ s,@ENABLE_GVRENDER_TRUE@,$ENABLE_GVRENDE
 s,@ENABLE_GVRENDER_FALSE@,$ENABLE_GVRENDER_FALSE,;t t
 s,@ENABLE_CODEGENS_TRUE@,$ENABLE_CODEGENS_TRUE,;t t
 s,@ENABLE_CODEGENS_FALSE@,$ENABLE_CODEGENS_FALSE,;t t
-s,@TCLSH@,$TCLSH,;t t
 s,@TCL_INCLUDES@,$TCL_INCLUDES,;t t
 s,@HAVE_TCL@,$HAVE_TCL,;t t
 s,@WITH_TCL_TRUE@,$WITH_TCL_TRUE,;t t
@@ -29410,7 +29021,6 @@ s,@TCL_DEFS@,$TCL_DEFS,;t t
 s,@TCL_SHLIB_SUFFIX@,$TCL_SHLIB_SUFFIX,;t t
 s,@TCL_SRC_DIR@,$TCL_SRC_DIR,;t t
 s,@TCL_STUB_LIB_SPEC@,$TCL_STUB_LIB_SPEC,;t t
-s,@WISH@,$WISH,;t t
 s,@TK_INCLUDES@,$TK_INCLUDES,;t t
 s,@HAVE_TK@,$HAVE_TK,;t t
 s,@WITH_TK_TRUE@,$WITH_TK_TRUE,;t t
