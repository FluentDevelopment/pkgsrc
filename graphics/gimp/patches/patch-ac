$NetBSD: patch-ac,v 1.10 2004/05/03 06:45:28 adam Exp $

--- configure.orig	Sun May  2 21:28:07 2004
+++ configure
@@ -27221,8 +27221,16 @@ if test "x$enable_altivec" = xyes; then
   echo "$as_me:$LINENO: checking whether we can compile Altivec code" >&5
 echo $ECHO_N "checking whether we can compile Altivec code... $ECHO_C" >&6
 
+  gimp_save_CFLAGS=$CFLAGS
+  case `uname` in
+    Darwin)
+      CFLAGS="$CFLAGS -faltivec"
+      ;;
+    *)
+      ;;
+  esac
   cat >conftest.$ac_ext <<_ACEOF
-asm ("vand %v0, %v0, %v0");
+asm ("vand v0, v0, v0");
 _ACEOF
 rm -f conftest.$ac_objext
 if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
@@ -27262,7 +27270,7 @@ enable_altivec=no
 echo "${ECHO_T}no" >&6
     { echo "$as_me:$LINENO: WARNING: The assembler does not support the Altivec command set." >&5
 echo "$as_me: WARNING: The assembler does not support the Altivec command set." >&2;}
-
+    CFLAGS=$gimp_save_CFLAGS
 fi
 rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
 
