$NetBSD: patch-ad,v 1.4 2006/06/27 12:27:06 joerg Exp $

--- sanei/sanei_usb.c.orig	2006-06-20 02:00:41.000000000 -0700
+++ sanei/sanei_usb.c
@@ -91,6 +91,10 @@ struct usb_descriptor_header *GetNextDes
 #include <dev/usb/usb.h>
 #endif /* __FreeBSD__ */
 
+#if defined(__DragonFly__)
+#include <bus/usb/usb.h>
+#endif
+
 #define BACKEND_NAME	sanei_usb
 #include "../include/sane/sane.h"
 #include "../include/sane/sanei_debug.h"
@@ -249,7 +253,7 @@ kernel_get_vendor_product (int fd, const
     *vendorID = vendor;
     *productID = product;
   }
-#elif defined (__FreeBSD__)
+#elif defined (__FreeBSD__) || defined(__DragonFly__)
   {
     int controller;
     int ctrl_fd;
@@ -301,7 +305,7 @@ sanei_usb_init (void)
 #if defined(__linux__)
     "/dev/", "usbscanner",
     "/dev/usb/", "scanner",
-#elif defined(__FreeBSD__) || defined(__NetBSD__) || defined (__OpenBSD__)
+#elif defined(__FreeBSD__) || defined(__NetBSD__) || defined (__OpenBSD__) || defined(__DragonFly__)
     "/dev/", "uscanner",
 #elif defined(__BEOS__)
     "/dev/scanner/usb/", "",
