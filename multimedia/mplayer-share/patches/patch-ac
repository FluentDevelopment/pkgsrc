$NetBSD: patch-ac,v 1.1 2004/03/31 13:23:27 wiz Exp $

--- libmpdemux/http.c.orig	Wed Nov 13 10:02:55 2002
+++ libmpdemux/http.c
@@ -175,7 +175,7 @@ http_build_request( HTTP_header_t *http_
 	if( http_hdr->method==NULL ) http_set_method( http_hdr, "GET");
 	if( http_hdr->uri==NULL ) http_set_uri( http_hdr, "/");
 	else {
-		uri = (char*)malloc(strlen(http_hdr->uri)*2);
+		uri = (char*)malloc((strlen(http_hdr->uri)*3) + 1);
 		if( uri==NULL ) {
 			mp_msg(MSGT_NETWORK,MSGL_ERR,"Memory allocation failed\n");
 			return NULL;
