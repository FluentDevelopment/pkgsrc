$NetBSD: patch-aa,v 1.6 2005/03/24 22:41:58 markd Exp $

--- configure.orig	2005-03-05 01:31:57.000000000 +1300
+++ configure
@@ -35079,7 +35079,7 @@ if test "${ac_cv_lib_FLAC_FLAC__seekable
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lFLAC  $LIBS"
+LIBS="-lFLAC -lm $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -39778,7 +39780,7 @@ echo "${ECHO_T}incs=$para_incdir libs=$p
 echo "${ECHO_T}$with_cdparanoia" >&6
     CDPARANOIA_ROOT="$with_cdparanoia"
     if test "x$CDPARANOIA_ROOT" != "x/usr" ; then
-      CDPARANOIA_INCS="-I${CDPARANOIA_ROOT}/include"
+      CDPARANOIA_INCS="-I${CDPARANOIA_ROOT}/include/cdparanoia"
       CDPARANOIA_LIBS="-L${CDPARANOIA_ROOT}/lib "
       if test "$USE_RPATH" = "yes" ; then
         CDPARANOIA_RPATH="-R ${CDPARANOIA_ROOT}/lib"
@@ -40333,7 +40335,7 @@ fi
 echo "$as_me:$LINENO: result: $ac_cv_lib_ossaudio_main" >&5
 echo "${ECHO_T}$ac_cv_lib_ossaudio_main" >&6
 if test $ac_cv_lib_ossaudio_main = yes; then
-  LIBOSSAUDIO="-lossaudio"
+  LIBOSSAUDIO="${LIBOSSAUDIO}"
 fi
 
 
@@ -42057,8 +42059,23 @@ if { (eval echo "$as_me:$LINENO: \"$ac_c
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
 
-                x11_dga2=yes
-
+ 	lib=Xxf86dga
+ 	shared_lib_found=no
+ 	for i in ${LDFLAGS}; do
+ 		case "$i" in
+ 		-L*)
+ 			dir=`echo $i | sed "s,^-L,,"`
+ 			if [ -e $dir/lib${lib}.so ] ||
+ 			   [ "`echo $dir/lib${lib}.so.*`" != "$dir/lib${lib}.so.*" ]; then
+ 				shared_lib_found=yes
+ 				break;
+ 			fi
+ 		esac
+ 	done
+ 	if [ "$shared_lib_found" = "yes" ]; then
+ 		x11_dga2=yes
+ 	fi
+   
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
@@ -42121,7 +42138,22 @@ if { (eval echo "$as_me:$LINENO: \"$ac_c
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
 
+       lib=Xv
+       shared_lib_found=no
+      for i in ${LDFLAGS}; do
+                case "$i" in
+               -L*)
+                       dir=`echo $i | sed "s,^-L,,"`
+                       if [ -e $dir/lib${lib}.so ] ||
+                          [ "`echo $dir/lib${lib}.so.*`" != "$dir/lib${lib}.so.*" ]; then
+                               shared_lib_found=yes
+                               break;
+                       fi
+               esac
+        done
+       if [ "$shared_lib_found" = "yes" ]; then
                 x11_xv=yes
+       fi
 
 else
   echo "$as_me: failed program was:" >&5
@@ -42185,7 +42217,22 @@ if { (eval echo "$as_me:$LINENO: \"$ac_c
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
 
+       lib=Xxf86vm
+       shared_lib_found=no
+       for i in ${LDFLAGS}; do
+                case "$i" in
+               -L*)
+                       dir=`echo $i | sed "s,^-L,,"`
+                       if [ -e $dir/lib${lib}.so ] ||
+                          [ "`echo $dir/lib${lib}.so.*`" != "$dir/lib${lib}.so.*" ]; then
+                               shared_lib_found=yes
+                               break;
+                       fi
+               esac
+       done
+       if [ "$shared_lib_found" = "yes" ]; then
                 x11_xvidmode=yes
+       fi
 
 else
   echo "$as_me: failed program was:" >&5
@@ -42231,8 +42278,8 @@ cat >>conftest.$ac_ext <<_ACEOF
 		#include <sys/types.h>
 		typedef int16_t size16;
 		typedef int32_t size32;
-                #include <cdda_interface.h>
-                #include <cdda_paranoia.h>
+                #include <cdparanoia/cdda_interface.h>
+                #include <cdparanoia/cdda_paranoia.h>
 
 int
 main ()
@@ -42283,7 +42330,7 @@ if test "${ac_cv_lib_cdda_paranoia_paran
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lcdda_paranoia -lcdda_paranoia -lcdda_interface $LIBS"
+LIBS="-lcdda_paranoia -lm -lcdda_interface $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -42817,10 +42864,10 @@ _ACEOF
     ;;
 
   NetBSD)
-    echo "$as_me:$LINENO: result: NetBSD :Unknown hardware. You will have problems!!" >&5
-echo "${ECHO_T}NetBSD :Unknown hardware. You will have problems!!" >&6
-    OS_TYPE="BSD"
-
+     echo "$as_me:$LINENO: result: using -lpthread" >&5
+     echo $ECHO_N "using -lpthread... $ECHO_C" >&6
+     OS_TYPE="BSD"
+     LIBPTHREAD="-lpthread"
 cat >>confdefs.h <<\_ACEOF
 #define OS_BSD 1
 _ACEOF
