$NetBSD: patch-ag,v 1.4 2004/06/21 15:55:55 drochner Exp $

--- configure.ac.orig	2004-06-21 01:39:04.000000000 +0200
+++ configure.ac
@@ -351,6 +351,9 @@ AC_CHECK_LIB(socket, socket, NET_LIBS="-
 AC_CHECK_LIB(nsl, gethostbyname, NET_LIBS="-lnsl $NET_LIBS",)
 AC_SUBST(NET_LIBS)
 
+WINE_LIBS=""
+AC_CHECK_LIB(i386, i386_set_ldt, WINE_LIBS="-li386 $WINE_LIBS",)
+AC_SUBST(WINE_LIBS)
 
 dnl ---------------------------------------------
 dnl IPv6
@@ -398,7 +401,7 @@ case "$host" in
 	AC_CHECK_LIB(GL, glBegin,
 		[AC_CHECK_HEADER(GL/gl.h,
 		     [ ac_have_opengl="yes"
-		       OPENGL_LIBS="-lGL" 
+		       OPENGL_LIBS="-lGL -lm" 
 		       AC_CHECK_LIB(glut, glutInit, dnl check for glut
 				    [ ac_have_glut="yes"
 				      GLUT_LIBS="-lglut"
@@ -416,7 +419,7 @@ case "$host" in
 		     ],
 		[])],
 	   [],
-	   [$X_LIBS $X_PRE_LIBS -lGL $X_EXTRA_LIBS])
+	   [$X_LIBS $X_PRE_LIBS -lGL -lm $X_EXTRA_LIBS])
 	;;
 esac
 
@@ -596,8 +599,7 @@ dnl Checks for Xinerama extension
 dnl ---------------------------------------------
 
 AC_CHECK_LIB(Xinerama, XineramaQueryExtension, 
-             [X_LIBS="$X_LIBS -lXinerama"
-              AC_DEFINE(HAVE_XINERAMA,1,[Define this if you have libXinerama installed])
+             [AC_DEFINE(HAVE_XINERAMA,1,[Define this if you have libXinerama installed])
               ac_have_xinerama="yes"],,
              [$X_LIBS $X_PRE_LIBS -lXext $X_EXTRA_LIBS])
 dnl AM_CONDITIONAL(HAVE_XINERAMA, test x$ac_have_xinerama = "xyes")
@@ -1031,9 +1033,10 @@ dnl ------------------------------------
 dnl gnome-vfs support
 dnl ---------------------------------------------
 
-PKG_CHECK_MODULES(GNOME_VFS, gnome-vfs-2.0,
-                no_gnome_vfs=no,
-		no_gnome_vfs=yes)
+dnl PKG_CHECK_MODULES(GNOME_VFS, gnome-vfs-2.0,
+dnl                 no_gnome_vfs=no,
+dnl 		no_gnome_vfs=yes)
+no_gnome_vfs=yes
 AC_SUBST(GNOME_VFS_CFLAGS)
 AC_SUBST(GNOME_VFS_LIBS)
 if test x"$no_gnome_vfs" != "xyes"; then
