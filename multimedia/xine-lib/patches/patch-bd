$NetBSD: patch-bd,v 1.1 2004/12/23 03:05:53 xtraeme Exp $

--- src/audio_out/audio_oss_out.c.orig	2004-12-23 01:13:26.000000000 +0100
+++ src/audio_out/audio_oss_out.c	2004-12-23 01:15:23.000000000 +0100
@@ -419,6 +419,7 @@
     }
     this->last_getoptr = info.bytes;
     break;
+#ifndef __NetBSD__
   case OSS_SYNC_GETODELAY:
     if (ioctl (this->audio_fd, SNDCTL_DSP_GETODELAY, &bytes_left)) {
       perror ("audio_oss_out: DSP_GETODELAY ioctl():");
@@ -429,6 +430,7 @@
     lprintf ("%d bytes left\n", bytes_left);
 
     break;
+#endif
   }
 
   return bytes_left / this->bytes_per_frame;
@@ -833,10 +835,13 @@
      * check if SNDCTL_DSP_GETODELAY works. if so, using it is preferred.
      */
 
+#ifndef __NetBSD__
     if (ioctl(audio_fd, SNDCTL_DSP_GETODELAY, &info) != -1) {
       xprintf(class->xine, XINE_VERBOSITY_DEBUG, "audio_oss_out: using SNDCTL_DSP_GETODELAY\n");
       this->sync_method = OSS_SYNC_GETODELAY;
-    } else if (ioctl(audio_fd, SNDCTL_DSP_GETOPTR, &info) != -1) {
+    }
+#endif
+    if (ioctl(audio_fd, SNDCTL_DSP_GETOPTR, &info) != -1) {
       xprintf(class->xine, XINE_VERBOSITY_DEBUG, "audio_oss_out: using SNDCTL_DSP_GETOPTR\n");
       this->sync_method = OSS_SYNC_GETOPTR;
     } else {
