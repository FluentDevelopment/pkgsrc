$NetBSD: patch-az,v 1.1 2006/06/30 13:51:40 tron Exp $

--- src/input/input_http.c	2006-06-30 14:18:35.000000000 +0100
+++ src/input/input_http.c.orig	2005-07-17 22:49:59.000000000 +0100
@@ -765,7 +765,8 @@
        printf ("input_http: read...\n");
     */
 
-    if (_x_io_tcp_read (this->stream, this->fh, &this->buf[len], 1) <= 0) {
+    if (len == sizeof(this->buf) ||
+        _x_io_tcp_read (this->stream, this->fh, &this->buf[len], 1) <= 0) {
       return 0;
     }
 
