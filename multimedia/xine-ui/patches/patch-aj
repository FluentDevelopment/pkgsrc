$NetBSD: patch-aj,v 1.2 2005/02/22 00:44:20 wiz Exp $

--- src/xitk/actions.c.orig	2004-07-02 23:40:53.000000000 +0200
+++ src/xitk/actions.c
@@ -1069,6 +1069,11 @@ static void *_gui_set_current_position(v
   
   pthread_detach(pthread_self());
 
+  if (pthread_mutex_trylock(&gGui->xe_mutex)) {
+	pthread_exit(NULL);
+	return NULL;
+  }
+
   if(gGui->logo_mode && (mediamark_get_current_mrl())) {
     if(!xine_open(gGui->stream, (mediamark_get_current_mrl()))) {
       gui_handle_xine_error(gGui->stream, (char *)(mediamark_get_current_mrl()));
@@ -1200,8 +1205,6 @@ void gui_set_current_position (int pos) 
 
   if(gGui->new_pos == -1) {
     
-    pthread_mutex_lock(&gGui->xe_mutex);
-
     pthread_mutex_lock(&new_pos_mutex);
     gGui->new_pos = pos;
     pthread_mutex_unlock(&new_pos_mutex);
