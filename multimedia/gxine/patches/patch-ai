$NetBSD: patch-ai,v 1.3 2006/05/03 12:47:47 drochner Exp $

--- src/key_events.c.orig	2006-03-07 22:26:26.000000000 +0100
+++ src/key_events.c
@@ -660,8 +660,8 @@ void kb_edit_show (void) {
 
 static void do_edit_binding (void)
 {
-  editkey = *lookup_binding (&catch_key_iter);
   char *title;
+  editkey = *lookup_binding (&catch_key_iter);
 
   gtk_entry_set_text (GTK_ENTRY (kb_binding_desc), editkey.desc);
   gtk_text_buffer_set_text (kb_binding_command_buf, editkey.cmd, -1);
@@ -990,9 +990,7 @@ static JSBool js_keypad_show (JSContext 
 
 /* Xine event mapping data */
 
-static const kb_xine_event_map_t xine_input = {
-  "INPUT",
-  {
+static const kb_xine_event_id_t xine_input_ids[] = {
     { "ANGLE_NEXT", XINE_EVENT_INPUT_ANGLE_NEXT },
     { "ANGLE_PREVIOUS", XINE_EVENT_INPUT_ANGLE_PREVIOUS },
     { "DOWN", XINE_EVENT_INPUT_DOWN },
@@ -1033,7 +1031,10 @@ static const kb_xine_event_map_t xine_in
     { "9", XINE_EVENT_INPUT_NUMBER_9 },
     { "-", -1 }, /* null event */
     { "" }
-  }
+};
+
+static const kb_xine_event_map_t xine_input = {
+  "INPUT", &xine_input_ids
 };
 
 
@@ -1080,9 +1081,7 @@ static void kb_xine_event_help (se_t *se
 
 
 
-static const kb_xine_event_map_t xine_vdr = {
-  "VDR",
-  {
+static const kb_xine_event_id_t xine_vdr_ids[] = {
     { "AUDIO", XINE_EVENT_VDR_MUTE + 1 /* ..._VDR_AUDIO */ },
     { "BACK", XINE_EVENT_VDR_BACK },
     { "BLUE", XINE_EVENT_VDR_BLUE },
@@ -1118,7 +1117,10 @@ static const kb_xine_event_map_t xine_vd
     { "VOLPLUS", XINE_EVENT_VDR_VOLPLUS },
     { "YELLOW", XINE_EVENT_VDR_YELLOW },
     { "" }
-  }
+};
+
+static const kb_xine_event_map_t xine_vdr = {
+  "VDR", &xine_vdr_ids
 };
 
 JSBool js_event_generic (JSContext *cx, JSObject *obj, uintN argc, jsval *argv,
