$NetBSD: patch-ab,v 1.2 2004/07/22 17:47:18 kristerw Exp $

--- src/mkvinfo.cpp.orig	Sun Jul 18 18:08:45 2004
+++ src/mkvinfo.cpp	Thu Jul 22 19:32:58 2004
@@ -134,12 +134,11 @@
 
 void
 usage() {
+#ifdef HAVE_WXWINDOWS
   mxinfo(_(
     "Usage: mkvinfo [options] inname\n\n"
     " options:\n"
-#ifdef HAVE_WXWINDOWS
     "  -g, --gui      Start the GUI (and open inname if it was given).\n"
-#endif
     "  inname         Use 'inname' as the source.\n"
     "  -v, --verbose  Increase verbosity. See the man page for a detailed\n"
     "                 description of what mkvinfo outputs.\n"
@@ -147,6 +146,18 @@
     "  -s, --summary  Only show summaries of the contents, not each element.\n"
     "  -h, --help     Show this help.\n"
     "  -V, --version  Show version information.\n"));
+#else
+  mxinfo(_(
+    "Usage: mkvinfo [options] inname\n\n"
+    " options:\n"
+    "  inname         Use 'inname' as the source.\n"
+    "  -v, --verbose  Increase verbosity. See the man page for a detailed\n"
+    "                 description of what mkvinfo outputs.\n"
+    "  -c, --checksum Calculate and display checksums of frame contents.\n"
+    "  -s, --summary  Only show summaries of the contents, not each element.\n"
+    "  -h, --help     Show this help.\n"
+    "  -V, --version  Show version information.\n"));
+#endif
 }
 
 string
@@ -786,6 +797,10 @@
             vector<string> &summary) {
   EbmlMaster *m3;
   int i3;
+#if MATROSKA_VERSION >= 2
+  string strc;
+#endif
+  
 
   show_element(l3, 3, "Audio track");
 
@@ -1393,6 +1408,10 @@
 def_handle(cues) {
   EbmlMaster *m1, *m2, *m3;
   int i1, i2, i3;
+#if MATROSKA_VERSION >= 2
+  EbmlMaster *m4;
+  int i4;
+#endif
 
   if (verbose < 2) {
     show_element(l1, 1, "Cues (subentries will be skipped)");
@@ -1571,6 +1590,9 @@
   bool fref_found, bref_found;
   uint32_t lf_tnum;
   uint64_t lf_timecode;
+#if MATROSKA_VERSION >= 2
+  string strc;
+#endif
 
   show_element(l2, 2, "Block group");
 
