<!-- $NetBSD: editing.xml,v 1.11 2006/06/30 09:25:34 rillig Exp $ -->

<appendix id="editing">
<title>Editing guidelines for the pkgsrc guide</title>

	<para>This section contains information on editing the pkgsrc
	guide itself.</para>

<sect1 id="targets">
<title>Make targets</title>

	<para>The pkgsrc guide's source code is stored in
	<filename>pkgsrc/doc/guide/files</filename>, and several files
	are created from it:</para>

	<itemizedlist>

	<listitem><para><filename>pkgsrc/doc/pkgsrc.txt</filename></para></listitem>

	<listitem><para><filename>pkgsrc/doc/pkgsrc.html</filename></para></listitem>

	<listitem><para><ulink
	url="http://www.NetBSD.org/Documentation/pkgsrc/"/></para></listitem>

	<listitem><para><ulink
	url="http://www.NetBSD.org/Documentation/pkgsrc/pkgsrc.pdf"/>:
	The PDF version of the pkgsrc guide.</para></listitem>

	<listitem><para><ulink
	url="http://www.NetBSD.org/Documentation/pkgsrc/pkgsrc.ps"/>:
	PostScript version of the pkgsrc guide.</para></listitem>

	</itemizedlist>

</sect1>
<sect1 id="procedure">
<title>Procedure</title>

	<para>The procedure to edit the pkgsrc guide is:</para>

	<procedure>

	<step><para>Make sure you have the packages needed to
	re-generate the pkgsrc guide (and other XML-based NetBSD
	documentation) installed. These are <filename
	role="pkg">meta-pkgs/netbsd-doc</filename> for creating the
	ASCII and HTML versions, and <filename
	role="pkg">meta-pkgs/netbsd-doc-print</filename> for the
	PostScript and PDF versions. You will need both packages
	installed, to make sure documentation is consistent across all
	formats.</para></step>

	<step><para>Run <command>cd doc/guide</command> to get to the
	right directory. All further steps will take place
	here.</para></step>

	<step><para>Edit the XML file(s) in
	<filename>files/</filename>.</para></step>

	<step><para>Run <command>bmake</command> to check the pkgsrc
	guide for valid XML and to build the final output files. If you
	get any errors at this stage, you can just edit the files, as
	there are only symbolic links in the working directory, pointing
	to the files in <filename>files/</filename>.</para></step>

	<step><para><command>(cd files &amp;&amp; cvs
	commit)</command></para></step>

	<step><para>Run <command>bmake clean && bmake</command> to
	regenerate the output files with the proper RCS
	Ids.</para></step>

	<step><para>Run <command>(cd .. &amp;&amp; cvs update pkgsrc.*)
	&amp;&amp; bmake install-doc</command> to put the generated
	files into <filename>pkgsrc/doc</filename>.</para></step>

	<step><para>Run <command>(cd .. &amp;&amp; cvs commit -m
	"regenerated." pkgsrc.{html,txt})</command> to commit the
	generated documentation.</para></step>

	<step><para>Run <command>(cd
	../../../htdocs/Documentation/pkgsrc &amp;&amp; cvs update)
	&amp;&amp; bmake install-htdocs</command> to generate all the
	files for the web server.</para></step>

	<step><para>Run <command>(cd
	../../../htdocs/Documentation/pkgsrc &amp;&amp; cvs commit -m
	"regenerated.")</command> to update the files on the web server.
	If you have added a chapter, don't forget to run <command>cvs
	add *.html</command> before you commit the files.</para></step>

	</procedure>

</sect1>
</appendix>
