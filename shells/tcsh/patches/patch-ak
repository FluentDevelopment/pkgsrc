$NetBSD: patch-ak,v 1.1 2002/01/31 15:02:23 minoura Exp $

--- sh.dol.c.orig	Thu Jul 26 00:48:04 2001
+++ sh.dol.c	Thu Jan 31 16:09:37 2002
@@ -585,10 +585,8 @@
 		c = DgetC(0);
 	    } while (Isdigit(c));
 	    unDredc(c);
-	    if (subscr < 0) {
-		dolerror(vp->v_name);
-		return;
-	    }
+	    if (subscr < 0)
+		stderror(ERR_RANGE);
 	    if (subscr == 0) {
 		if (bitset) {
 		    dolp = dolzero ? STR1 : STR0;
