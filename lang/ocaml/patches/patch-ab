$NetBSD: patch-ab,v 1.1 2003/04/19 00:16:58 jschauma Exp $

--- ./byterun/Makefile.orig	Fri Apr 18 14:23:08 2003
+++ ./byterun/Makefile	Fri Apr 18 14:23:52 2003
@@ -48,10 +48,10 @@
 	          prims.o libcamlrund.a $(BYTECCLIBS)
 
 install:
-	cp ocamlrun$(EXE) $(BINDIR)/ocamlrun$(EXE)
-	cp libcamlrun.a $(LIBDIR)/libcamlrun.a
+	${BSD_INSTALL_PROGRAM} ocamlrun$(EXE) $(BINDIR)/ocamlrun$(EXE)
+	${BSD_INSTALL_DATA} libcamlrun.a $(LIBDIR)/libcamlrun.a
 	cd $(LIBDIR); $(RANLIB) libcamlrun.a
-	if test -d $(LIBDIR)/caml; then : ; else mkdir $(LIBDIR)/caml; fi
+	if test -d $(LIBDIR)/caml; then : ; else ${BSD_INSTALL_DATA_DIR} $(LIBDIR)/caml; fi
 	for i in $(PUBLIC_INCLUDES); do \
           sed -f ../tools/cleanup-header $$i > $(LIBDIR)/caml/$$i; \
         done
--- ./camlp4/etc/Makefile.orig	Fri Apr 18 14:43:37 2003
+++ ./camlp4/etc/Makefile	Fri Apr 18 14:44:40 2003
@@ -52,14 +52,14 @@
 get_promote:
 
 install:
-	-$(MKDIR) $(LIBDIR)/camlp4 $(BINDIR)
-	cp $(OBJS) $(LIBDIR)/camlp4/.
-	cp $(INTF) $(LIBDIR)/camlp4/.
-	cp lib.sml $(LIBDIR)/camlp4/.
-	cp camlp4o$(EXE) $(BINDIR)/.
-	if test -f $(COPT); then cp $(COPT) $(BINDIR)/.; fi
-	cp mkcamlp4.sh $(BINDIR)/mkcamlp4
-	chmod a+x $(BINDIR)/mkcamlp4
+	-${BSD_INSTALL_DATA_DIR} $(LIBDIR)/camlp4
+	-${BSD_INSTALL_PROGRAM_DIR}  $(BINDIR)
+	${BSD_INSTALL_DATA} $(OBJS) $(LIBDIR)/camlp4/.
+	${BSD_INSTALL_DATA} $(INTF) $(LIBDIR)/camlp4/.
+	${BSD_INSTALL_DATA} lib.sml $(LIBDIR)/camlp4/.
+	${BSD_INSTALL_SCRIPT} camlp4o$(EXE) $(BINDIR)/.
+	if test -f $(COPT); then ${BSD_INSTALL_PROGRAM} $(COPT) $(BINDIR)/.; fi
+	${BSD_INSTALL_SCRIPT} mkcamlp4.sh $(BINDIR)/mkcamlp4
 
 pa_lisp.cmo: pa_lispr.cmo
 pa_ocamllex.cmo: pa_o.cmo
--- ./camlp4/camlp4/Makefile.orig	Fri Apr 18 14:42:14 2003
+++ ./camlp4/camlp4/Makefile	Fri Apr 18 14:42:52 2003
@@ -62,11 +62,19 @@
 	done
 
 install:
-	-$(MKDIR) $(BINDIR)
-	-$(MKDIR) $(LIBDIR)/camlp4
-	cp $(CAMLP4) $(BINDIR)/.
-	cp mLast.mli quotation.mli ast2pt.mli pcaml.mli spretty.mli $(LIBDIR)/camlp4/.
-	cp mLast.cmi quotation.cmi ast2pt.cmi pcaml.cmi spretty.cmi $(LIBDIR)/camlp4/.
-	cp camlp4.cma $(LIBDIR)/camlp4/.
+	-${BSD_INSTALL_PROGRAM_DIR} $(BINDIR)
+	-${BSD_INSTALL_DATA_DIR} $(LIBDIR)/camlp4
+	${BSD_INSTALL_SCRIPT} $(CAMLP4) $(BINDIR)/.
+	${BSD_INSTALL_DATA} mLast.mli $(LIBDIR)/camlp4/
+	${BSD_INSTALL_DATA} quotation.mli $(LIBDIR)/camlp4/
+	${BSD_INSTALL_DATA} ast2pt.mli $(LIBDIR)/camlp4/
+	${BSD_INSTALL_DATA} pcaml.mli $(LIBDIR)/camlp4/
+	${BSD_INSTALL_DATA} spretty.mli $(LIBDIR)/camlp4/
+	${BSD_INSTALL_DATA} mLast.cmi $(LIBDIR)/camlp4/
+	${BSD_INSTALL_DATA} quotation.cmi $(LIBDIR)/camlp4/
+	${BSD_INSTALL_DATA} ast2pt.cmi $(LIBDIR)/camlp4/
+	${BSD_INSTALL_DATA} pcaml.cmi $(LIBDIR)/camlp4/
+	${BSD_INSTALL_DATA} spretty.cmi $(LIBDIR)/camlp4/
+	${BSD_INSTALL_DATA} camlp4.cma $(LIBDIR)/camlp4/
 
 include .depend
--- ./camlp4/lib/Makefile.orig	Fri Apr 18 14:45:22 2003
+++ ./camlp4/lib/Makefile	Fri Apr 18 14:46:06 2003
@@ -36,15 +36,15 @@
 	done
 
 install:
-	-$(MKDIR) $(LIBDIR)/camlp4
-	cp $(TARGET) *.mli $(LIBDIR)/camlp4/.
-	cp *.cmi $(LIBDIR)/camlp4/.
+	-${BSD_INSTALL_DATA_DIR} $(LIBDIR)/camlp4
+	${BSD_INSTALL_DATA} $(TARGET) *.mli $(LIBDIR)/camlp4/.
+	${BSD_INSTALL_DATA} *.cmi $(LIBDIR)/camlp4/.
 	if test -f $(TARGET:.cma=.cmxa); then $(MAKE) installopt LIBDIR=$(LIBDIR); fi
 
 installopt:
-	cp $(TARGET:.cma=.cmxa) *.cmx $(LIBDIR)/camlp4/.
+	${BSD_INSTALL_DATA} $(TARGET:.cma=.cmxa) *.cmx $(LIBDIR)/camlp4/.
 	if test -f $(TARGET:.cma=.lib); then \
-	  cp $(TARGET:.cma=.lib) $(LIBDIR)/camlp4/.; \
+	  ${BSD_INSTALL_DATA} $(TARGET:.cma=.lib) $(LIBDIR)/camlp4/.; \
 	else \
 	  tar cf - $(TARGET:.cma=.a) | (cd $(LIBDIR)/camlp4/.; tar xf -); \
 	fi
--- ./camlp4/man/Makefile.orig	Fri Apr 18 14:46:06 2003
+++ ./camlp4/man/Makefile	Fri Apr 18 14:46:38 2003
@@ -14,8 +14,8 @@
 get_promote:
 
 install:
-	-$(MKDIR) $(MANDIR)/man1
-	-cp $(TARGET) $(MANDIR)/man1/.
+	-${BSD_INSTALL_MAN_DIR} $(MANDIR)/man1
+	-${BSD_INSTALL_MAN} $(TARGET) $(MANDIR)/man1/.
 	-cd $(MANDIR)/man1; rm -f camlp4o.1; ln -s $(TARGET) camlp4o.1
 	-cd $(MANDIR)/man1; rm -f camlp4r.1; ln -s $(TARGET) camlp4r.1
 	-cd $(MANDIR)/man1; rm -f mkcamlp4.1; ln -s $(TARGET) mkcamlp4.1
--- ./camlp4/meta/Makefile.orig	Fri Apr 18 14:42:52 2003
+++ ./camlp4/meta/Makefile	Fri Apr 18 14:43:37 2003
@@ -42,10 +42,11 @@
 	done
 
 install:
-	-$(MKDIR) $(LIBDIR)/camlp4 $(BINDIR)
-	cp $(OBJS) $(LIBDIR)/camlp4/.
-	cp pa_ifdef.cmi pa_extend.cmi $(LIBDIR)/camlp4/.
-	cp camlp4r$(EXE) $(BINDIR)/.
+	-${BSD_INSTALL_DATA_DIR} $(LIBDIR)/camlp4
+	-${BSD_INSTALL_PROGRAM_DIR}  $(BINDIR)
+	${BSD_INSTALL_DATA} $(OBJS) $(LIBDIR)/camlp4/.
+	${BSD_INSTALL_DATA} pa_ifdef.cmi pa_extend.cmi $(LIBDIR)/camlp4/.
+	${BSD_INSTALL_SCRIPT} camlp4r$(EXE) $(BINDIR)/.
 	if test -f $(COPT); then cp $(COPT) $(BINDIR)/.; fi
 
 include .depend
--- ./camlp4/ocpp/Makefile.orig	Fri Apr 18 14:44:54 2003
+++ ./camlp4/ocpp/Makefile	Fri Apr 18 14:45:22 2003
@@ -24,8 +24,9 @@
 	rm -f *.cm[ioa] *.pp[io] *.o *.out *.bak .*.bak crc.ml ocpp$(EXE)
 
 install:
-	-$(MKDIR) $(LIBDIR)/camlp4 $(BINDIR)
-	cp $(OBJS) $(LIBDIR)/camlp4/.
-	cp ocpp$(EXE) $(BINDIR)/.
+	-${BSD_INSTALL_DATA_DIR} $(LIBDIR)/camlp4
+	-${BSD_INSTALL_PROGRAM_DIR}  $(BINDIR)
+	${BSD_INSTALL_DATA} $(OBJS) $(LIBDIR)/camlp4/.
+	${BSD_INSTALL_SCRIPT} ocpp$(EXE) $(BINDIR)/.
 
 depend:
--- ./camlp4/odyl/Makefile.orig	Fri Apr 18 14:41:32 2003
+++ ./camlp4/odyl/Makefile	Fri Apr 18 14:42:14 2003
@@ -51,7 +51,8 @@
 compare:
 
 install:
-	-$(MKDIR) $(LIBDIR)/camlp4 $(BINDIR)
-	cp odyl.cmo odyl.cma $(LIBDIR)/camlp4/.
+	-${BSD_INSTALL_DATA_DIR} $(LIBDIR)/camlp4
+	-${BSD_INSTALL_DATA_DIR}  $(BINDIR)
+	${BSD_INSTALL_DATA} odyl.cmo odyl.cma $(LIBDIR)/camlp4/.
 
 include .depend
--- ./camlp4/top/Makefile.orig	Fri Apr 18 14:44:40 2003
+++ ./camlp4/top/Makefile	Fri Apr 18 14:44:54 2003
@@ -42,7 +42,9 @@
 get_promote:
 
 install:
-	-$(MKDIR) $(LIBDIR)/camlp4
-	cp $(TARGET) $(LIBDIR)/camlp4/.
+	-${BSD_INSTALL_DATA_DIR} $(LIBDIR)/camlp4
+	for i in $(TARGET); do	\
+		${BSD_INSTALL_DATA} $$i $(LIBDIR)/camlp4/ ; \
+	done
 
 include .depend
--- ./debugger/Makefile.orig	Fri Apr 18 14:46:54 2003
+++ ./debugger/Makefile	Fri Apr 18 14:47:08 2003
@@ -79,7 +79,7 @@
 	$(CAMLC) $(LINKFLAGS) -o ocamldebug$(EXE) $(OTHEROBJS) $(OBJS)
 
 install:
-	cp ocamldebug$(EXE) $(BINDIR)/ocamldebug$(EXE)
+	${BSD_INSTALL_PROGRAM} ocamldebug$(EXE) $(BINDIR)/ocamldebug$(EXE)
 
 clean::
 	rm -f ocamldebug$(EXE)
--- ./man/Makefile.orig	Fri Apr 18 14:25:01 2003
+++ ./man/Makefile	Fri Apr 18 14:25:28 2003
@@ -17,6 +17,6 @@
 DIR=$(MANDIR)/man$(MANEXT)
 
 install:
-	for i in *.m; do cp $$i $(DIR)/`basename $$i .m`.$(MANEXT); done
+	for i in *.m; do ${BSD_INSTALL_MAN} $$i $(DIR)/`basename $$i .m`.$(MANEXT); done
 	echo '.so man$(MANEXT)/ocamlc.$(MANEXT)' > $(DIR)/ocamlc.opt.$(MANEXT)
 	echo '.so man$(MANEXT)/ocamlopt.$(MANEXT)' > $(DIR)/ocamlopt.opt.$(MANEXT)
--- ./ocamldoc/Makefile.orig	Fri Apr 18 14:38:37 2003
+++ ./ocamldoc/Makefile	Fri Apr 18 14:40:24 2003
@@ -272,23 +272,23 @@
 # Installation targets
 ######################
 install: dummy
-	if test -d $(INSTALL_BINDIR); then : ; else $(MKDIR) $(INSTALL_BINDIR); fi
-	if test -d $(INSTALL_LIBDIR); then : ; else $(MKDIR) $(INSTALL_LIBDIR); fi
-	$(CP) $(OCAMLDOC) $(INSTALL_BINDIR)
-	$(CP) ocamldoc.sty ocamldoc.hva *.cmi $(GENERATORS) $(OCAMLDOC_LIBCMA) $(INSTALL_LIBDIR)
-	$(CP) $(INSTALL_MLIS) $(INSTALL_CMIS) $(INSTALL_LIBDIR)
-	if test -d $(INSTALL_MANODIR); then : ; else $(MKDIR) $(INSTALL_MANODIR); fi
-	$(CP) stdlib_man/* $(INSTALL_MANODIR)
+	if test -d $(INSTALL_BINDIR); then : ; else ${BSD_INSTALL_PROGRAM_DIR} $(INSTALL_BINDIR); fi
+	if test -d $(INSTALL_LIBDIR); then : ; else ${BSD_INSTALL_DATA_DIR} $(INSTALL_LIBDIR); fi
+	${BSD_INSTALL_PROGRAM} $(OCAMLDOC) $(INSTALL_BINDIR)
+	${BSD_INSTALL_DATA} ocamldoc.sty ocamldoc.hva *.cmi $(GENERATORS) $(OCAMLDOC_LIBCMA) $(INSTALL_LIBDIR)
+	${BSD_INSTALL_DATA} $(INSTALL_MLIS) $(INSTALL_CMIS) $(INSTALL_LIBDIR)
+	if test -d $(INSTALL_MANODIR); then : ; else ${BSD_INSTALL_MAN_DIR} $(INSTALL_MANODIR); fi
+	${BSD_INSTALL_MAN} stdlib_man/* $(INSTALL_MANODIR)
 
 installopt:
 	if test -f $(OCAMLDOC_OPT) ; then $(MAKE) installopt_really ; fi
 
 installopt_really:
-	if test -d $(INSTALL_BINDIR); then : ; else $(MKDIR) $(INSTALL_BINDIR); fi
-	if test -d $(INSTALL_LIBDIR); then : ; else $(MKDIR) $(INSTALL_LIBDIR); fi
-	$(CP) $(OCAMLDOC_OPT) $(INSTALL_BINDIR)
-	$(CP) ocamldoc.sty ocamldoc.hva $(OCAMLDOC_LIBA) $(OCAMLDOC_LIBCMXA) $(INSTALL_LIBDIR)
-	$(CP) $(INSTALL_MLIS) $(INSTALL_CMIS) $(INSTALL_LIBDIR)
+	if test -d $(INSTALL_BINDIR); then : ; else ${BSD_INSTALL_PROGRAM_DIR} $(INSTALL_BINDIR); fi
+	if test -d $(INSTALL_LIBDIR); then : ; else ${BSD_INSTALL_DATA_DIR} $(INSTALL_LIBDIR); fi
+	${BSD_INSTALL_PROGRAM} $(OCAMLDOC_OPT) $(INSTALL_BINDIR)
+	${BSD_INSTALL_DATA} ocamldoc.sty ocamldoc.hva $(OCAMLDOC_LIBA) $(OCAMLDOC_LIBCMXA) $(INSTALL_LIBDIR)
+	${BSD_INSTALL_DATA} $(INSTALL_MLIS) $(INSTALL_CMIS) $(INSTALL_LIBDIR)
 
 # Testing :
 ###########
--- ./otherlibs/bigarray/Makefile.orig	Fri Apr 18 14:25:51 2003
+++ ./otherlibs/bigarray/Makefile	Fri Apr 18 14:26:40 2003
@@ -41,13 +41,13 @@
           $(CAML_OBJS:.cmo=.cmx)
 
 install:
-	if test -f dllbigarray.so; then cp dllbigarray.so $(STUBLIBDIR)/dllbigarray.so; fi
-	cp bigarray.cmi bigarray.mli libbigarray.a bigarray.cma $(LIBDIR)
+	if test -f dllbigarray.so; then ${BSD_INSTALL_DATA} dllbigarray.so $(STUBLIBDIR)/dllbigarray.so; fi
+	${BSD_INSTALL_DATA} bigarray.cmi bigarray.mli libbigarray.a bigarray.cma $(LIBDIR)
 	cd $(LIBDIR); $(RANLIB) libbigarray.a
-	cp bigarray.h $(LIBDIR)/caml/bigarray.h
+	${BSD_INSTALL_DATA} bigarray.h $(LIBDIR)/caml/bigarray.h
 
 installopt:
-	cp bigarray.a $(CAML_OBJS:.cmo=.cmx) bigarray.cmxa $(LIBDIR)
+	${BSD_INSTALL_DATA} bigarray.a $(CAML_OBJS:.cmo=.cmx) bigarray.cmxa $(LIBDIR)
 	cd $(LIBDIR); $(RANLIB) bigarray.a
 
 partialclean:
--- ./otherlibs/dbm/Makefile.orig	Fri Apr 18 14:27:45 2003
+++ ./otherlibs/dbm/Makefile	Fri Apr 18 14:28:12 2003
@@ -47,13 +47,13 @@
 	rm -f *.a *.o *.so
 
 install:
-	if test -f dllmldbm.so; then cp dllmldbm.so $(STUBLIBDIR)/dllmldbm.so; fi
-	cp libmldbm.a $(LIBDIR)/libmldbm.a
+	if test -f dllmldbm.so; then ${BSD_INSTALL_DATA} dllmldbm.so $(STUBLIBDIR)/dllmldbm.so; fi
+	${BSD_INSTALL_DATA} libmldbm.a $(LIBDIR)/libmldbm.a
 	cd $(LIBDIR); $(RANLIB) libmldbm.a
-	cp dbm.cma dbm.cmi dbm.mli $(LIBDIR)
+	${BSD_INSTALL_DATA} dbm.cma dbm.cmi dbm.mli $(LIBDIR)
 
 installopt:
-	cp dbm.cmx dbm.cmxa dbm.a $(LIBDIR)
+	${BSD_INSTALL_DATA} dbm.cmx dbm.cmxa dbm.a $(LIBDIR)
 	cd $(LIBDIR); $(RANLIB) dbm.a
 
 .SUFFIXES: .ml .mli .cmo .cmi .cmx
--- ./otherlibs/dynlink/Makefile.orig	Fri Apr 18 14:28:23 2003
+++ ./otherlibs/dynlink/Makefile	Fri Apr 18 14:28:35 2003
@@ -38,7 +38,7 @@
 	$(CAMLC) $(COMPFLAGS) -o extract_crc dynlink.cma extract_crc.cmo
 
 install:
-	cp dynlink.cmi dynlink.cma dynlink.mli extract_crc $(LIBDIR)
+	${BSD_INSTALL_DATA} dynlink.cmi dynlink.cma dynlink.mli extract_crc $(LIBDIR)
 
 installopt:
 
--- ./otherlibs/graph/Makefile.orig	Fri Apr 18 14:29:08 2003
+++ ./otherlibs/graph/Makefile	Fri Apr 18 14:29:30 2003
@@ -50,13 +50,13 @@
 	rm -f *.a *.so *.o
 
 install:
-	if test -f dllgraphics.so; then cp dllgraphics.so $(STUBLIBDIR)/dllgraphics.so; fi
-	cp libgraphics.a $(LIBDIR)/libgraphics.a
+	if test -f dllgraphics.so; then ${BSD_INSTALL_DATA} dllgraphics.so $(STUBLIBDIR)/dllgraphics.so; fi
+	${BSD_INSTALL_DATA} libgraphics.a $(LIBDIR)/libgraphics.a
 	cd $(LIBDIR); $(RANLIB) libgraphics.a
-	cp graphics.cm[ia] graphicsX11.cmi graphics.mli graphicsX11.mli $(LIBDIR)
+	${BSD_INSTALL_DATA} graphics.cm[ia] graphicsX11.cmi graphics.mli graphicsX11.mli $(LIBDIR)
 
 installopt:
-	cp graphics.cmxa graphics.a $(LIBDIR)
+	${BSD_INSTALL_DATA} graphics.cmxa graphics.a $(LIBDIR)
 	cd $(LIBDIR); $(RANLIB) graphics.a
 
 .SUFFIXES: .ml .mli .cmo .cmi .cmx
--- ./otherlibs/labltk/browser/Makefile.orig	Fri Apr 18 14:33:15 2003
+++ ./otherlibs/labltk/browser/Makefile	Fri Apr 18 14:33:33 2003
@@ -47,7 +47,7 @@
 
 install:
 	if test -f ocamlbrowser$(EXE); then : ; \
-	  cp ocamlbrowser$(EXE) $(BINDIR); fi
+	  ${BSD_INSTALL_SCRIPT} ocamlbrowser$(EXE) $(BINDIR); fi
 
 clean:
 	rm -f *.cm? ocamlbrowser$(EXE) dummy.mli *~ *.orig
--- ./otherlibs/labltk/camltk/Makefile.orig	Fri Apr 18 14:33:34 2003
+++ ./otherlibs/labltk/camltk/Makefile	Fri Apr 18 14:34:41 2003
@@ -21,14 +21,12 @@
 	$(MAKE) -f Makefile.gen clean
 
 install: $(CAMLTKOBJS)
-	if test -d $(INSTALLDIR); then : ; else mkdir $(INSTALLDIR); fi
-	cp $(CAMLTKOBJS:.cmo=.cmi) $(CWIDGETOBJS:.cmo=.mli) $(INSTALLDIR)
-	chmod 644 $(INSTALLDIR)/*.cmi
+	if test -d $(INSTALLDIR); then : ; else ${BSD_INSTALL_DATA_DIR} $(INSTALLDIR); fi
+	${BSD_INSTALL_DATA} $(CAMLTKOBJS:.cmo=.cmi) $(CWIDGETOBJS:.cmo=.mli) $(INSTALLDIR)
 
 installopt: $(CAMLTKOBJSX)
-	@if test -d $(INSTALLDIR); then : ; else mkdir $(INSTALLDIR); fi
-	cp $(CAMLTKOBJSX) $(INSTALLDIR)
-	chmod 644 $(INSTALLDIR)/*.cmx
+	@if test -d $(INSTALLDIR); then : ; else ${BSD_INSTALL_DATA_DIR} $(INSTALLDIR); fi
+	${BSD_INSTALL_DATA} $(CAMLTKOBJSX) $(INSTALLDIR)
 
 .SUFFIXES :
 .SUFFIXES : .mli .ml .cmi .cmx .cmo .mlp
--- ./otherlibs/labltk/compiler/Makefile.orig	Fri Apr 18 14:34:42 2003
+++ ./otherlibs/labltk/compiler/Makefile	Fri Apr 18 14:34:52 2003
@@ -45,8 +45,8 @@
 	rm -f *.cm*  pplex.ml ppyac.ml ppyac.mli pp$(EXE)
 
 install: 
-	cp tkcompiler$(EXE) $(INSTALLDIR)
-	cp pp$(EXE) $(INSTALLDIR)
+	${BSD_INSTALL_SCRIPT} tkcompiler$(EXE) $(INSTALLDIR)
+	${BSD_INSTALL_SCRIPT} pp$(EXE) $(INSTALLDIR)
 
 .SUFFIXES :
 .SUFFIXES : .mli .ml .cmi .cmo .mlp
--- ./otherlibs/labltk/frx/Makefile.orig	Fri Apr 18 14:35:04 2003
+++ ./otherlibs/labltk/frx/Makefile	Fri Apr 18 14:35:14 2003
@@ -20,7 +20,7 @@
 	$(CAMLOPTLIBR) -o frxlib.cmxa $(OBJSX)
 
 install: frxlib.cma
-	cp *.cmi *.mli frxlib.cma $(INSTALLDIR)
+	${BSD_INSTALL_DATA} *.cmi *.mli frxlib.cma $(INSTALLDIR)
 
 installopt: frxlib.cmxa
 	cp frxlib.cmxa frxlib.a $(INSTALLDIR)
--- ./otherlibs/labltk/jpf/Makefile.orig	Fri Apr 18 14:35:15 2003
+++ ./otherlibs/labltk/jpf/Makefile	Fri Apr 18 14:35:24 2003
@@ -21,7 +21,7 @@
 	$(CAMLOPTLIBR) -o jpflib.cmxa $(OBJSX)
 
 install: jpflib.cma
-	cp $(OBJS:.cmo=.cmi) $(OBJS:.cmo=.mli) jpflib.cma $(INSTALLDIR)
+	${BSD_INSTALL_DATA} $(OBJS:.cmo=.cmi) $(OBJS:.cmo=.mli) jpflib.cma $(INSTALLDIR)
 
 installopt: jpflib.cmxa
 	cp jpflib.cmxa jpflib.a $(OBJS:.cmo=.cmx) $(INSTALLDIR)
--- ./otherlibs/labltk/labltk/Makefile.orig	Fri Apr 18 14:35:24 2003
+++ ./otherlibs/labltk/labltk/Makefile	Fri Apr 18 14:35:59 2003
@@ -16,14 +16,12 @@
 labltkobjsx: $(LABLTKOBJSX)
 
 install: $(LABLTKOBJS)
-	if test -d $(INSTALLDIR); then : ; else mkdir $(INSTALLDIR); fi
-	cp $(LABLTKOBJS:.cmo=.cmi) $(WIDGETOBJS:.cmo=.mli) $(INSTALLDIR)
-	chmod 644 $(INSTALLDIR)/*.cmi
+	if test -d $(INSTALLDIR); then : ; else ${BSD_INSTALL_DATA_DIR} $(INSTALLDIR); fi
+	${BSD_INSTALL_DATA} $(LABLTKOBJS:.cmo=.cmi) $(WIDGETOBJS:.cmo=.mli) $(INSTALLDIR)
 
 installopt: $(LABLTKOBJSX)
-	@if test -d $(INSTALLDIR); then : ; else mkdir $(INSTALLDIR); fi
-	cp $(LABLTKOBJSX) $(INSTALLDIR)
-	chmod 644 $(INSTALLDIR)/*.cmx
+	@if test -d $(INSTALLDIR); then : ; else ${BSD_INSTALL_DATA_DIR} $(INSTALLDIR); fi
+	${BSD_INSTALL_DATA} $(LABLTKOBJSX) $(INSTALLDIR)
 
 clean:
 	$(MAKE) -f Makefile.gen clean
--- ./otherlibs/labltk/lib/Makefile.orig	Fri Apr 18 14:36:00 2003
+++ ./otherlibs/labltk/lib/Makefile	Fri Apr 18 14:37:09 2003
@@ -58,17 +58,13 @@
 	@echo 'exec $(INSTALLDIR)/$(LIBNAME)top$(EXE) -I $(INSTALLDIR) $$*' >> $@
 
 install:
-	if test -d $(INSTALLDIR); then : ; else mkdir $(INSTALLDIR); fi
-	cp $(LIBNAME).cma $(LIBNAME)top$(EXE) $(INSTALLDIR)
-	chmod 644 $(INSTALLDIR)/$(LIBNAME).cma
-	chmod 755 $(INSTALLDIR)/$(LIBNAME)top$(EXE)
-	@if test -d $(BINDIR); then : ; else mkdir $(BINDIR); fi
-	cp $(LIBNAME) $(BINDIR)
-	chmod 755 $(BINDIR)/$(LIBNAME)
+	if test -d $(INSTALLDIR); then : ; else ${BSD_INSTALL_DATA_DIR} $(INSTALLDIR); fi
+	${BSD_INSTALL_DATA} $(LIBNAME).cma $(INSTALLDIR)
+	${BSD_INSTALL_PROGRAM} $(LIBNAME)top$(EXE) $(INSTALLDIR)
+	@if test -d $(BINDIR); then : ; else ${BSD_INSTALL_PROGRAM_DIR} $(BINDIR); fi
+	${BSD_INSTALL_SCRIPT} $(LIBNAME) $(BINDIR)
 
 installopt:
-	@if test -d $(INSTALLDIR); then : ; else mkdir $(INSTALLDIR); fi
-	cp $(LIBNAME).cmxa $(LIBNAME).a $(INSTALLDIR)
-	cd $(INSTALLDIR); $(RANLIB) $(LIBNAME).a
-	chmod 644 $(INSTALLDIR)/$(LIBNAME).cmxa
-	chmod 644 $(INSTALLDIR)/$(LIBNAME).a
+	@if test -d $(INSTALLDIR); then : ; else ${BSD_INSTALL_DATA_DIR} $(INSTALLDIR); fi
+	${BSD_INSTALL_DATA} $(LIBNAME).cmxa $(LIBNAME).a $(INSTALLDIR)
+	cd $(INSTALLDIR); $(RANLIB) $(LIBNAME).a
--- ./otherlibs/labltk/support/Makefile.orig	Fri Apr 18 14:37:10 2003
+++ ./otherlibs/labltk/support/Makefile	Fri Apr 18 14:37:47 2003
@@ -26,12 +26,11 @@
     widget.cmi widget.mli
 
 install: lib$(LIBNAME).a $(PUB)
-	if test -d $(INSTALLDIR); then : ; else mkdir $(INSTALLDIR); fi
-	cp $(PUB) lib$(LIBNAME).a $(INSTALLDIR)
+	if test -d $(INSTALLDIR); then : ; else ${BSD_INSTALL_DATA_DIR} $(INSTALLDIR); fi
+	${BSD_INSTALL_DATA} $(PUB) lib$(LIBNAME).a $(INSTALLDIR)
 	cd $(INSTALLDIR); $(RANLIB) lib$(LIBNAME).a
-	cd $(INSTALLDIR); chmod 644 $(PUB) lib$(LIBNAME).a
 	if test -f dll$(LIBNAME).so; then \
-	   cp dll$(LIBNAME).so $(STUBLIBDIR)/dll$(LIBNAME).so; fi
+	   ${BSD_INSTALL_DATA} dll$(LIBNAME).so $(STUBLIBDIR)/dll$(LIBNAME).so; fi
 
 clean : 
 	rm -f *.cm* *.o *.a *.so
--- ./otherlibs/labltk/tkanim/Makefile.orig	Fri Apr 18 14:37:47 2003
+++ ./otherlibs/labltk/tkanim/Makefile	Fri Apr 18 14:38:19 2003
@@ -52,9 +52,9 @@
 
 
 install: tkanim.cma 
-	cp tkanim.cma *.cmi *.mli libtkanim.a $(INSTALLDIR)
+	${BSD_INSTALL_DATA} tkanim.cma *.cmi *.mli libtkanim.a $(INSTALLDIR)
 	if [ -f dlltkanim.so ]; then \
-		cp dlltkanim.so $(STUBLIBDIR)/dlltkanim.so; \
+		${BSD_INSTALL_DATA} dlltkanim.so $(STUBLIBDIR)/dlltkanim.so; \
 	fi
 
 installopt: tkanim.cmxa
--- ./otherlibs/num/Makefile.orig	Fri Apr 18 14:29:52 2003
+++ ./otherlibs/num/Makefile	Fri Apr 18 14:30:19 2003
@@ -53,13 +53,13 @@
 $(CAMLOBJS:.cmo=.cmx): ../../ocamlopt
 
 install:
-	if test -f dllnums.so; then cp dllnums.so $(STUBLIBDIR)/dllnums.so; fi
-	cp libnums.a $(LIBDIR)/libnums.a
+	if test -f dllnums.so; then ${BSD_INSTALL_DATA} dllnums.so $(STUBLIBDIR)/dllnums.so; fi
+	${BSD_INSTALL_DATA} libnums.a $(LIBDIR)/libnums.a
 	cd $(LIBDIR); $(RANLIB) libnums.a
-	cp nums.cma $(CMIFILES) $(CMIFILES:.cmi=.mli) $(LIBDIR)
+	${BSD_INSTALL_DATA} nums.cma $(CMIFILES) $(CMIFILES:.cmi=.mli) $(LIBDIR)
 
 installopt:
-	cp $(CAMLOBJS:.cmo=.cmx) nums.cmxa nums.a $(LIBDIR)
+	${BSD_INSTALL_DATA} $(CAMLOBJS:.cmo=.cmx) nums.cmxa nums.a $(LIBDIR)
 	cd $(LIBDIR); $(RANLIB) nums.a
 
 partialclean:
--- ./otherlibs/str/Makefile.orig	Fri Apr 18 14:30:19 2003
+++ ./otherlibs/str/Makefile	Fri Apr 18 14:30:43 2003
@@ -53,13 +53,13 @@
 	cd $(REGEXLIB); if test -f Makefile; then $(MAKE) distclean; else exit 0; fi
 
 install:
-	if test -f dllstr.so; then cp dllstr.so $(STUBLIBDIR)/dllstr.so; fi
-	cp libstr.a $(LIBDIR)/libstr.a
+	if test -f dllstr.so; then ${BSD_INSTALL_DATA} dllstr.so $(STUBLIBDIR)/dllstr.so; fi
+	${BSD_INSTALL_DATA} libstr.a $(LIBDIR)/libstr.a
 	cd $(LIBDIR); $(RANLIB) libstr.a
-	cp str.cma str.cmi str.mli $(LIBDIR)
+	${BSD_INSTALL_DATA} str.cma str.cmi str.mli $(LIBDIR)
 
 installopt:
-	cp str.cmx str.cmxa str.a $(LIBDIR)
+	${BSD_INSTALL_DATA} str.cmx str.cmxa str.a $(LIBDIR)
 	cd $(LIBDIR); $(RANLIB) str.a
 
 .SUFFIXES: .ml .mli .cmo .cmi .cmx
--- ./otherlibs/systhreads/Makefile.orig	Fri Apr 18 14:30:43 2003
+++ ./otherlibs/systhreads/Makefile	Fri Apr 18 14:31:12 2003
@@ -70,13 +70,13 @@
 	rm -f $(GENFILES)
 
 install:
-	if test -f dllthreads.so; then cp dllthreads.so $(STUBLIBDIR)/dllthreads.so; fi
-	cp libthreads.a $(LIBDIR)/libthreads.a
+	if test -f dllthreads.so; then ${BSD_INSTALL_DATA} dllthreads.so $(STUBLIBDIR)/dllthreads.so; fi
+	${BSD_INSTALL_DATA} libthreads.a $(LIBDIR)/libthreads.a
 	cd $(LIBDIR); $(RANLIB) libthreads.a
-	if test -d $(LIBDIR)/threads; then :; else mkdir $(LIBDIR)/threads; fi
-	cp $(THREAD_OBJS:.cmo=.cmi) threads.cma $(LIBDIR)/threads
+	if test -d $(LIBDIR)/threads; then :; else ${BSD_INSTALL_DATA_DIR} $(LIBDIR)/threads; fi
+	${BSD_INSTALL_DATA} $(THREAD_OBJS:.cmo=.cmi) threads.cma $(LIBDIR)/threads
 	rm -f $(LIBDIR)/threads/stdlib.cma
-	cp thread.mli mutex.mli condition.mli event.mli threadUnix.mli $(LIBDIR)
+	${BSD_INSTALL_DATA} thread.mli mutex.mli condition.mli event.mli threadUnix.mli $(LIBDIR)
 
 installopt:
 	cp libthreadsnat.a $(LIBDIR)/libthreadsnat.a
--- ./otherlibs/threads/Makefile.orig	Fri Apr 18 14:31:14 2003
+++ ./otherlibs/threads/Makefile	Fri Apr 18 14:31:45 2003
@@ -99,12 +99,12 @@
 	rm -f pervasives.mli marshal.mli unix.mli
 
 install:
-	if test -f dllthreads.so; then cp dllthreads.so $(STUBLIBDIR)/dllthreads.so; fi
-	cp libthreads.a $(LIBDIR)/libthreads.a
+	if test -f dllthreads.so; then ${BSD_INSTALL_DATA} dllthreads.so $(STUBLIBDIR)/dllthreads.so; fi
+	${BSD_INSTALL_DATA} libthreads.a $(LIBDIR)/libthreads.a
 	cd $(LIBDIR); $(RANLIB) libthreads.a
-	if test -d $(LIBDIR)/threads; then : ; else mkdir $(LIBDIR)/threads; fi
-	cp thread.cmi mutex.cmi condition.cmi event.cmi threadUnix.cmi threads.cma stdlib.cma unix.cma $(LIBDIR)/threads
-	cp thread.mli mutex.mli condition.mli event.mli threadUnix.mli $(LIBDIR)
+	if test -d $(LIBDIR)/threads; then : ; else ${BSD_INSTALL_DATA_DIR} $(LIBDIR)/threads; fi
+	${BSD_INSTALL_DATA} thread.cmi mutex.cmi condition.cmi event.cmi threadUnix.cmi threads.cma stdlib.cma unix.cma $(LIBDIR)/threads
+	${BSD_INSTALL_DATA} thread.mli mutex.mli condition.mli event.mli threadUnix.mli $(LIBDIR)
 
 installopt:
 
--- ./otherlibs/unix/Makefile.orig	Fri Apr 18 14:31:45 2003
+++ ./otherlibs/unix/Makefile	Fri Apr 18 14:32:05 2003
@@ -65,13 +65,13 @@
 	rm -f *.a *.o *.so
 
 install:
-	if test -f dllunix.so; then cp dllunix.so $(STUBLIBDIR)/dllunix.so; fi
-	cp libunix.a $(LIBDIR)/libunix.a
+	if test -f dllunix.so; then ${BSD_INSTALL_DATA} dllunix.so $(STUBLIBDIR)/dllunix.so; fi
+	${BSD_INSTALL_DATA} libunix.a $(LIBDIR)/libunix.a
 	cd $(LIBDIR); $(RANLIB) libunix.a
-	cp unix.cma $(MLOBJS:.cmo=.cmi) $(MLOBJS:.cmo=.mli) $(LIBDIR)
+	${BSD_INSTALL_DATA} unix.cma $(MLOBJS:.cmo=.cmi) $(MLOBJS:.cmo=.mli) $(LIBDIR)
 
 installopt:
-	cp $(MLOBJS:.cmo=.cmx) unix.cmxa unix.a $(LIBDIR)
+	${BSD_INSTALL_DATA} $(MLOBJS:.cmo=.cmx) unix.cmxa unix.a $(LIBDIR)
 	cd $(LIBDIR); $(RANLIB) unix.a
 
 .SUFFIXES: .ml .mli .cmo .cmi .cmx
--- ./stdlib/Makefile.orig	Fri Apr 18 14:24:06 2003
+++ ./stdlib/Makefile	Fri Apr 18 14:24:23 2003
@@ -47,7 +47,7 @@
 allopt-prof: stdlib.p.cmxa std_exit.p.cmx
 
 install:
-	cp stdlib.cma std_exit.cmo *.cmi *.mli *.ml camlheader camlheader_ur \
+	${BSD_INSTALL_DATA} stdlib.cma std_exit.cmo *.cmi *.mli *.ml camlheader camlheader_ur \
            $(LIBDIR)
 
 installopt: installopt-default installopt-$(PROFILING)
--- ./tools/Makefile.orig	Fri Apr 18 14:24:38 2003
+++ ./tools/Makefile	Fri Apr 18 14:24:50 2003
@@ -44,7 +44,7 @@
 	rm -f ocamldep
 
 install::
-	cp ocamldep $(BINDIR)/ocamldep$(EXE)
+	${BSD_INSTALL_SCRIPT} ocamldep $(BINDIR)/ocamldep$(EXE)
 
 # The profiler
