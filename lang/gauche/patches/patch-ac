$NetBSD: patch-ac,v 1.4 2005/01/16 08:57:55 kei Exp $

--- src/Makefile.in.orig	2004-11-22 07:36:28.000000000 +0900
+++ src/Makefile.in	2005-01-16 17:42:25.000000000 +0900
@@ -46,7 +46,7 @@
 # These are set by configure
 DEFS     = @DEFS@
 OPTFLAGS = @OPTFLAGS@
-INCLUDES = -I$(srcdir) -I$(srcdir)/../gc/include @LOCAL_INC@
+INCLUDES = -I$(srcdir) -I@prefix@/include/gc @LOCAL_INC@
 RANLIB   = @RANLIB@
 OBJEXT   = @OBJEXT@
 EXEEXT   = @EXEEXT@
@@ -81,10 +81,7 @@
 SITE_ARCH_DIR         = $(GAUCHE_ARCH_DIR)/site/@GAUCHE_VERSION@/@host@
 ARCH = @host@
 
-INSTALL_HEADERS = gauche.h \
-	../gc/include/gc.h \
-	../gc/include/gc_config_macros.h \
-	../gc/include/gc_pthread_redirects.h
+INSTALL_HEADERS = gauche.h
 INSTALL_SUBHEADERS = gauche/config.h gauche/vm.h gauche/vminsn.h      \
                      gauche/char_euc_jp.h gauche/char_utf_8.h         \
                      gauche/char_sjis.h gauche/char_none.h            \
@@ -108,7 +105,7 @@
 
 # build -----------------------------------------------
 
-GCLIB = ../gc/libgc.la
+GCLIB = @prefix@/lib/libgc.la
 
 gosh_SOURCES = main.c
 gosh_OBJECTS = main.$(OBJEXT)
@@ -140,7 +137,7 @@
 	$(LINK) $(gosh_LDFLAGS) -o gosh$(EXEEXT) $(gosh_OBJECTS) $(gosh_LDADD) $(LIBS)
 
 relink :
-	$(RELINK) $(libgauche_LDFLAGS) libgauche.$(SOEXT) $(libgauche_OBJECTS) ../gc/*.lo $(LIBS)
+	$(RELINK) $(libgauche_LDFLAGS) libgauche.$(SOEXT) $(libgauche_OBJECTS) @prefix@/lib/libgc.$(SOEXT) $(LIBS)
 	$(RELINK) $(gosh_LDFLAGS) -o gosh$(EXEEXT)  $(gosh_OBJECTS) $(gosh_LDADD) $(LIBS)
 
 $(OBJECTS) : $(HEADERS)
@@ -164,7 +161,7 @@
 load.$(OBJEXT) : dl_dlopen.c dl_dummy.c dl_win.c dl_darwin.c
 
 libgauche.$(SOEXT) : $(libgauche_OBJECTS) $(GCLIB)
-	$(LINK) $(libgauche_LDFLAGS) libgauche.$(SOEXT) $(libgauche_OBJECTS) ../gc/*.lo $(LIBS)
+	$(LINK) $(libgauche_LDFLAGS) libgauche.$(SOEXT) $(libgauche_OBJECTS) @prefix@/lib/libgc.$(SOEXT) $(LIBS)
 	$(POSTBUILD)
 
 gauche/arch.h :
