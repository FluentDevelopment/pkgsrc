$NetBSD: patch-an,v 1.5 2005/08/23 20:55:46 darcy Exp $

--- Lib/weakref.py.orig	2004-08-31 07:38:12.000000000 -0400
+++ Lib/weakref.py
@@ -43,12 +43,12 @@ class WeakValueDictionary(UserDict.UserD
     # way in).
 
     def __init__(self, *args, **kw):
-        UserDict.UserDict.__init__(self, *args, **kw)
         def remove(wr, selfref=ref(self)):
             self = selfref()
             if self is not None:
                 del self.data[wr.key]
         self._remove = remove
+        UserDict.UserDict.__init__(self, *args, **kw)
 
     def __getitem__(self, key):
         o = self.data[key]()
