$NetBSD: patch-at,v 1.2 2002/01/03 20:40:43 tron Exp $

--- ../gcc-2.95.3/gcc/config/sh/sh.c.orig	Mon Aug  2 07:02:55 1999
+++ ../gcc-2.95.3/gcc/config/sh/sh.c	Thu Jan  3 20:37:53 2002
@@ -515,6 +515,7 @@
   if ((code != EQ && code != NE
        && (sh_compare_op1 != const0_rtx
 	   || code == GTU  || code == GEU || code == LTU || code == LEU))
+      || (mode == DImode && sh_compare_op1 != const0_rtx)
       || TARGET_SH3E && GET_MODE_CLASS (mode) == MODE_FLOAT)
     sh_compare_op1 = force_reg (mode, sh_compare_op1);
 
@@ -823,9 +824,9 @@
 
 char *
 output_ieee_ccmpeq (insn, operands)
-     rtx insn, operands;
+     rtx insn, *operands;
 {
-  output_branchy_insn (NE, "bt\t%l9\\;fcmp/eq\t%1,%0", insn, operands);
+  return output_branchy_insn (NE, "bt\t%l9\\;fcmp/eq\t%1,%0", insn, operands);
 }
 
 /* Output to FILE the start of the assembler file.  */
