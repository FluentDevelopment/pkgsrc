$NetBSD: patch-af,v 1.3 2004/01/10 19:31:25 kristerw Exp $

--- ghc/driver/mangler/ghc-asm.lprl.orig	2002-12-08 15:29:50.000000000 +0100
+++ ghc/driver/mangler/ghc-asm.lprl	2004-01-03 19:13:53.000000000 +0100
@@ -197,7 +197,7 @@
         $T_hsc_cc_PAT   = '\.string.*\)(hsc|cc) (.*)\\\\t(.*)"';
     }
 
-    $T_DOT_WORD	    = '\.(long|value|byte|zero)';
+    $T_DOT_WORD	    = '\.(long|value|word|byte|zero)';
     $T_DOT_GLOBAL   = '\.globl';
     $T_HDR_literal  = "\.section\t\.rodata\n"; # or just use .text??? (WDP 95/11)
     $T_HDR_misc	    = "\.text\n\t\.align 4\n";
@@ -1161,7 +1161,7 @@
 		    }
 		}
 
-		if ( $TargetPlatform !~ /^(alpha-|hppa|mips-|powerpc-apple-)/) {
+		if ( $TargetPlatform !~ /^(i386-|alpha-|hppa|mips-|powerpc-apple-)/) {
 		    # On alphas, hppa: no very good way to look for "dangling"
 		    # references to fast-entry point.
 		    # (questionable re hppa and mips...)
