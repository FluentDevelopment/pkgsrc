$NetBSD: patch-ai,v 1.1 2003/04/29 11:27:45 augustss Exp $

--- ./ghc/rts/Makefile.orig	Sun Oct 13 19:50:55 2002
+++ ./ghc/rts/Makefile	Fri Mar 28 23:48:02 2003
@@ -21,6 +21,7 @@
 # set of suffix rules for compiling C code, using $(HC) rather than $(CC)
 # and prepending "-optc" to $(CC_OPTS).  NB. must be done before including
 # boilerplate.mk below.
+# NB. this requires BootingFromHc to be set on the make command line!
 ifneq "$(BootingFromHc)" "YES"
 UseGhcForCc = YES
 endif
@@ -126,6 +127,10 @@
 ifeq "$(HaveLibMingwEx)" "YES"
 PACKAGE_CPP_OPTS += -DHAVE_LIBMINGWEX
 endif
+
+# have to get ExtraLdOptsGmp in through CPP to rts.conf.in (see hslibs/util/Makefile)
+comma = ,
+PACKAGE_CPP_OPTS += -DExtraLdOptsGmp='$(patsubst %,"%"$(comma),$(ExtraLdOptsGmp))'
 
 #-----------------------------------------------------------------------------
 # Include the Front panel code?
