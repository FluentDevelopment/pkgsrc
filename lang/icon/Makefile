# $NetBSD: Makefile,v 1.27 2003/07/10 13:46:04 jtb Exp $

DISTNAME=       	icon.v942src
PKGNAME=		icon-9.4.2
CATEGORIES=		lang
MASTER_SITES=		http://www.cs.arizona.edu/icon/ftp/packages/unix/
EXTRACT_SUFX=		.tgz

MAINTAINER=		tech-pkg@netbsd.org
HOMEPAGE=		http://www.cs.arizona.edu/icon/index.htm
COMMENT=		The Icon programming language

USE_BUILDLINK2=		YES
USE_X11=		YES
CONFIGURE_TARGET=	X-Configure
ALL_TARGET=		All
TEST_TARGET=		Test

.if (${MACHINE_ARCH} != "alpha") || (${MACHINE_ARCH} != "i386") || \
	(${MACHINE_ARCH} != "sparc") || (${MACHINE_ARCH} != "powerpc") || \
	(${MACHINE_ARCH} != "mipseb") || (${MACHINE_ARCH} != "mipsel") || \
	(${MACHINE_ARCH} != "m68k") || (${MACHINE_ARCH} != "vax")
PTHREAD_OPTS+=		require native
.include "../../mk/pthread.buildlink2.mk"
.endif

pre-build:
	${MKDIR} ${WRKSRC}/lib/icon

do-configure:
	cd ${WRKSRC}/config/netbsd; \
	${SED} -e 's:@X11BASE@:${X11BASE}:g' define.h.in \
		> define.h
	cd ${WRKSRC}; ${MAKE} ${CONFIGURE_TARGET} name=netbsd

do-install:
	cd ${WRKSRC}; ${SETENV} ${MAKE_ENV} ${MAKE} dest=${PREFIX} Install

.include "../../mk/bsd.pkg.mk"
