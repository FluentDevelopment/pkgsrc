$NetBSD: patch-au,v 1.1 2006/05/23 22:55:23 jdolecek Exp $

--- ext/wddx/wddx.c.orig	2006-05-24 00:39:34.000000000 +0200
+++ ext/wddx/wddx.c
@@ -399,7 +399,8 @@ static void php_wddx_serialize_string(wd
 					break;
 
 				default:
-					if (iscntrl((int)*(unsigned char *)p)) {
+					if (iscntrl((int)*(unsigned char *)p)
+					    && isascii((int)*(unsigned char *)p)) {
 						FLUSH_BUF();
 						sprintf(control_buf, WDDX_CHAR, *p);
 						php_wddx_add_chunk(packet, control_buf);
