$NetBSD: patch-ac,v 1.2 2006/11/07 17:24:39 tron Exp $

--- ext/curl/interface.c.orig	2006-10-11 00:12:59.000000000 +0100
+++ ext/curl/interface.c	2006-11-07 17:17:18.000000000 +0000
@@ -28,6 +28,18 @@
 
 #if HAVE_CURL
 
+#ifndef CURLOPT_PASSWDDATA
+#define CURLOPT_PASSWDDATA	0
+#endif
+
+#ifndef	CURLOPT_PASSWDFUNCTION
+#define	CURLOPT_PASSWDFUNCTION	0
+#endif
+
+#ifndef CURLOPT_FTPASCII
+#define	CURLOPT_FTPASCII	0
+#endif
+
 #include <stdio.h>
 #include <string.h>
 
@@ -1158,11 +1170,13 @@
 	dupch->handlers->read->fp = ch->handlers->read->fp;
 	dupch->handlers->read->fd = ch->handlers->read->fd;
 
+#if CURLOPT_PASSWDDATA != 0
 	if (ch->handlers->passwd) {
 		zval_add_ref(&ch->handlers->passwd);
 		dupch->handlers->passwd = ch->handlers->passwd;
 		curl_easy_setopt(ch->cp, CURLOPT_PASSWDDATA, (void *) dupch);
 	}
+#endif
 	if (ch->handlers->write->func_name) {
 		zval_add_ref(&ch->handlers->write->func_name);
 		dupch->handlers->write->func_name = ch->handlers->write->func_name;
