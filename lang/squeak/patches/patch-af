$NetBSD: patch-af,v 1.1 2001/08/23 21:18:31 fredb Exp $

*** ../src/unix/inisqueak.in	21 May 2001 03:43:46 -0000	1.1.1.1
--- ../src/unix/inisqueak.in	21 May 2001 04:05:03 -0000
***************
*** 56,64 ****
  CHANGES=Squeak${VERSION}.changes
  SOURCES=SqueakV${MAJOR}.sources
  
- # Sun's /bin/sh does not understand "test -e", but [/usr]/bin/test does
- test="`which test`"
- 
  startup="yes"
  
  if test ! -w .; then
--- 56,61 ----
***************
*** 81,90 ****
  {
    file="${1}"
    dir="${2}"
!   if ${test} ! -e ${1}; then
!     if ${test} -e ${2}/${1}; then
        echo "+ ${3} ${2}/${1} ."
                ${3} ${2}/${1} .
      else
        missing "${2}/${1}"
      fi
--- 78,89 ----
  {
    file="${1}"
    dir="${2}"
!   if test ! -f ${1} ; then
!     if test -f ${2}/${1} ; then
        echo "+ ${3} ${2}/${1} ."
                ${3} ${2}/${1} .
+       echo "+ chmod u+w ${1}"
+               chmod u+w ${1}
      else
        missing "${2}/${1}"
      fi
***************
*** 95,103 ****
  }
  
  install "${SOURCES}" "${SQDATADIR}"  "ln -s"
! install "${IMAGE}"   "${VSQDATADIR}" "cp -p"
! install "${CHANGES}" "${VSQDATADIR}" "cp -p"
! 
! echo "Running ${SQUEAK}"
  
! exec ${SQUEAK}
--- 94,100 ----
  }
  
  install "${SOURCES}" "${SQDATADIR}"  "ln -s"
! install "${IMAGE}"   "${VSQDATADIR}" "cp"
! install "${CHANGES}" "${VSQDATADIR}" "cp"
  
! echo "Done.  Now start 'squeak'!"
