$NetBSD: patch-ai,v 1.2 2004/03/29 02:46:18 perry Exp $

--- makemake.in.orig	2004-03-16 17:04:05.000000000 -0500
+++ makemake.in	2004-03-28 21:14:18.000000000 -0500
@@ -348,6 +348,7 @@
      GROFF='@GROFF@'                     # either 'groff' or ''
      GMALLOC='@GMALLOC@'                 # either 'gmalloc' or ''
      LIBS='@LIBS@'                       # list of system libraries
+     LDFLAGS='@LDFLAGS@'		 # additional options for linking
      LIBTERMCAP='@LIBTERMCAP@'           # either '-ltermcap' or '-lncurses'
      LIBICONV='@LIBICONV@'               # either '-liconv' or ''
      LIBSIGSEGV='@LTLIBSIGSEGV@'         # '-lsigsegv -L/usr/local/lib' or ''
@@ -1534,7 +1535,7 @@
 echol "exec_prefix = ${EXEC_PREFIX}"
 echol "bindir  = \$(exec_prefix)${NEXT_}bin"
 echol "shared  = \$(prefix)${NEXT_}share"
-echol "mandir  = \$(shared)${NEXT_}man"
+echol "mandir  = \$(prefix)${NEXT_}man"
 echol "docdir  = \$(shared)${NEXT_}doc"
 case "$fsstnd" in
   suse)
@@ -1611,12 +1612,14 @@
   echol "CPP = ${XCPP}"
   echol "CLFLAGS = ${XCLFLAGS}"
   echol "LIBS = ${LIBS}"
+  echol "LDFLAGS = ${LDFLAGS}"
   XCC="\$(CC)"
   XCPPFLAGS="\$(CPPFLAGS)"
   XCFLAGS="\$(CFLAGS)"
   XCPP="\$(CPP)"
   XCLFLAGS="\$(CLFLAGS)"
   LIBS="\$(LIBS)"
+  LDFLAGS="\$(LDFLAGS)"
 fi
 echol "X_LIBS = ${X_LIBS}"
 X_LIBS="\$(X_LIBS)"
@@ -2479,9 +2482,9 @@
   if [ $XCC_GCC = true -a -n "$SOLARIS_LINKING" ] ; then
     # Dynamically linking on Solaris 2.[23] is a pain.
     LIBGCC_DIR='`'"${XCC} -print-libgcc-file-name"' | sed -e '"'"'s,[^/]*$$,,'"'"'`'
-    echotab "${XCC} ${XCFLAGS} ${XCLFLAGS} \$(OBJECTS) modules${TOBJ} ${LIBS} -o lisp${LEXE} || /usr/ccs/bin/ld -V -dy -Bdynamic -Y P,/usr/ccs/lib:/usr/lib -Qy -o lisp${LEXE} ${LIBGCC_DIR}crt1.o ${LIBGCC_DIR}crti.o /usr/ccs/lib/values-Xa.o ${LIBGCC_DIR}crtbegin.o \$(OBJECTS) modules${TOBJ} -L${LIBGCC_DIR} -L/usr/ccs/bin ${LIBS} -lgcc -lc ${LIBGCC_DIR}crtend.o ${LIBGCC_DIR}crtn.o -lgcc"
+    echotab "${XCC} ${XCFLAGS} ${XCLFLAGS} ${LDFLAGS} \$(OBJECTS) modules${TOBJ} ${LIBS} -o lisp${LEXE} || /usr/ccs/bin/ld -V -dy -Bdynamic -Y P,/usr/ccs/lib:/usr/lib -Qy -o lisp${LEXE} ${LIBGCC_DIR}crt1.o ${LIBGCC_DIR}crti.o /usr/ccs/lib/values-Xa.o ${LIBGCC_DIR}crtbegin.o \$(OBJECTS) modules${TOBJ} -L${LIBGCC_DIR} -L/usr/ccs/bin ${LIBS} -lgcc -lc ${LIBGCC_DIR}crtend.o ${LIBGCC_DIR}crtn.o -lgcc"
   else
-    echotab "${XCC} ${XCFLAGS} ${XCLFLAGS} \$(OBJECTS) modules${TOBJ} ${LIBS} -o lisp${LEXE}"
+    echotab "${XCC} ${XCFLAGS} ${XCLFLAGS} ${LDFLAGS} \$(OBJECTS) modules${TOBJ} ${LIBS} -o lisp${LEXE}"
   fi
   if [ $HOS = unix ] ; then
     echotab "-sync"
