$NetBSD: patch-aa,v 1.8 2004/07/13 14:45:34 recht Exp $

--- libgc/dyn_load.c.orig	2004-05-18 20:42:19.000000000 +0200
+++ libgc/dyn_load.c	2004-07-13 16:35:00.000000000 +0200
@@ -80,6 +80,11 @@
 #   define l_name	lm_name
 #endif
 
+#if defined(NETBSD)
+#   include <machine/elf_machdep.h>
+#   define ELFSIZE ARCH_ELFSIZE
+#endif
+
 #if defined(LINUX) && defined(__ELF__) || defined(SCO_ELF) || \
     (defined(FREEBSD) && defined(__ELF__)) || defined(DGUX) || \
     (defined(NETBSD) && defined(__ELF__)) || defined(HURD)
@@ -91,7 +96,7 @@
 /* Newer versions of GNU/Linux define this macro.  We
  * define it similarly for any ELF systems that don't.  */
 #  ifndef ElfW
-#    ifdef __NetBSD__
+#    ifdef NETBSD
 #      if ELFSIZE == 32
 #        define ElfW(type) Elf32_##type
 #      else
