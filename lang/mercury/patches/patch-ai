$NetBSD: patch-ai,v 1.2 2003/03/10 04:09:04 jmc Exp $

--- profiler/Mmakefile.orig	Mon Feb 19 14:51:41 2001
+++ profiler/Mmakefile	Mon Mar 10 03:03:43 2003
@@ -24,7 +24,6 @@
 			-I$(TRACE_DIR) \
 			-I$(LIBRARY_DIR) \
 			-I$(RUNTIME_DIR) \
-			-I$(BOEHM_GC_DIR) \
 			-I$(BOEHM_GC_DIR)/include \
 		"
 MCD	=	$(M_ENV) $(MC) --generate-dependencies
@@ -50,7 +49,7 @@
 				echo $(BOEHM_GC_DIR)/libpar_gc_prof.$A ;; \
 			*.par*.gc*)	echo $(BOEHM_GC_DIR)/libpar_gc.$A ;; \
 			*.gc*.prof*)	echo $(BOEHM_GC_DIR)/libgc_prof.$A ;; \
-			*.gc*)		echo $(BOEHM_GC_DIR)/libgc.$A ;; \
+			*.gc*)		echo -L$(BOEHM_GC_DIR)/lib -Wl,${_OPSYS_RPATH_NAME}$(BOEHM_GC_DIR)/lib -lgc ;; \
 		    esac \
 		` $(MATH_LIB)
 MSL	=	MERCURY_SP_LIB_DIR=$(LIBRARY_DIR) $(SCRIPTS_DIR)/msl
