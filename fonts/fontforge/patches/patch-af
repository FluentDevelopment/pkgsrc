$NetBSD: patch-af,v 1.2 2006/04/14 08:45:06 adam Exp $

--- fontforge/openfontdlg.c.orig	2006-03-26 19:26:51.000000000 +0200
+++ fontforge/openfontdlg.c
@@ -140,8 +140,11 @@ return( true );
 }
 
 static int e_h(GWindow gw, GEvent *event) {
+    GRect r, size;
+    struct gfc_data *d;
+
     if ( event->type==et_close ) {
-	struct gfc_data *d = GDrawGetUserData(gw);
+	d = GDrawGetUserData(gw);
 	d->done = true;
     } else if ( event->type == et_map ) {
 	/* Above palettes */
@@ -150,16 +153,15 @@ static int e_h(GWindow gw, GEvent *event
 return( false );
     } else if ( event->type == et_mousemove ||
 	    (event->type==et_mousedown && event->u.mouse.button==3 )) {
-	struct gfc_data *d = GDrawGetUserData(gw);
+	d = GDrawGetUserData(gw);
 	if ( !WithinList(d,event) )
 	    GFileChooserPopupCheck(d->gfc,event);
     } else if (( event->type==et_mouseup || event->type==et_mousedown ) &&
 	    (event->u.mouse.button==4 || event->u.mouse.button==5) ) {
-	struct gfc_data *d = GDrawGetUserData(gw);
+	d = GDrawGetUserData(gw);
 return( GGadgetDispatchEvent((GGadget *) (d->gfc),event));
     } else if ( event->type == et_resize ) {
-	GRect r, size;;
-	struct gfc_data *d = GDrawGetUserData(gw);
+	d = GDrawGetUserData(gw);
 	GDrawGetSize(gw,&size);
 	GGadgetGetSize(d->gfc,&r);
 	GGadgetResize(d->gfc,size.width-2*r.x,r.height);
