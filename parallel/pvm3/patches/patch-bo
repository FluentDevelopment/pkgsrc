$NetBSD: patch-bo,v 1.3 2006/01/27 16:34:36 joerg Exp $

--- src/host.c.orig	2004-01-14 18:50:55.000000000 +0000
+++ src/host.c
@@ -978,7 +978,7 @@ iflist(alp, np)
 #ifdef OSIOCGIFCONF
 #if defined(IMA_RS6K) || defined(IMA_RS6KMP) || defined(IMA_SP2MPI) \
 			|| defined(IMA_AIX4SP2) || defined(IMA_AIX5SP2) \
-			|| defined(IMA_FREEBSD)
+			|| defined(IMA_FREEBSD) || defined(IMA_DRAGONFLY)
 		SIOCGIFCONF
 #else
 		OSIOCGIFCONF
@@ -1005,7 +1005,11 @@ iflist(alp, np)
 		}
 		/* On some FreeBSD systems: */
 		/* if (IFF_UP & req.ifr_flags) { */
+#ifdef IMA_DRAGONFLY
+		if (IFF_UP & req.ifr_flags) {
+#else
 		if (IFF_UP & req.ifr_ifru.ifru_flags) {
+#endif
 			if (nip > 0 && !(nip % 10))
 				iplist = TREALLOC(iplist, (nip + 10), struct in_addr);
 			iplist[nip++] =
