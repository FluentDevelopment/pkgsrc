# $NetBSD: Makefile,v 1.3 2003/01/10 19:29:29 jmmv Exp $
#

DISTNAME=	docbook-xml-4.2
WRKSRC=		${WRKDIR}
PKGREVISION=	1
CATEGORIES=	textproc
MASTER_SITES=	http://www.oasis-open.org/docbook/xml/4.2/
EXTRACT_SUFX=	.zip

MAINTAINER=	seb@netbsd.org
HOMEPAGE=	http://www.oasis-open.org/docbook
COMMENT=	XML DTD designed for computer documentation

USE_BUILDLINK2=	YES

INSTDIR=	${DESTDIR}${PREFIX}/share/xml
DTDDIR=		${INSTDIR}/docbook
ENTDIR=		${INSTDIR}/docbook/ent
DTDFILES=	calstblx.dtd dbcentx.mod dbgenent.mod dbhierx.mod \
		dbnotnx.mod dbpoolx.mod docbookx.dtd soextblx.dtd
MISCFILES=	README

do-build:
	${GREP} '^PUBLIC' ${WRKSRC}/docbook.cat > ${WRKSRC}/catalog.docbook

do-install:
	${INSTALL_DATA_DIR} ${DTDDIR}
	${INSTALL_DATA_DIR} ${ENTDIR}
	(cd ${WRKSRC}; ${INSTALL_DATA} ${DTDFILES} ${DTDDIR})
	(cd ${WRKSRC}/ent; ${INSTALL_DATA} *.ent ${ENTDIR})
	(cd ${WRKSRC};     ${INSTALL_DATA} ${MISCFILES} ${DTDDIR})
	${PREFIX}/bin/xmlcatmgr add "CATALOG" \
		"${PREFIX}/share/xml/docbook/catalog"
	${INSTALL_DATA} ${WRKSRC}/catalog.docbook ${DTDDIR}/catalog

.include "../../textproc/xmlcatmgr/buildlink2.mk"
.include "../../mk/bsd.pkg.mk"
