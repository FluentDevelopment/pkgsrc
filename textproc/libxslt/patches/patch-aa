$NetBSD: patch-aa,v 1.13 2004/04/01 15:15:19 xtraeme Exp $

--- doc/Makefile.in.orig	2004-04-01 17:11:01.000000000 +0200
+++ doc/Makefile.in	2004-04-01 17:11:07.000000000 +0200
@@ -83,7 +83,7 @@
 EXTRA_LIBS = @EXTRA_LIBS@
 F77 = @F77@
 FFLAGS = @FFLAGS@
-HTML_DIR = $(datadir)/doc
+HTML_DIR = $(datadir)/doc/html
 INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
@@ -196,7 +196,7 @@
 target_alias = @target_alias@
 
 # The name of the module.
-DOC_MODULE = libxslt-$(VERSION)
+DOC_MODULE = libxslt
 
 # The top-level SGML file.
 DOC_MAIN_XML_FILE = libxslt.xml
@@ -206,7 +206,7 @@
 
 # A file in win32 depends upon two of the doc files
 WIN32_DIR = $(top_srcdir)/win32
-TARGET_DIR = $(HTML_DIR)/$(DOC_MODULE)/html
+TARGET_DIR = $(HTML_DIR)/$(DOC_MODULE)
 PAGES = API.html bugs.html contribs.html FAQ.html docs.html \
          downloads.html help.html index.html intro.html news.html \
 	 xsltproc2.html
@@ -475,9 +475,9 @@
 $(EPAGES): EXSLT/exslt.html $(srcdir)/site.xsl
 	 -@(if [ ! -d EXSLT/html ] ; then \
 	   mkdir -p EXSLT/html ; fi )
-	 -@(if [ -x $(bindir)/xsltproc ] ; then \
+	 -@(if [ -x $(top_srcdir)/xsltproc/xsltproc ] ; then \
 	   echo "Rebuilding the HTML Web pages from exslt.html" ; \
-	   $(bindir)/xsltproc --nonet --html \
+	   $(top_srcdir)/xsltproc/xsltproc --nonet --html \
 	   	--stringparam dirname EXSLT/ \
 		--stringparam libname libexslt \
 		--stringparam logo_base ../ \
@@ -488,20 +488,20 @@
 	   $(bindir)/xmllint --nonet --valid --noout $(EPAGES) ; fi );
 
 ../NEWS: $(srcdir)/news.xsl news.html
-	-@(if [ -x $(bindir)/xsltproc ] ; then \
-	  $(bindir)/xsltproc --nonet $(srcdir)/news.xsl \
+	-@(if [ -x $(top_srcdir)/xsltproc/xsltproc ] ; then \
+	  $(top_srcdir)/xsltproc/xsltproc --nonet $(srcdir)/news.xsl \
 	    news.html > ../NEWS ; fi );
 
 libxslt.xsa: $(srcdir)/xsa.xsl news.html
-	-@(if [ -x $(bindir)/xsltproc ] ; then \
-	  $(bindir)/xsltproc --nonet $(srcdir)/xsa.xsl \
+	-@(if [ -x $(top_srcdir)/xsltproc/xsltproc ] ; then \
+	  $(top_srcdir)/xsltproc/xsltproc --nonet $(srcdir)/xsa.xsl \
 	    news.html > libxslt.xsa ; fi );
 
 $(APIPAGES): libxslt-refs.xml site.xsl api.xsl $(srcdir)/site.xsl \
 	     $(srcdir)/api.xsl
-	-@(if [ -x $(bindir)/xsltproc ] ; then \
+	-@(if [ -x $(top_srcdir)/xsltproc/xsltproc ] ; then \
 	  echo "Rebuilding the HTML API pages from libxslt-refs.xml" ; \
-	  $(bindir)/xsltproc --nonet --html \
+	  $(top_srcdir)/xsltproc/xsltproc --nonet --html \
 			     $(srcdir)/api.xsl \
 			     xslt.html ; fi );
 	-@(if [ -x $(bindir)/xmllint ] ; then \
@@ -509,9 +509,9 @@
 	  $(bindir)/xmllint --nonet --valid --noout API*.html; fi );
 
 $(EAPIPAGES): EXSLT/libexslt-refs.xml site.xsl api.xsl
-	-@(if [ -x $(bindir)/xsltproc ] ; then \
+	-@(if [ -x $(top_srcdir)/xsltproc/xsltproc ] ; then \
 	  echo "Rebuilding the HTML API pages from libexslt-refs.xml" ; \
-	  $(bindir)/xsltproc --nonet --html --output EXSLT/ \
+	  $(top_srcdir)/xsltproc/xsltproc --nonet --html --output EXSLT/ \
 			     --stringparam libname libexslt \
 			     --stringparam dirname EXSLT/ \
 			     --stringparam logo_base ../ \
@@ -519,9 +519,9 @@
 			     EXSLT/exslt.html ; fi );
 
 html/index.html: libxslt-api.xml $(srcdir)/newapi.xsl
-	-@(if [ -x $(bindir)/xsltproc ] ; then \
+	-@(if [ -x $(top_srcdir)/xsltproc/xsltproc ] ; then \
 	  echo "Rebuilding the HTML pages from the XSLT API" ; \
-	  $(bindir)/xsltproc --nonet \
+	  $(top_srcdir)/xsltproc/xsltproc --nonet \
 			     $(srcdir)/newapi.xsl libxslt-api.xml ; fi ); 
 	-@(if [ -x $(bindir)/xmllint ] ; then \
 	  echo "Validating the resulting XHTML pages" ; \
@@ -529,9 +529,9 @@
 
 EXSLT/html/index.html: EXSLT/libexslt-api.xml \
 	$(srcdir)/newapi.xsl
-	-@(if [ -x $(bindir)/xsltproc ] ; then \
+	-@(if [ -x $(top_srcdir)/xsltproc/xsltproc ] ; then \
 	  echo "Rebuilding the HTML pages from the EXSLT API" ; \
-	  $(bindir)/xsltproc --nonet --output EXSLT/ \
+	  $(top_srcdir)/xsltproc/xsltproc --nonet --output EXSLT/ \
 	  		     --stringparam libname libexslt \
 			     --stringparam dirname EXSLT/ \
 			     --stringparam logo_base ../../ \
@@ -553,22 +553,22 @@
 # Note that in the following, xmllint output is piped to xsltproc
 search.php: $(srcdir)/api.xsl $(srcdir)/site.xsl $(srcdir)/search.templ \
             $(srcdir)/search.xml $(srcdir)/search.php.inc
-	-@(if test -x $(bindir)/xmllint -a -x $(bindir)/xsltproc; then \
+	-@(if test -x $(bindir)/xmllint -a -x $(top_srcdir)/xsltproc/xsltproc; then \
 	   echo "Rebuilding search.php" ; \
 	   $(bindir)/xmllint --xinclude --nonet \
 	                      $(srcdir)/search.xml | \
-	   $(bindir)/xsltproc --nonet - search.templ \
+	   $(top_srcdir)/xsltproc/xsltproc --nonet - search.templ \
 			      > search.php ; else \
 	   echo "Unable to find xmllint or xsltproc in $(bindir)" ; fi)
 
 $(WIN32_DIR)/libxslt.def.src: libxslt-api.xml
-	-@(if [ -x $(bindir)/xsltproc ] ; then \
-	  $(bindir)/xsltproc -o $(WIN32_DIR)/libxslt.def.src \
+	-@(if [ -x $(top_srcdir)/xsltproc/xsltproc ] ; then \
+	  $(top_srcdir)/xsltproc/xsltproc -o $(WIN32_DIR)/libxslt.def.src \
 	  --nonet $(WIN32_DIR)/defgen.xsl libxslt-api.xml ; fi )
 
 $(WIN32_DIR)/libexslt.def.src: EXSLT/libexslt-api.xml
-	-@(if [ -x $(bindir)/xsltproc ] ; then \
-	  $(bindir)/xsltproc -o $(WIN32_DIR)/libexslt.def.src \
+	-@(if [ -x $(top_srcdir)/xsltproc/xsltproc ] ; then \
+	  $(top_srcdir)/xsltproc/xsltproc -o $(WIN32_DIR)/libexslt.def.src \
 	  --nonet $(WIN32_DIR)/defgen.xsl EXSLT/libexslt-api.xml ; fi )
 
 clean-local:
