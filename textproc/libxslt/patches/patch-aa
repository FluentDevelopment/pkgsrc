$NetBSD: patch-aa,v 1.12 2004/02/18 13:42:00 jmmv Exp $

--- doc/Makefile.in.orig	2004-02-16 16:00:13.000000000 +0100
+++ doc/Makefile.in
@@ -86,7 +86,7 @@ F77 = @F77@
 GCJ = @GCJ@
 GCJFLAGS = @GCJFLAGS@
 
-HTML_DIR = $(datadir)/doc
+HTML_DIR = $(datadir)/doc/html
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
 LDFLAGS = @LDFLAGS@
 LIBEXSLT_MAJOR_VERSION = @LIBEXSLT_MAJOR_VERSION@
@@ -141,7 +141,7 @@ install_sh = @install_sh@
 pythondir = @pythondir@
 
 # The name of the module.
-DOC_MODULE = libxslt-$(VERSION)
+DOC_MODULE = libxslt
 
 # The top-level SGML file.
 DOC_MAIN_XML_FILE = libxslt.xml
@@ -152,7 +152,7 @@ DOC_SOURCE_DIR = ..
 # A file in win32 depends upon two of the doc files
 WIN32_DIR = $(top_srcdir)/win32
 
-TARGET_DIR = $(HTML_DIR)/$(DOC_MODULE)/html
+TARGET_DIR = $(HTML_DIR)/$(DOC_MODULE)
 PAGES = API.html bugs.html contribs.html FAQ.html docs.html \
          downloads.html help.html index.html intro.html news.html \
 	 xsltproc2.html
@@ -384,9 +384,9 @@ eapi:	EXSLT/libexslt-api.xml EXSLT/libex
 web: $(PAGES) $(EPAGES)
 
 $(PAGES): xslt.html $(srcdir)/site.xsl
-	-@(if [ -x $(bindir)/xsltproc ] ; then \
+	-@(if [ -x $(top_srcdir)/xsltproc/xsltproc ] ; then \
 	  echo "Rebuilding the HTML Web pages from xslt.html" ; \
-	  $(bindir)/xsltproc --nonet --html $(srcdir)/site.xsl \
+	  $(top_srcdir)/xsltproc/xsltproc --nonet --html $(srcdir)/site.xsl \
 	    xslt.html > index.html ; fi )
 	-@(if [ -x $(bindir)/xmllint ] ; then \
 	  echo "Validating the HTML Web pages" ; \
@@ -395,9 +395,9 @@ $(PAGES): xslt.html $(srcdir)/site.xsl
 $(EPAGES): EXSLT/exslt.html $(srcdir)/site.xsl
 	 -@(if [ ! -d EXSLT/html ] ; then \
 	   mkdir -p EXSLT/html ; fi )
-	 -@(if [ -x $(bindir)/xsltproc ] ; then \
+	 -@(if [ -x $(top_srcdir)/xsltproc/xsltproc ] ; then \
 	   echo "Rebuilding the HTML Web pages from exslt.html" ; \
-	   $(bindir)/xsltproc --nonet --html \
+	   $(top_srcdir)/xsltproc/xsltproc --nonet --html \
 	   	--stringparam dirname EXSLT/ \
 		--stringparam libname libexslt \
 		--stringparam logo_base ../ \
@@ -408,20 +408,20 @@ $(EPAGES): EXSLT/exslt.html $(srcdir)/si
 	   $(bindir)/xmllint --nonet --valid --noout $(EPAGES) ; fi );
 
 ../NEWS: $(srcdir)/news.xsl news.html
-	-@(if [ -x $(bindir)/xsltproc ] ; then \
-	  $(bindir)/xsltproc --nonet $(srcdir)/news.xsl \
+	-@(if [ -x $(top_srcdir)/xsltproc/xsltproc ] ; then \
+	  $(top_srcdir)/xsltproc/xsltproc --nonet $(srcdir)/news.xsl \
 	    news.html > ../NEWS ; fi );
 
 libxslt.xsa: $(srcdir)/xsa.xsl news.html
-	-@(if [ -x $(bindir)/xsltproc ] ; then \
-	  $(bindir)/xsltproc --nonet $(srcdir)/xsa.xsl \
+	-@(if [ -x $(top_srcdir)/xsltproc/xsltproc ] ; then \
+	  $(top_srcdir)/xsltproc/xsltproc --nonet $(srcdir)/xsa.xsl \
 	    news.html > libxslt.xsa ; fi );
 
 $(APIPAGES): libxslt-refs.xml site.xsl api.xsl $(srcdir)/site.xsl \
 	     $(srcdir)/api.xsl
-	-@(if [ -x $(bindir)/xsltproc ] ; then \
+	-@(if [ -x $(top_srcdir)/xsltproc/xsltproc ] ; then \
 	  echo "Rebuilding the HTML API pages from libxslt-refs.xml" ; \
-	  $(bindir)/xsltproc --nonet --html \
+	  $(top_srcdir)/xsltproc/xsltproc --nonet --html \
 			     $(srcdir)/api.xsl \
 			     xslt.html ; fi );
 	-@(if [ -x $(bindir)/xmllint ] ; then \
@@ -429,9 +429,9 @@ $(APIPAGES): libxslt-refs.xml site.xsl a
 	  $(bindir)/xmllint --nonet --valid --noout API*.html; fi );
 
 $(EAPIPAGES): EXSLT/libexslt-refs.xml site.xsl api.xsl
-	-@(if [ -x $(bindir)/xsltproc ] ; then \
+	-@(if [ -x $(top_srcdir)/xsltproc/xsltproc ] ; then \
 	  echo "Rebuilding the HTML API pages from libexslt-refs.xml" ; \
-	  $(bindir)/xsltproc --nonet --html --output EXSLT/ \
+	  $(top_srcdir)/xsltproc/xsltproc --nonet --html --output EXSLT/ \
 			     --stringparam libname libexslt \
 			     --stringparam dirname EXSLT/ \
 			     --stringparam logo_base ../ \
@@ -439,9 +439,9 @@ $(EAPIPAGES): EXSLT/libexslt-refs.xml si
 			     EXSLT/exslt.html ; fi );
 
 html/index.html: libxslt-api.xml $(srcdir)/newapi.xsl
-	-@(if [ -x $(bindir)/xsltproc ] ; then \
+	-@(if [ -x $(top_srcdir)/xsltproc/xsltproc ] ; then \
 	  echo "Rebuilding the HTML pages from the XSLT API" ; \
-	  $(bindir)/xsltproc --nonet \
+	  $(top_srcdir)/xsltproc/xsltproc --nonet \
 			     $(srcdir)/newapi.xsl libxslt-api.xml ; fi ); 
 	-@(if [ -x $(bindir)/xmllint ] ; then \
 	  echo "Validating the resulting XHTML pages" ; \
@@ -449,9 +449,9 @@ html/index.html: libxslt-api.xml $(srcdi
 
 EXSLT/html/index.html: EXSLT/libexslt-api.xml \
 	$(srcdir)/newapi.xsl
-	-@(if [ -x $(bindir)/xsltproc ] ; then \
+	-@(if [ -x $(top_srcdir)/xsltproc/xsltproc ] ; then \
 	  echo "Rebuilding the HTML pages from the EXSLT API" ; \
-	  $(bindir)/xsltproc --nonet --output EXSLT/ \
+	  $(top_srcdir)/xsltproc/xsltproc --nonet --output EXSLT/ \
 	  		     --stringparam libname libexslt \
 			     --stringparam dirname EXSLT/ \
 			     --stringparam logo_base ../../ \
@@ -473,22 +473,22 @@ xsltproc.1: xsltproc.xml
 # Note that in the following, xmllint output is piped to xsltproc
 search.php: $(srcdir)/api.xsl $(srcdir)/site.xsl $(srcdir)/search.templ \
             $(srcdir)/search.xml $(srcdir)/search.php.inc
-	-@(if test -x $(bindir)/xmllint -a -x $(bindir)/xsltproc; then \
+	-@(if test -x $(bindir)/xmllint -a -x $(top_srcdir)/xsltproc/xsltproc; then \
 	   echo "Rebuilding search.php" ; \
 	   $(bindir)/xmllint --xinclude --nonet \
 	                      $(srcdir)/search.xml | \
-	   $(bindir)/xsltproc --nonet - search.templ \
+	   $(top_srcdir)/xsltproc/xsltproc --nonet - search.templ \
 			      > search.php ; else \
 	   echo "Unable to find xmllint or xsltproc in $(bindir)" ; fi)
 
 $(WIN32_DIR)/libxslt.def.src: libxslt-api.xml
-	-@(if [ -x $(bindir)/xsltproc ] ; then \
-	  $(bindir)/xsltproc -o $(WIN32_DIR)/libxslt.def.src \
+	-@(if [ -x $(top_srcdir)/xsltproc/xsltproc ] ; then \
+	  $(top_srcdir)/xsltproc/xsltproc -o $(WIN32_DIR)/libxslt.def.src \
 	  --nonet $(WIN32_DIR)/defgen.xsl libxslt-api.xml ; fi )
 
 $(WIN32_DIR)/libexslt.def.src: EXSLT/libexslt-api.xml
-	-@(if [ -x $(bindir)/xsltproc ] ; then \
-	  $(bindir)/xsltproc -o $(WIN32_DIR)/libexslt.def.src \
+	-@(if [ -x $(top_srcdir)/xsltproc/xsltproc ] ; then \
+	  $(top_srcdir)/xsltproc/xsltproc -o $(WIN32_DIR)/libexslt.def.src \
 	  --nonet $(WIN32_DIR)/defgen.xsl EXSLT/libexslt-api.xml ; fi )
 
 clean-local:
