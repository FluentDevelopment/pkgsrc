# $NetBSD: Makefile,v 1.19 2004/09/08 11:21:50 wiz Exp $
# FreeBSD Id: Makefile,v 1.6 1997/04/27 00:11:48 asami Exp
#

DISTNAME=		unroff-1.0
PKGNAME=		unroff-1.0.2
CATEGORIES=		textproc
MASTER_SITES=		${UNROFF_SITE}/dist/ \
			${UNROFF_SITE}/contrib/
DISTFILES=		${DISTNAME}${EXTRACT_SUFX} ${PATCH1} ${PATCH2}

MAINTAINER=		tech-pkg@NetBSD.org
HOMEPAGE=		http://www-rn.informatik.uni-bremen.de/software/unroff/
COMMENT=		Programmable troff translator with backend for HTML

DEPENDS=		elk>=3.0.2:../../lang/elk

EXTRACT_ONLY=		${DISTNAME}${EXTRACT_SUFX}
DIST_SUBDIR=		unroff

UNROFF_SITE=		http://www-rn.informatik.uni-bremen.de/software/unroff
PATCH1=			me-misc-patch
PATCH2=			misc-patch-2

pre-patch:
	@${ECHO_MSG} "===>  Applying distribution patches for ${PKGNAME}"
	@(cd ${_DISTDIR}; \
		if [ ${PATCH_DEBUG_TMP} = yes ]; then \
			${ECHO_MSG} "===>   Applying distribution patch ${PATCH1}" ; \
		fi; \
		${PATCH} ${PATCH_DIST_ARGS} -p0 < ${PATCH1}; \
		if [ ${PATCH_DEBUG_TMP} = yes ]; then \
			${ECHO_MSG} "===>   Applying distribution patch ${PATCH2}" ; \
		fi; \
		${PATCH} ${PATCH_DIST_ARGS} -p1 < ${PATCH2})

post-patch:
	@(cd ${WRKSRC} && ${FIND} . -name '*.orig' -print | ${XARGS} ${RM} -f)
	@(cd ${WRKSRC} && ${FIND} . -name '*.orig_dist' -print | ${XARGS} ${RM} -f)

.include "../../mk/bsd.pkg.mk"
