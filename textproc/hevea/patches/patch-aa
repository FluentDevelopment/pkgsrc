$NetBSD: patch-aa,v 1.6 2005/02/04 22:23:23 adrianp Exp $

--- Makefile.orig	2005-01-13 20:27:38.000000000 +0000
+++ Makefile	2005-01-13 20:39:04.000000000 +0000
@@ -1,12 +1,12 @@
 ################## Configuration parameters
 # Compile using ocamlopt, to use ocamlc set TARGET=byte
-TARGET=opt
+#TARGET=opt
 # Library directory of hevea
-LIBDIR=/usr/local/lib/hevea
+LIBDIR=${PREFIX}/share/hevea
 # Where to install programms
-BINDIR=/usr/local/bin
+BINDIR=${PREFIX}/bin
 # C preprocessor with proper options (don't ask)
-CPP=cpp -E -P
+CPP=${M4}
 #Some alternatives...
 #CPP=/lib/cpp -E -P  (Old fashioned Unix)
 #CPP=gcc -E -P -x c  (If you have gcc)
@@ -21,8 +21,8 @@
 OCAMLCI=$(OCAMLC)
 OCAMLOPT=${DIR}ocamlopt$(SUF)
 OCAMLLEX=${DIR}ocamllex$(SUF)
-INSTALL=cp
-MKDIR=mkdir -p
+INSTALL=${BSD_INSTALL_DATA}
+MKDIR=${MKDIR}
 
 ONLYESPONJA=emisc.cmo buff.cmo htmllex.cmo htmlparse.cmo htmltext.cmo pp.cmo util.cmo explode.cmo ultra.cmo esponja.cmo
 
@@ -50,30 +50,30 @@
 	$(MAKE) $(MFLAGS) TARGET=byte hevea.byte hacha.byte esponja.byte cutfoot-fra.html cutfoot-eng.html
 
 install-lib:
-	- $(MKDIR) $(LIBDIR)
-	$(INSTALL) hevea.sty cutfoot-fra.html cutfoot-eng.html footer.tex ${LIBDIR}
-	$(INSTALL) contents_motif.gif next_motif.gif previous_motif.gif ${LIBDIR}
-	$(INSTALL) $(ALLLIB) $(LIBDIR)
-	- $(MKDIR)  $(LIBDIR)/html
-	cd html ; $(INSTALL) $(HTMLLIB) $(LIBDIR)/html
-	- $(MKDIR)  $(LIBDIR)/text
-	cd text ; $(INSTALL) $(TEXTLIB) $(LIBDIR)/text
-	- $(MKDIR) $(LIBDIR)/info
-	cd info ; $(INSTALL) $(INFOLIB) $(LIBDIR)/info
+	$(BSD_INSTALL_DATA_DIR) $(LIBDIR)
+	$(BSD_INSTALL_DATA) hevea.sty cutfoot-fra.html cutfoot-eng.html footer.tex ${LIBDIR}
+	$(BSD_INSTALL_DATA) contents_motif.gif next_motif.gif previous_motif.gif ${LIBDIR}
+	$(BSD_INSTALL_DATA) $(ALLLIB) $(LIBDIR)
+	$(BSD_INSTALL_DATA_DIR)  $(LIBDIR)/html
+	cd html ; $(BSD_INSTALL_DATA) $(HTMLLIB) $(LIBDIR)/html
+	$(BSD_INSTALL_DATA_DIR)  $(LIBDIR)/text
+	cd text ; $(BSD_INSTALL_DATA) $(TEXTLIB) $(LIBDIR)/text
+	$(BSD_INSTALL_DATA_DIR) $(LIBDIR)/info
+	cd info ; $(BSD_INSTALL_DATA) $(INFOLIB) $(LIBDIR)/info
 
 
 
 install-opt: install-lib
-	$(INSTALL) hevea.opt $(BINDIR)/hevea
-	$(INSTALL) hacha.opt $(BINDIR)/hacha
-	$(INSTALL) esponja.opt $(BINDIR)/esponja
-	$(INSTALL) imagen $(BINDIR)
+	$(BSD_INSTALL_PROGRAM) hevea.opt $(BINDIR)/hevea
+	$(BSD_INSTALL_PROGRAM) hacha.opt $(BINDIR)/hacha
+	$(BSD_INSTALL_PROGRAM) esponja.opt $(BINDIR)/esponja
+	$(BSD_INSTALL_SCRIPT) imagen $(BINDIR)
 
 install-byte: install-lib
-	$(INSTALL) hevea.byte $(BINDIR)/hevea
-	$(INSTALL) hacha.byte $(BINDIR)/hacha
-	$(INSTALL) esponja.byte $(BINDIR)/esponja
-	$(INSTALL) imagen $(BINDIR)
+	$(BSD_INSTALL_SCRIPT) hevea.byte $(BINDIR)/hevea
+	$(BSD_INSTALL_SCRIPT) hacha.byte $(BINDIR)/hacha
+	$(BSD_INSTALL_SCRIPT) esponja.byte $(BINDIR)/esponja
+	$(BSD_INSTALL_SCRIPT) imagen $(BINDIR)
 
 
 hevea.byte: ${OBJS}
