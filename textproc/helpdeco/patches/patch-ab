$NetBSD: patch-ab,v 1.2 2004/09/22 17:00:33 ben Exp $

--- zapres.c.orig	Fri Sep 13 20:52:50 1996
+++ zapres.c
@@ -17,8 +17,10 @@ commercially. No fees may be charged on 
 
 #include <stdio.h>
 #include <stdlib.h>
-#include <dir.h>
+#include <sys/types.h>
+#include <sys/dir.h>
 #include <string.h>
+#include "compat.h"
 
 int backup(FILE *f,char *oldname)
 {
@@ -31,7 +33,7 @@ int backup(FILE *f,char *oldname)
     int result=0;
 
     _splitpath(oldname,drive,dir,fname,ext);
-    _makepath(path,drive,dir,fname,".BAK");
+    _makepath(path,drive,dir,fname,".bak");
     bak=fopen(path,"wb");
     if(bak)
     {
@@ -102,7 +104,7 @@ int main(int argc,char *argv[])
     else for(i=1;i<b;i++)
     {
 	_splitpath(argv[i],drive,dir,fname,ext);
-	if(!ext[0]) strcpy(ext,".BMP");
+	if(!ext[0]) strcpy(ext,".bmp");
 	_makepath(path,drive,dir,fname,ext);
 	f=fopen(path,"r+b");
 	if(f)
