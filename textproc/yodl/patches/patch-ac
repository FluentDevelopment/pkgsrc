$NetBSD: patch-ac,v 1.1 2003/02/18 23:43:55 jtb Exp $

--- scripts/yodl2texinfo-post.py.orig	Tue Feb 18 22:33:15 2003
+++ scripts/yodl2texinfo-post.py
@@ -28,8 +28,7 @@ import sys
 
 import getopt
 from string import *
-import regex
-import regsub
+import re
 import time
 
 def program_id ():
@@ -141,16 +140,16 @@ class Pre_texinfo_file (Menu):
 		return n
 
 	def eat_tag (this):
-		i = regex.search ('@TAGSTART@', this.s)
+		i = re.search ('@TAGSTART@', this.s)
 		j = 0
 		if i < 0:
 			return 0
-		j = regex.search ('@TAGEND@', this.s[i:])
+		j = re.search ('@TAGEND@', this.s[i:])
 		if j < 0:
 			raise 'huh?'
 		j = i + j + len ('@TAGEND@')
 		tag = this.s[i + len ('@TAGSTART@'):j - len ('@TAGEND@')]
-		k = regex.search (' ', tag[1:]) + 1
+		k = re.search (' ', tag[1:]) + 1
 		tag_name = tag[1:k]
 		tag_string = tag[k:len (tag) - 1]
 		while tag_string[:1] == ' ':
@@ -161,13 +160,13 @@ class Pre_texinfo_file (Menu):
 		# various other characters in node names too
 		# 
 		if urg_value:
-			tag_string = regsub.gsub (not_in_node_set, '-', tag_string)
-			tag_string = regsub.gsub ('--', '-', tag_string)
+			tag_string = re.sub (not_in_node_set, '-', tag_string)
+			tag_string = re.sub ('--', '-', tag_string)
 			# brr
-			tag_string = regsub.gsub ('--', '-', tag_string)
-			tag_string = regsub.gsub ('@code', '', tag_string)
-			tag_string = regsub.gsub ('@emph', '', tag_string)
-			tag_string = regsub.gsub ('@strong', '', tag_string)
+			tag_string = re.sub ('--', '-', tag_string)
+			tag_string = re.sub ('@code', '', tag_string)
+			tag_string = re.sub ('@emph', '', tag_string)
+			tag_string = re.sub ('@strong', '', tag_string)
 		if tag_name == 'menu':
 			this.default.top = 'Top'
 			n = this.new_node (i, tag_string)
@@ -214,23 +213,23 @@ class Pre_texinfo_file (Menu):
 	def create_node (this, n):
 		node = '@node '
 		set = ''
-		if not urg_value and  regex.match (not_in_node, n.name) != -1:
+		if not urg_value and  re.match (not_in_node, n.name) != -1:
 			set = set + "@set nodename " + n.name + "\n"
 			node = node + "@value{nodename}"
 		else:
 			node = node + n.name
 		if not simple_nodes:
-			if  not urg_value and regex.match (not_in_node, n.next) != -1:
+			if  not urg_value and re.match (not_in_node, n.next) != -1:
 				set = set + "@set nextname " + n.next + "\n"
 				node = node + ", @value{nextname}"
 			else:
 				node = node + ", " + n.next
-			if  not urg_value and regex.match (not_in_node, n.prev) != -1:
+			if  not urg_value and re.match (not_in_node, n.prev) != -1:
 				set = set + "@set prevname " + n.prev + "\n"
 				node = node + ", @value{prevname}"
 			else:
 				node = node + ", " + n.prev
-			if  not urg_value and regex.match (not_in_node, n.top) != -1:
+			if  not urg_value and re.match (not_in_node, n.top) != -1:
 				set = set + "@set topname " + n.top + "\n"
 				node = node + ", @value{topname}"
 			else:
@@ -249,7 +248,7 @@ class Pre_texinfo_file (Menu):
 			d = n.description
 			if not d:
 				d = n.name
-			if not urg_value and regex.match (not_in_node, n.name) != -1:
+			if not urg_value and re.match (not_in_node, n.name) != -1:
 				menu = menu + "@set nodename " + n.name + "\n"
 				menu = menu + "* @value{nodename}::"
 				menu = menu + ' ' * (TAB_POS - len (n.name)) + d + "\n"
@@ -309,7 +308,7 @@ class Pre_texinfo_file (Menu):
 		this.parse ()
 		this.xrefs ()
 		this.nodes_and_menus ()
-		this.s = regsub.gsub ('^\n\n', '\n', this.s)
+		this.s = re.sub ('^\n\n', '\n', this.s)
 		this.s = '\n' + this.s 
 		infotitle = ''
 		basename = os.path.basename (os.path.splitext (this.filename)[0])
