$NetBSD: patch-ab,v 1.3 2003/08/31 19:56:01 jdolecek Exp $

--- config.m4.orig	2003-08-31 19:07:34.000000000 +0200
+++ config.m4	2003-08-31 19:06:32.000000000 +0200
@@ -5,6 +5,9 @@
 PHP_ARG_ENABLE(wddx,whether to enable WDDX support,
 [  --enable-wddx           Enable WDDX support.])
 
+PHP_ARG_WITH(expat-dir, libexpat dir for WDDX,
+[  --with-expat-dir=DIR    libexpat dir for WDDX])
+
 if test "$PHP_WDDX" != "no"; then
   if test "$ext_shared" != "yes" && test "$enable_xml" = "no"; then
     AC_MSG_WARN(Activating XML)
@@ -12,4 +15,17 @@
   fi
   AC_DEFINE(HAVE_WDDX, 1, [ ])
   PHP_NEW_EXTENSION(wddx, wddx.c, $ext_shared)
+
+  if test "$PHP_EXPAT_DIR" != "no"; then
+    if test -f $PHP_EXPAT_DIR/lib/libexpat.a -o -f $PHP_EXPAT_DIR/lib/libexpat.s?; then
+      AC_DEFINE(HAVE_LIBEXPAT2,1,[ ])
+      PHP_ADD_LIBRARY_WITH_PATH(expat, $PHP_EXPAT_DIR/lib, WDDX_SHARED_LIBADD)
+      PHP_ADD_INCLUDE($PHP_EXPAT_DIR/include)
+    else
+      PHP_ADD_LIBRARY_WITH_PATH(xmlparse, $PHP_EXPAT_DIR/lib, WDDX_SHARED_LIBADD)
+      PHP_ADD_LIBRARY_WITH_PATH(xmltok, $PHP_EXPAT_DIR/lib, WDDX_SHARED_LIBADD)
+      PHP_ADD_INCLUDE($PHP_EXPAT_DIR/include)
+    fi
+  fi
+
 fi
