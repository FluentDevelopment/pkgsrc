$NetBSD: patch-al,v 1.4 2007/07/12 13:54:04 joerg Exp $

--- system.mk.orig	2007-07-08 09:37:38.000000000 +0000
+++ system.mk
@@ -7,7 +7,7 @@
 ## Installation paths
 ##
 
-PREFIX=/usr/local
+EXDIR=	${PREFIX}/share/examples/ion3
 
 # Unless you are creating a package conforming to some OS's standards, you
 # probably do not want to modify the following directories:
@@ -19,7 +19,7 @@ ETCDIR=$(PREFIX)/etc/ion3
 # Some .lua files and ion-* shell scripts
 SHAREDIR=$(PREFIX)/share/ion3
 # Manual pages
-MANDIR=$(PREFIX)/share/man
+MANDIR=$(PREFIX)/man
 # Some documents
 DOCDIR=$(PREFIX)/share/doc/ion3
 # Nothing at the moment
@@ -47,7 +47,7 @@ LOCALEDIR=$(PREFIX)/share/locale
 #PRELOAD_MODULES=1
 
 # Flags to link with libdl.
-DL_LIBS=-ldl
+DL_LIBS= ${BUILDLINK_LDADD.dl}
 
 
 ##
@@ -56,7 +56,7 @@ DL_LIBS=-ldl
 
 # If you have installed Lua 5.1 from the official tarball without changing
 # paths, this should do it.
-LUA_DIR=/usr/local
+LUA_DIR=${PREFIX}
 LUA_LIBS = -L$(LUA_DIR)/lib -llua
 LUA_INCLUDES = -I$(LUA_DIR)/include
 LUA=$(LUA_DIR)/bin/lua
@@ -114,9 +114,10 @@ DEFINES += -DCF_XFREE86_TEXTPROP_BUG_WOR
 # On some other systems you may something like this:
 #EXTRA_LIBS += -lintl
 #EXTRA_INCLUDES +=
+EXTRA_LIBS += -lintl
 
 # clock_gettime for monotonic time
-EXTRA_LIBS += -lrt
+EXTRA_LIBS += ${PKGSRC_LIBRT}
 
 
 ##
@@ -131,9 +132,9 @@ WARN=	-W -Wimplicit -Wreturn-type -Wswit
 	-Wtrigraphs -Wformat -Wchar-subscripts \
 	-Wparentheses -pedantic -Wuninitialized
 
-CFLAGS=-g -Os $(WARN) $(DEFINES) $(EXTRA_INCLUDES) $(INCLUDES)
-LDFLAGS=-g -Os $(EXTRA_LIBS) $(LIBS)
 EXPORT_DYNAMIC=-Xlinker --export-dynamic
+CFLAGS+= $(WARN) $(DEFINES) $(EXTRA_INCLUDES) $(INCLUDES) -fPIC
+LDFLAGS+= $(EXTRA_LIBS) $(LIBS)
 
 # The following options are mainly for development use and can be used
 # to check that the code seems to conform to some standards. Depending
