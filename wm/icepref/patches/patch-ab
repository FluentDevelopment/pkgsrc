$NetBSD: patch-ab,v 1.3 2005/02/04 13:00:10 rillig Exp $

--- icepref.orig	Thu Jan  6 00:16:04 2000
+++ icepref
@@ -1710,7 +1710,7 @@
 	    
 	    exec_path = commands.getoutput('whereis icewm')
 	    exec_path = split(exec_path) # split output of whereis into tokens at whitespace
-	    exec_path = exec_path[1] # get second token (should be executable)
+	    exec_path = exec_path[0] # get second token (should be executable)
 	    
 	    if DEBUG:
 		print 'The icewm execuatable is located at %s' % exec_path
@@ -1898,8 +1898,7 @@
 		# work on other non Linux systems.  Under Debian, this function requires
 		# the installation of the psmisc package.
 		
-		os.system('killall -HUP -q icewm')
-		os.system('killall -HUP -q icewm-gnome')
+		os.system('kill -HUP `pgrep icewm; pgrep icewm-gnome`')
 	
 	# this is the callback for the OK button
 	
@@ -2090,7 +2089,7 @@
 			button.show()
 			
 			# Disable the Restart button in the OS is BSD or the user is root
-			if item[0] == 'Restart' and ( self.os == 'BSD' or USER == 'root'):
+			if item[0] == 'Restart' and ( USER == 'root'):
 			    button.set_sensitive(FALSE)
 			    
 			bbox.pack_start(button, TRUE, FALSE, 0)
