$NetBSD: patch-ad,v 1.7 2001/10/05 12:18:58 wiz Exp $

--- src/main.c.orig	Thu Oct  4 13:39:18 2001
+++ src/main.c	Fri Oct  5 14:02:59 2001
@@ -28,6 +28,7 @@
 #include <sys/stat.h>
 #include <sys/types.h>
 #include <fcntl.h>
+#include <signal.h>
 
 #include <X11/Xlib.h>
 #include <X11/Xutil.h>
@@ -235,6 +236,12 @@
 {
     char *tmp, *ptr;
     char buf[16];
+    struct sigaction sa;
+
+    sa.sa_handler = SIG_DFL;
+    sigemptyset(&sa.sa_mask);
+    /* sa.sa_mask = 0; */
+    sigaction(SIGPIPE, &sa, NULL);
 
     if (multiHead) {
 	int len = strlen(DisplayName)+64;
