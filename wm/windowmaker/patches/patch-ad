$NetBSD: patch-ad,v 1.6 2001/08/18 18:13:28 tron Exp $

--- src/main.c.orig	Mon Jul 23 20:04:13 2001
+++ src/main.c	Sat Aug 18 19:31:43 2001
@@ -28,6 +28,7 @@
 #include <sys/stat.h>
 #include <sys/types.h>
 #include <fcntl.h>
+#include <signal.h>
 
 #include <X11/Xlib.h>
 #include <X11/Xutil.h>
@@ -218,6 +219,12 @@
 {
     char *tmp, *ptr;
     char buf[16];
+    struct sigaction sa;
+
+    sa.sa_handler = SIG_DFL;
+    sigemptyset(&sa.sa_mask);
+    /* sa.sa_mask = 0; */
+    sigaction(SIGPIPE, &sa, NULL);
 
     if (multiHead) {
 	int len = strlen(DisplayName)+64;
