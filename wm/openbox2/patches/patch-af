$NetBSD: patch-af,v 1.1 2006/01/02 22:05:38 joerg Exp $

--- util/epist/window.cc.orig	2006-01-02 21:54:28.000000000 +0000
+++ util/epist/window.cc
@@ -166,9 +166,12 @@ void XWindow::updateState() {
 
 
 void XWindow::updateDesktop() {
+  unsigned long tmp_desktop = _desktop;
   if (! _xatom->getValue(_window, XAtom::net_wm_desktop, XAtom::cardinal,
-                         static_cast<unsigned long>(_desktop)))
+                         tmp_desktop))
     _desktop = 0;
+  else
+    _desktop = tmp_desktop;
 }
 
 
