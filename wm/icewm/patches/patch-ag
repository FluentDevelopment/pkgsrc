$NetBSD: patch-ag,v 1.6 2003/05/03 16:38:14 jmmv Exp $

--- configure.orig	2002-06-30 18:05:20.000000000 +0200
+++ configure	2003-05-03 18:24:42.000000000 +0200
@@ -701,6 +701,7 @@
   --enable-movesize-fx    Move/Resize FX (experimental bloat)
   --disable-x86-asm       Don't use optimized x86 assembly code
   --disable-prefs         Disable configurable preferences
+  --disable-apm           Don't enable the APM status applet
   --disable-keyconf       Disable configurable keybindings
   --disable-menuconf      Disable configurable menus
   --disable-winoptions    Disable configurable window options
@@ -8305,6 +8306,19 @@
 
   fi
 
+# Check whether --enable-apm or --disable-apm was given.
+if test "${enable_apm+set}" = set; then
+  enableval="$enable_apm"
+
+fi;
+  if test "$enable_apm" != "no"; then
+
+cat >>confdefs.h <<\EOF
+#define CONFIG_APPLET_APM 1
+EOF
+
+  fi
+
 # Check whether --enable-keyconf or --disable-keyconf was given.
 if test "${enable_keyconf+set}" = set; then
   enableval="$enable_keyconf"
@@ -8382,10 +8396,6 @@
 EOF
 
 cat >>confdefs.h <<\EOF
-#define CONFIG_APPLET_APM 1
-EOF
-
-cat >>confdefs.h <<\EOF
 #define CONFIG_ADDRESSBAR 1
 EOF
 
@@ -8770,7 +8780,7 @@
       cfgdatadir=$with_cfgdir
     fi
 else
-   cfgdatadir='${sysconfdir}/X11/icewm'
+   cfgdatadir='${sysconfdir}'
 fi;
 
 # Check whether --with-docdir or --without-docdir was given.
