# $NetBSD: Makefile.common,v 1.7 2002/02/08 12:31:03 wiz Exp $
#

DISTNAME=	icewm-1.0.4
CATEGORIES=	x11 wm
MASTER_SITES=	http://download.sourceforge.net/icewm/ \
		ftp://ftp.fu-berlin.de/unix/X11/window-managers/icewm/
EXTRACT_SUFX=	.src.tar.gz

MAINTAINER=	packages@netbsd.org
HOMEPAGE=	http://icewm.sourceforge.net/

GNU_CONFIGURE=	# defined
USE_X11BASE=	# defined

FILESDIR=	${.CURDIR}/../../wm/icewm/files
PATCHDIR=	${.CURDIR}/../../wm/icewm/patches

.include "../../mk/bsd.prefs.mk"

.if ${OPSYS} == "NetBSD"
.if exists(/usr/include/machine/apmvar.h)
CPPFLAGS+=	-DCONFIG_APM
.endif
.endif

DOCDIR=		${PREFIX}/share/doc/icewm
HTMLDIR=	${PREFIX}/share/doc/html/icewm

post-extract:
	${CP} ${FILES} ${FILESDIR}/bsd-daemon.xpm ${WRKSRC}/lib/taskbar

post-install:
	${INSTALL_DATA_DIR} ${DOCDIR} ${HTMLDIR}
	for file in BUGS CHANGES COPYING FAQ README TODO; do \
		${INSTALL_DATA} ${WRKSRC}/$${file} ${DOCDIR}; \
	done
	${INSTALL_DATA} ${WRKSRC}/doc/icewm*.html ${HTMLDIR}
