$NetBSD: patch-aa,v 1.14 2004/11/18 12:31:29 markd Exp $

--- configure.ac.orig	2004-09-17 23:20:14.000000000 +1200
+++ configure.ac
@@ -171,7 +171,7 @@ AC_ARG_ENABLE([R-shlib],
 [want_R_shlib="${want_R_framework}"])
 AM_CONDITIONAL(WANT_R_SHLIB, [test "x${want_R_shlib}" = xyes])
 if test "${want_R_shlib}" = yes; then
-  LIBR="-L\$(R_HOME)/lib -lR"
+  LIBR="-Wl,-R${prefix}/lib/R/lib -L\$(R_HOME)/lib -lR"
 else
   LIBR=
 fi
@@ -491,9 +491,9 @@ AC_SUBST(LIBM)
 ## AC_CHECK_LIBM computes LIBM but does not add to LIBS, hence we do
 ## the following as well.
 AC_CHECK_LIB(m, sin)
-AC_CHECK_LIB(ncurses, main, [],
-             AC_CHECK_LIB(termcap, main, [],
-                          AC_CHECK_LIB(termlib, main)))
+AC_CHECK_LIB(termcap, main, [],
+             AC_CHECK_LIB(termlib, main, [],
+                          AC_CHECK_LIB(ncurses, main)))
 case "${host_os}" in
   darwin*)
     AM_CONDITIONAL(BUILD_DLFCN_DARWIN, true)
@@ -654,13 +654,6 @@ case "${host_cpu}" in
       R_PROG_CC_FLAG([-ieee_with_inexact],
                      R_SH_VAR_ADD(R_XTRA_CFLAGS, [-ieee_with_inexact]))
     fi
-    if test "${G77}" = yes; then
-      R_PROG_F77_FLAG([-mieee],
-                      R_SH_VAR_ADD(R_XTRA_FFLAGS, [-mieee]))
-    else
-      R_PROG_F77_FLAG([-fpe3],
-                      R_SH_VAR_ADD(R_XTRA_FFLAGS, [-fpe3]))
-    fi
     if test "${GXX}" = yes; then
       R_PROG_CXX_FLAG([-mieee],
                       R_SH_VAR_ADD(R_XTRA_CXXFLAGS, [-mieee]))
@@ -958,6 +951,7 @@ case "${host_os}" in
     fpicflags=
     ;;
   netbsd*)
+    fpicflags="-fPIC"
     if ${CPP} - -dM < /dev/null | grep __ELF__ >/dev/null ; then
       main_ldflags="-export-dynamic"
       shlib_ldflags="-shared"
