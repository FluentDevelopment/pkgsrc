$NetBSD: patch-ai,v 1.3 2007/09/24 20:56:46 drochner Exp $

--- liboctave/oct-time.cc.orig	2007-09-24 13:33:47.000000000 +0200
+++ liboctave/oct-time.cc
@@ -35,6 +35,8 @@ Software Foundation, Inc., 51 Franklin S
 #include <unistd.h>
 #endif
 
+#include <time.h>
+
 #if defined (OCTAVE_USE_WINDOWS_API)
 #include <windows.h>
 #undef min
@@ -354,6 +356,9 @@ octave_strptime::init (const std::string
   char *p = strsave (str.c_str ());
 
   char *q = oct_strptime (p, fmt.c_str (), &t);
+  /* fill in wday and yday */
+  t.tm_isdst = -1;
+  mktime(&t);
 
   if (q)
     nchars = q - p + 1;
