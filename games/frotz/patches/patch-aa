$NetBSD: patch-aa,v 1.3 2001/12/25 17:30:40 wiz Exp $

--- Makefile.orig	Sun May 20 23:16:39 2001
+++ Makefile
@@ -1,6 +1,6 @@
 #Define your C compiler.  I recommend gcc if you have it.
-CC = gcc
-#CC = cc
+#CC = gcc
+CC = cc
 
 # Define your optimization flags.  Most compilers understand -O and -O2,
 # Standard (note: Solaris on UltraSparc using gcc 2.8.x might not like this.)
@@ -10,46 +10,46 @@
 #-malign-jumps=2
 
 # Define where you want Frotz to be installed.  Usually this is /usr/local
-PREFIX = /usr/local
+#PREFIX = /usr/local
 #PREFIX =
 
 # Define where you want Frotz to look for frotz.conf.
-CONFIG_DIR = /usr/local/etc
+#CONFIG_DIR = /usr/local/etc
 #CONFIG_DIR = /etc
 #CONFIG_DIR = /usr/pkg/etc
-#CONFIG_DIR =
+CONFIG_DIR = ${PREFIX}/etc
 
 # Uncomment this if you want color support.  Usually this requires ncurses.
 COLOR_DEFS = -DCOLOR_SUPPORT
 
 # Uncomment this if you have an OSS soundcard driver and want classical
 # Infocom sound support.  Currently this works only for Linux.
-# SOUND_DEFS = -DOSS_SOUND
+SOUND_DEFS = -DOSS_SOUND
 
 # Uncomment the type of sound driver you want to use.
 # OSS
-#SOUND_LIB = -lossaudio
+SOUND_LIB = -lossaudio
 
 # This should point to the location of your curses.h or ncurses.h include
 # file if your compiler doesn't know about it.
-INCL = -I/usr/local/include
+#INCL = -I/usr/local/include
 #INCL = -I/usr/pkg/include
 #INCL = -I/usr/freeware/include
 #INCL = -I/5usr/include
-#INCL =
+INCL = -I${BUILDLINK_DIR}/include
 
 # This should define the location and name of whatever curses library you're
 # linking with.  Usually, this isn't necessary if /etc/ld.so.conf is set
 # up correctly.
-LIB = -L/usr/local/lib
+#LIB = -L/usr/local/lib
 #LIB = -L/usr/pkg/lib
 #LIB = -L/usr/freeware/lib
 #LIB = -L/5usr/lib
-#LIB =
+LIB = -L${BUILDLINK_DIR}/lib -Wl,-R${PREFIX}/lib
 
 # One of these must be uncommented, use ncurses if you have it. 
-CURSES = -lncurses	# Linux always uses ncurses.
-#CURSES = -lcurses
+#CURSES = -lncurses	# Linux always uses ncurses.
+CURSES = -lcurses
 
 # Comment this out if you're not using ncurses.
 CURSES_DEF = -DUSE_NCURSES_H
@@ -85,11 +85,12 @@
 COMP_DEFS = $(OPT_DEFS) $(COLOR_DEFS) $(SOUND_DEFS) $(SOUNDCARD) \
 	$(MEMMOVE_DEF)
 
-CFLAGS = $(OPTS) $(COMP_DEFS) $(INCL)
+CFLAGS += $(OPTS) $(COMP_DEFS)
 
+all: frotz
 
 $(BINNAME): soundcard.h $(OBJECTS)
-	$(CC) -o $(BINNAME)$(EXTENSION) $(OBJECTS) $(LIB) $(CURSES) $(SOUND_LIB)
+	$(CC) -o $(BINNAME)$(EXTENSION) $(LDFLAGS) $(OBJECTS) $(LIB) $(CURSES) $(SOUND_LIB)
 
 all: $(BINNAME)
 
