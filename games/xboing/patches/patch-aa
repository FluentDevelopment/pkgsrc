$NetBSD: patch-aa,v 1.5 2002/08/10 02:27:47 dmcmahill Exp $

--- Imakefile.orig	Fri Nov 22 02:28:46 1996
+++ Imakefile
@@ -24,23 +24,23 @@
 XCOMM This is the directory where the highscore, level & sound data will be 
 XCOMM placed. Default will be the current directory.
 
-    XBOING_DIR = .
+    XBOING_DIR = $(X11PREFIX)/share/xboing
 
 XCOMM These are some defines that must be set. Some may be overwritten in the
 XCOMM machine arch section.
 
-    XPMLIB 				= -L/usr/X11/lib -lXpm
-    XPMINCLUDE 			= -I/usr/X11/include/X11
+    XPMLIB 			= -L$(BUILDLINK_DIR)/lib -lXpm
+    XPMINCLUDE 			= -I$(BUILDLINK_DIR)/include/X11
     XBOINGINCLUDE 		= -I./include
-    LEVEL_INSTALL_DIR 	= $(XBOING_DIR)/levels
+    LEVEL_INSTALL_DIR 		= $(XBOING_DIR)/levels
     SOUNDS_DIR 			= $(XBOING_DIR)/sounds
     BACKUP_DIR 			= $(XBOING_DIR)/../backups
-    HIGH_SCORE_FILE 	= $(XBOING_DIR)/.xboing.scr
-    AUDIO_AVAILABLE 	= False
+    HIGH_SCORE_FILE 		= /var/games/xboing.scr
+    AUDIO_AVAILABLE 		= False
     AUDIO_SRC 			= audio/NOaudio.c
     AUDIO_INCLUDE 		=
     AUDIO_LIB 			=
-	CDEBUGFLAGS         = -g
+    CDEBUGFLAGS         	= -O -g
 
 XCOMM Uncomment this if you want to use ANY of the AUDIO sound systems
 #define COMPILE_IN_AUDIO    
@@ -60,11 +60,11 @@
     AUDIO_LIB 		= -laudio
 #endif /* HPArchitecture */
 
-#if defined(LinuxArchitecture) && defined(COMPILE_IN_AUDIO)
+#if defined(NetBSDArchitecture) && defined(COMPILE_IN_AUDIO)
     AUDIO_AVAILABLE = True
     AUDIO_SRC 		= audio/LINUXaudio.c
     AUDIO_INCLUDE 	=
-    AUDIO_LIB 		= 
+    AUDIO_LIB 		= -lossaudio
 #endif /* linux */
 
 #if defined(svr4) && defined(COMPILE_IN_AUDIO)
@@ -81,7 +81,7 @@
     AUDIO_LIB 		= -laudio
 #endif /* SGIArchitecture */
 
-#if defined(SparcArchitecture) && defined(COMPILE_IN_AUDIO)
+#if defined(SparcArchitecture) && defined(COMPILE_IN_AUDIO) && !defined(NetBSDArchitecture)
     AUDIO_AVAILABLE	= True
     AUDIO_SRC 		= audio/SUNaudio.c
 
@@ -132,8 +132,8 @@
         -DLEVEL_INSTALL_DIR=\"$(LEVEL_INSTALL_DIR)\" \
         -DAUDIO_AVAILABLE=\"$(AUDIO_AVAILABLE)\" \
         -DSOUNDS_DIR=\"$(SOUNDS_DIR)\" \
-        -DREADMEP_FILE=\"$(XBOING_DIR)/docs/problems.doc\"
-XCOMM   -DUSE_FLOCK=\"True\" \
+        -DREADMEP_FILE=\"$(XBOING_DIR)/problems.doc\" \
+        -DUSE_FLOCK=\"True\" \
 XCOMM   -DNEED_USLEEP=\"True\" \
 XCOMM   -DNO_LOCKING=\"True\" 
 
@@ -205,7 +205,8 @@
 	@:
 	@echo "Creating a highscore file " $(HIGH_SCORE_FILE)
 	@touch $(HIGH_SCORE_FILE);
-	@chmod a+rw $(HIGH_SCORE_FILE);
+	@chown bin:games $(HIGH_SCORE_FILE);
+	@chmod 0664 $(HIGH_SCORE_FILE);
 
 XCOMM I use this for my daily backup of my code.
 
