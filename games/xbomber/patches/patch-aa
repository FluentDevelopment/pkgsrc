$NetBSD: patch-aa,v 1.5 2003/11/05 12:47:01 agc Exp $

--- makefile.orig	1998-06-19 04:28:34.000000000 +0100
+++ makefile	2003-11-05 12:36:20.000000000 +0000
@@ -11,15 +11,22 @@
 
 # Makefile user-definable variables------------------------------------------
 
-CC=gcc
+INSTALLROOT= $(PREFIX)
+INSTALLBIN= $(INSTALLROOT)/bin
+SOUNDS= $(INSTALLROOT)/share/xbomber/sounds
+PIXMAPS= $(INSTALLROOT)/share/xbomber/pixmap
+LEVELS= $(INSTALLROOT)/share/xbomber/level
+BITMAPS= $(INSTALLROOT)/share/xbomber/bitmaps
+
+#CC=gcc
 MATHLIB=-lm
-CFLAGS=-I/usr/X11/include
+CFLAGS=-I$(PREFIX)/include -I${X11BASE}/include -DSOUNDS=\"$(SOUNDS)\" -DPIXMAPS=\"$(PIXMAPS)\" -DLEVELS=\"$(LEVELS)\" -DBITMAPS=\"$(BITMAPS)\"
 
 # Change this to "touch" if your system doesn't have the "strip" command:
 POSTPROCESS=strip
 
 # adjust according to target
-XLIB=-L/usr/X11/lib -lX11
+XLIB=-Wl,${RPATH_FLAG}${PREFIX}/lib -L$(PREFIX)/lib -Wl,${RPATH_FLAG}${X11BASE}/lib -L${X11BASE}/lib -lX11
 
 # uncomment for sunos/solaris
 #XLIB=-L/usr/openwin/lib -lX11
@@ -44,6 +51,19 @@
 		bitmaps/*.xbm pixmaps/*.ppm \
 		sounds/numbers/*.au levels/*.dat
 
+install: xbomber
+	install -s -c -o bin -g bin xbomber $(INSTALLBIN)/xbomber
+	mkdir -p $(LEVELS)
+	mkdir -p $(SOUNDS)/numbers
+	mkdir -p $(PIXMAPS)/jungle
+	mkdir -p $(BITMAPS)
+	install -c -o bin -g bin -m 0644 pixmaps/* $(PIXMAPS)
+	install -c -o bin -g bin -m 0644 bitmaps/* $(BITMAPS)
+	install -c -o bin -g bin -m 0644 jungle/* $(PIXMAPS)/jungle
+	install -c -o bin -g bin -m 0644 sounds/numbers/* $(SOUNDS)/numbers
+	install -c -o bin -g bin -m 0644 sounds/*.au $(SOUNDS)
+	install -c -o bin -g bin -m 0644 levels/* $(LEVELS)
+
 clean:
 	rm *.o
 
