$NetBSD: patch-aj,v 1.1 2006/01/18 21:00:48 adrianp Exp $

--- sendmail/main.c.orig	2004-06-17 17:39:21.000000000 +0100
+++ sendmail/main.c
@@ -649,7 +649,7 @@ main(argc, argv, envp)
 	}
 
 	/* prime the child environment */
-	setuserenv("AGENT", "sendmail");
+	setuserenviron("AGENT", "sendmail");
 
 	(void) sm_signal(SIGPIPE, SIG_IGN);
 	OldUmask = umask(022);
@@ -1318,9 +1318,9 @@ main(argc, argv, envp)
 	if (TimeZoneSpec == NULL)
 		unsetenv("TZ");
 	else if (TimeZoneSpec[0] != '\0')
-		setuserenv("TZ", TimeZoneSpec);
+		setuserenviron("TZ", TimeZoneSpec);
 	else
-		setuserenv("TZ", NULL);
+		setuserenviron("TZ", NULL);
 	tzset();
 
 	/* initialize mailbox database */
@@ -3446,14 +3446,14 @@ getextenv(envar)
 **		value -- the value to which it should be set.  If
 **			null, this is extracted from the incoming
 **			environment.  If that is not set, the call
-**			to setuserenv is ignored.
+**			to setuserenviron is ignored.
 **
 **	Returns:
 **		none.
 */
 
 void
-setuserenv(envar, value)
+setuserenviron(envar, value)
 	const char *envar;
 	const char *value;
 {
@@ -3488,7 +3488,7 @@ setuserenv(envar, value)
 
 	/* make sure it is in our environment as well */
 	if (putenv(p) < 0)
-		syserr("setuserenv: putenv(%s) failed", p);
+		syserr("setuserenviron: putenv(%s) failed", p);
 }
 /*
 **  DUMPSTATE -- dump state
