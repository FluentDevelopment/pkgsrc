$NetBSD: patch-an,v 1.1 2007/09/06 04:05:42 jlam Exp $

--- sqwebmail/newmsg.c.orig	2007-02-24 14:05:45.000000000 -0500
+++ sqwebmail/newmsg.c
@@ -72,12 +72,15 @@ static void newmsg_header(const char *la
 {
 int		hdrmaxlen=512;
 const char	*p=getarg("HDRMAXLEN");
+#if	HAVE_SQWEBMAIL_UNICODE
+const struct unicode_info *uiptr;
+#endif
 
 	if (p && (atoi(p) > hdrmaxlen))
 		hdrmaxlen=atoi(p);
 
 #if	HAVE_SQWEBMAIL_UNICODE
-const struct unicode_info *uiptr=unicode_find(sqwebmail_content_charset);
+	uiptr=unicode_find(sqwebmail_content_charset);
 #endif
 	printf("<tr><th align=\"right\"><p class=\"new-message-header\">"
 	       "<span class=\"new-message-header-%s\">%s</span></p></th>"
@@ -493,6 +496,7 @@ void newmsg_init(const char *folder, con
 	char	*draftmessagefilename;
 	const	char *p;
 	FILE	*fp;
+	int	wbnochangingfrom;
 	int	attachcnt=0;
 	char	*cursubj, *curto, *curcc, *curbcc, *curfrom, *curreplyto;
 
@@ -642,7 +646,7 @@ void newmsg_init(const char *folder, con
 	printf("<table width=\"100%%\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\" class=\"new-message-box\"><tr><td>\n");
 
 	printf("<table border=\"0\" width=\"100%%\">\n");
-	int wbnochangingfrom=auth_getoptionenvint("wbnochangingfrom");
+	wbnochangingfrom=auth_getoptionenvint("wbnochangingfrom");
 	if (wbnochangingfrom < 2)
 		newmsg_header_rfc822(fromlab, "headerfrom", curfrom,
 			*cgi("from") ? cgi("from"):
