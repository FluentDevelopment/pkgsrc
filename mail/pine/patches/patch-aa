$NetBSD: patch-aa,v 1.11 2001/10/11 15:35:01 martti Exp $

--- pine/makefile.gs5.orig	Tue Jul  3 19:03:55 2001
+++ pine/makefile.gs5	Mon Oct  8 10:04:40 2001
@@ -47,9 +47,9 @@
 RM=          rm -f
 LN=          ln -s
 MAKE=        make
-OPTIMIZE=    # -O
+OPTIMIZE=    -O2
 PROFILE=     # -pg
-DEBUG=       -g -DDEBUG
+DEBUG=       -DDEBUG # -g 	# XXX crashes on 'c'ompose w/o -DDEBUG
 
 CCLIENTDIR=  ../c-client
 PICODIR=     ../pico
@@ -71,10 +71,10 @@
 # leaving out the UCB compatibility includes and libraries.
 # LDCC= $(PICODIR)/cc5.sol
 
-STDLIBS=     -ltermlib
-LOCLIBS=     $(PICODIR)/libpico.a $(CCLIENTDIR)/c-client.a
-LIBS=        $(EXTRALIBES) $(LOCLIBS) $(LDAPLIBS) $(STDLIBS) \
-             `cat $(CCLIENTDIR)/LDFLAGS`
+STDLIBS=     -lssl -lcrypto -ltermlib
+LOCLIBS=     -lpico $(CCLIENTDIR)/c-client.a
+LIBS=        -L$(PREFIX)/lib -Wl,-R$(PREFIX)/lib/ $(EXTRALIBES) $(LOCLIBS) $(LDAPLIBS) $(STDLIBS) \
+              `cat $(CCLIENTDIR)/LDFLAGS`
 
 STDCFLAGS=   -DSV4 -DSYSTYPE=\"GSO\" -DMOUSE
 CFLAGS=      $(OPTIMIZE) $(PROFILE) $(DEBUG) $(EXTRACFLAGS) $(LDAPCFLAGS) \
@@ -95,7 +95,7 @@
 
 all:	pine rpload rpdump
 
-pine:  $(OFILES) $(LOCLIBS)
+pine:  $(OFILES)
 	echo "char datestamp[]="\"`date`\"";" > date.c
 	echo "char hoststamp[]="\"`uname -n`\"";" >> date.c
 	$(LDCC) $(LDFLAGS) $(CFLAGS) -o pine $(OFILES) date.c $(LIBS)
