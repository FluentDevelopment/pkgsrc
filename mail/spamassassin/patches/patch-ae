$NetBSD: patch-ae,v 1.7 2003/12/02 12:36:00 grant Exp $

--- spamd/spamd.raw.orig	2003-09-11 11:05:22.000000000 +1000
+++ spamd/spamd.raw
@@ -207,8 +207,8 @@ if ($opt{'auth-ident'}) {
 }
 
 # Check for server certs
-$opt{'server-key'}  ||= "$LOCAL_RULES_DIR/certs/server-key.pem";
-$opt{'server-cert'} ||= "$LOCAL_RULES_DIR/certs/server-cert.pem";
+$opt{'server-key'}  ||= "@SA_SSLCERTS@/server-key.pem";
+$opt{'server-cert'} ||= "@SA_SSLCERTS@/server-cert.pem";
 if ($opt{'ssl'}) {
   eval { require IO::Socket::SSL };
   die "fatal: SSL encryption requested, but IO::Socket::SSL is unavailable\n" if ($@);
@@ -1221,8 +1221,9 @@ sub restart_handler {
 use POSIX 'setsid';
 sub daemonize
 {
-    # Pretty command line in ps
-    $0 = join(' ', $ORIG_ARG0, @ORIG_ARGV) unless($opt{'debug'});
+    # no pretty 'ps' command line (easier for NetBSD rc script)
+    # # Pretty command line in ps
+    # $0 = join(' ', $ORIG_ARG0, @ORIG_ARGV) unless($opt{'debug'});
 
     # Be a nice daemon and chdir() to the root so we don't block any unmount attempts
     chdir '/' or die "Can't chdir to /: $!\n";
@@ -1341,7 +1342,7 @@ Options:
  -a, --auto-whitelist, --whitelist  Use auto-whitelists
  -c, --create-prefs                 Create user preferences files
  -C path, --configpath=path         Path for default config files
- --siteconfigpath=path              Path for site configs (def: /etc/mail/spamassassin)
+ --siteconfigpath=path              Path for site configs (def: @@LOCAL_RULES_DIR@@)
  -d, --daemonize                    Daemonize
  -h, --help                         Print usage message.
  -i ipaddr, --listen-ip=ipaddr,...  Listen on the IP ipaddr (default: 127.0.0.1)
@@ -1416,12 +1417,12 @@ Create user preferences files if they do
 =item B<-C> I<path>, B<--configpath>=I<path>
 
 Use the specified path for locating the distributed configuration files.
-Ignore the default directories (usually C</usr/share/spamassassin> or similar).
+Ignore the default directories (usually C<@@DEF_RULES_DIR@@> or similar).
 
 =item B<--siteconfigpath>=I<path>
 
 Use the specified path for locating site-specific configuration files.  Ignore
-the default directories (usually C</etc/mail/spamassassin> or similar).
+the default directories (usually C<@@LOCAL_RULES_DIR@@> or similar).
 
 =item B<-d>, B<--daemonize>
 
