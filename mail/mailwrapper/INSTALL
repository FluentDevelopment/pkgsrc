# $NetBSD: INSTALL,v 1.1 2004/07/23 23:01:23 jlam Exp $

MAILWRAPPEES="@MAILWRAPPEES@"
MAILWRAPPER="${PKG_PREFIX}/sbin/mailwrapper"
MAILER_CONF="${PKG_SYSCONFDIR}/mailer.conf"
MAILER_CONF_SAMPLE="${PKG_SYSCONFDIR}/mailer.conf.sendmail"

case ${STAGE} in
POST-INSTALL)
	for file in ${MAILWRAPPEES}; do
		if [ -f ${file} ]; then
			${ECHO} "Backing up ${file} as ${file}.mailwrappee."
			${MV} -f ${file} ${file}.mailwrappee
			${LN} -fs ${MAILWRAPPER} ${file}
		fi
	done
	if [ ! -f ${MAILER_CONF} ]; then
		for file in ${MAILWRAPPEES}; do
			if [ -f ${file}.mailwrappee ]; then
				${ECHO} "`${BASENAME} ${file}`	${file}.mailwrappee" >> ${MAILER_CONF}
				case ${file} in
				*/sendmail)
					${ECHO} "send-mail	${file}.mailwrappee" >> ${MAILER_CONF}
					;;
				esac
			fi
		done
	fi
	if [ ! -f ${MAILER_CONF} ]; then
		${CP} ${MAILER_CONF_SAMPLE} ${MAILER_CONF}
	fi
	${CAT} << EOF
===========================================================================
You may wish to customize the following files for ${PKGNAME}:

	${MAILER_CONF}
===========================================================================
EOF
	;;
esac
