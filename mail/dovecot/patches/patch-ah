$NetBSD: patch-ah,v 1.3 2007/01/29 22:01:07 bouyer Exp $

--- src/plugins/quota/quota-fs.c.orig	2007-01-28 22:35:32.000000000 +0100
+++ src/plugins/quota/quota-fs.c	2007-01-28 22:36:12.000000000 +0100
@@ -250,8 +250,8 @@
 		quota_set_error(_root->setup->quota, "Internal quota error");
 		return -1;
 	}
-	*value_r = (uint64_t)dqblk.dqb_curblocks * 1024 / DEV_BSIZE;
-	*limit_r = (uint64_t)dqblk.dqb_bsoftlimit * 1024 / DEV_BSIZE;
+	*value_r = (uint64_t)dqblk.dqb_curblocks * DEV_BSIZE / 1024;
+	*limit_r = (uint64_t)dqblk.dqb_bsoftlimit * DEV_BSIZE / 1024;
 #else
 	/* Solaris */
 	if (root->mount->fd == -1)
