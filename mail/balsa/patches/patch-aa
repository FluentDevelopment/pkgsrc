$NetBSD: patch-aa,v 1.11 2003/04/26 03:09:31 rh Exp $

--- configure.orig	2003-03-25 07:14:15.000000000 +1000
+++ configure
@@ -9287,7 +9287,7 @@ if test "${ac_cv_lib_pspell_new_pspell_m
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpspell -lstdc++ -lpspell-modules $LIBS"
+LIBS="-lpspell -lstdc++ $LIBS -lm"
 cat >conftest.$ac_ext <<_ACEOF
 #line $LINENO "configure"
 /* confdefs.h.  */
@@ -9302,11 +9302,11 @@ extern "C"
 #endif
 /* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
-char new_pspell_manager ();
+char new_aspell_speller ();
 int
 main ()
 {
-new_pspell_manager ();
+new_aspell_speller ();
   ;
   return 0;
 }
@@ -9340,7 +9340,7 @@ if test $ac_cv_lib_pspell_new_pspell_man
 #define HAVE_LIBPSPELL 1
 _ACEOF
 
-  LIBS="-lpspell $LIBS"
+  LIBS="-lpspell $LIBS -lm"
 
 else
 
@@ -14275,11 +14275,11 @@ extern "C"
 #endif
 /* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
-char iconv_open ();
+char libiconv_open ();
 int
 main ()
 {
-iconv_open ();
+libiconv_open ();
   ;
   return 0;
 }
@@ -14478,8 +14478,7 @@ fi;
 echo "$as_me:$LINENO: checking whether to build SSL support" >&5
 echo $ECHO_N "checking whether to build SSL support... $ECHO_C" >&6
 if test "x$with_ssl" != xno  ; then
-# openssl >=0.9.7 is pkg-config compatible.
-   if pkg-config openssl >&/dev/null; then
+   if pkg-config openssl >/dev/null 2>&1 ; then
       LIBS="$LIBS `pkg-config --libs openssl`"
       CPPFLAGS="`pkg-config --cflags-only-I openssl` $CPPFLAGS"
       echo "$as_me:$LINENO: result: yes" >&5
