$NetBSD: patch-ac,v 1.1 2007/03/07 17:33:51 gdt Exp $

--- pending.c.orig	2006-09-04 18:05:59.000000000 -0400
+++ pending.c
@@ -403,6 +403,7 @@ pending_textdump(stream)
 	int done = 0;
 	char textdate[DATELEN + 1];
 	struct tm tm;
+	time_t ti;
 
 	fprintf(stream, "\n\n#\n# greylisted tuples\n#\n");
 	fprintf(stream, "# Sender IP\t%s\t%s\tTime accepted\n", 
@@ -416,7 +417,8 @@ pending_textdump(stream)
 			    pending->p_addr, pending->p_from, 
 			    pending->p_rcpt, (long)pending->p_tv.tv_sec);
 		} else {
-			localtime_r((time_t *)&pending->p_tv.tv_sec, &tm);
+			ti = pending->p_tv.tv_sec;
+			localtime_r(&ti, &tm);
 			strftime(textdate, DATELEN, "%Y-%m-%d %T", &tm);
 		
 			fprintf(stream, "%s\t%s\t%s\t%ld # %s\n", 
