$NetBSD: patch-aa,v 1.4 2006/01/08 16:38:41 joerg Exp $

--- src/net.c.orig	2005-08-14 20:13:06.000000000 +0000
+++ src/net.c
@@ -43,7 +43,6 @@
 #define NI_MAXHOST 1025
 #endif
 #include <errno.h>
-extern int errno;
 #else /* UNIX */
 #include <unistd.h>
 #include <fcntl.h>
@@ -57,7 +56,6 @@ extern int h_errno;
 #include <arpa/inet.h>
 #include <netdb.h>
 #include <errno.h>
-extern int errno;
 #endif /* UNIX */
 
 #include "gettext.h"
@@ -325,7 +323,7 @@ void net_set_io_timeout(int socket, int 
      * en-us/winsock/winsock/setsockopt_2.asp
      * We activate these timeouts only for Windows systems that also have
      * getaddrinfo(), which means XP or newer, to work around this problem. */
-#if defined __MINGW32__ && !defined HAVE_GETADDRINFO
+#if (defined __MINGW32__ && !defined HAVE_GETADDRINFO) || defined __WINSOCK
     /* do nothing */
 #else
     struct timeval tv;
