# $NetBSD: Makefile,v 1.23 2005/01/24 20:15:58 tv Exp $

DISTNAME=	sharutils-4.2.1
PKGNAME=	g${DISTNAME}
PKGREVISION=	4
CATEGORIES=	archivers
MASTER_SITES=	${MASTER_SITE_GNU:=sharutils/}

MAINTAINER=	tech-pkg@NetBSD.org
HOMEPAGE=	http://www.gnu.org/software/sharutils/sharutils.html
COMMENT=	Allow packing and unpacking of shell archives

PKG_INSTALLATION_TYPES=	overwrite pkgviews

BUILD_USES_MSGFMT=	yes

USE_BUILDLINK3=		yes
USE_PKGLOCALEDIR=	yes
GNU_CONFIGURE=		yes

INSTALL_TARGET=		install install-man
USE_MAKEINFO=		YES
INFO_FILES=		remsync.info sharutils.info

CONFIGURE_ARGS+=	--disable-uucode

# gettext 0.11+ has renamed internal symbols, and gsharutils is
# being a very bad neighbor by using them directly.  To fix, force
# use of gettext >= 0.11, and rename the symbol in gsharutils.  -tv
#
BUILDLINK_DEPENDS.gettext+= gettext-lib>=0.11
CPPFLAGS+=		-D_nl_default_dirname=libintl_nl_default_dirname

.include "../../mk/bsd.prefs.mk"

.if defined(GNU_PROGRAM_PREFIX)
CONFIGURE_ARGS+=	--program-prefix=${GNU_PROGRAM_PREFIX}
.endif
PLIST_SUBST+=		GNU_PROGRAM_PREFIX=${GNU_PROGRAM_PREFIX}
BUILD_DEFS+=		GNU_PROGRAM_PREFIX

post-patch:
	@${TOUCH} ${TOUCH_FLAGS} ${WRKSRC}/po/sharutils.pot

.include "../../devel/gettext-lib/buildlink3.mk"
.include "../../mk/bsd.pkg.mk"
