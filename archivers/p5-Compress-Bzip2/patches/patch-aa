$NetBSD: patch-aa,v 1.2 2004/12/05 16:29:15 he Exp $

--- t/test.t.orig	Tue Feb 16 15:24:51 1999
+++ t/test.t
@@ -1,45 +1,26 @@
-#! /usr/bin/env perl
-##
-## vi:ts=4
-##
-##---------------------------------------------------------------------------##
-##
-
+use Test::More tests => 4;
 use Compress::Bzip2;
 
 my $SourceString;
 my $TargetString;
 my $TargetOutString;
-my $InputFile;
-my $OutputFile;
-
-if ($ARGV[0] ne '') { $InputFile=$ARGV[0]; }
-else { $InputFile='test.t'; }
-
-$OutputFile=">".$InputFile.".dek";
-
-if (-e $InputFile) {
-    open(INPUT, $InputFile);
-    while(<INPUT>) {
-	$SourceString.=$_;
-    }
-    print "\n\nDie Datei wurde eingelesen.\n";
-    print "Die OrginalDatei hat die Groesse: ".length($SourceString)."\n\n";
-
-    $TargetString=Compress::Bzip2::compress($SourceString);
 
-    print "Bzip-Com: ".length($TargetString)."\n";
-
-    $TargetOutString=Compress::Bzip2::decompress($TargetString);
-
-
-    print "Bzip-Dec: ".length($TargetOutString)."\n";
-
-    open(OUTPUT, $OutputFile);
-    print OUTPUT $TargetOutString;
+my $inputFile;
 
+if (-d 't') {
+    $InputFile='t/test.t';
+} else {
+    $InputFile='test.t';
 }
-else {
-    print "Datei ".$InputFile." konnte nicht geoeffnet werden.";
+
+open(INPUT, $InputFile);
+while(<INPUT>) {
+    $SourceString.=$_;
 }
-#Ende
+ok(length($SourceString), 'test file');
+$TargetString=Compress::Bzip2::compress($SourceString);
+ok($TargetString, 'compression');
+#    print "Bzip-Com ".length($TargetString)."\n";
+$TargetOutString=Compress::Bzip2::decompress($TargetString);
+ok($TargetOutString, 'decompression');
+ok(length($TargetOutString) eq length($SourceString), 'compress/decompress');
