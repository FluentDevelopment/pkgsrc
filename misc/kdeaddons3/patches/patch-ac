$NetBSD: patch-ac,v 1.1 2007/01/26 03:06:54 markd Exp $

kde svn revision 626814

--- konq-plugins/webarchiver/archivedialog.cpp.orig	2006-07-22 20:08:01.000000000 +1200
+++ konq-plugins/webarchiver/archivedialog.cpp
@@ -395,12 +395,15 @@ void ArchiveDialog::saveArchiveRecursive
 QString ArchiveDialog::handleLink(const KURL& _url, const QString& _link)
 {
    KURL url(getAbsoluteURL(_url, _link));
-   QString tarFileName;
 
-   if (m_state==Retrieving)
-      m_urlsToDownload.append(url);
-   else if (m_state==Saving)
-      tarFileName = m_downloadedURLDict[url.url()];
+   QString tarFileName;
+   if (kapp->authorizeURLAction("redirect", _url, url))
+   {
+       if (m_state==Retrieving)
+           m_urlsToDownload.append(url);
+       else if (m_state==Saving)
+           tarFileName = m_downloadedURLDict[url.url()];
+   }
 
    return tarFileName;
 }
