# $NetBSD: Makefile.common,v 1.7 2004/10/03 00:12:58 tv Exp $
#

DISTNAME=	celestia-${CELESTIA_VERS}
PKGREVISION=	2
CATEGORIES=	misc x11
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=celestia/}

MAINTAINER=	cesar_catrian@yahoo.com
HOMEPAGE=	http://www.shatters.net/celestia/

DISTINFO_FILE=	${.CURDIR}/../../misc/celestia/distinfo
PATCHDIR=	${.CURDIR}/../../misc/celestia/patches

CELESTIA_VERS=	1.3.0

USE_BUILDLINK3=	YES
GNU_CONFIGURE=	YES
USE_X11=	YES
USE_GNU_TOOLS+=	make
USE_LIBTOOL=	YES

CONFIGURE_ARGS+=	--includedir=${PREFIX}/include
CONFIGURE_ARGS+=	--with-lua=${BUILDLINK_PREFIX.lua}

CXXFLAGS=		-DPKG_SYSCONFDIR=\"\\\"${PKG_SYSCONFDIR}\\\"\"

.include "../../mk/bsd.prefs.mk"

.if exists(${X11BASE}/include/X11/extensions/Xinerama.h)
CONFIGURE_ARGS+=	--with-xinerama
.endif

.include "../../lang/lua/buildlink3.mk"
.include "../../mk/pthread.buildlink3.mk"

.if defined(PTHREAD_TYPE) && (${PTHREAD_TYPE} == "none")
CONFIGURE_ARGS+=	--disable-threading
.endif
