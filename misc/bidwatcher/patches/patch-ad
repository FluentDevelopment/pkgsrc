$NetBSD: patch-ad,v 1.3 2002/10/12 15:32:16 tron Exp $

--- bidwatcher.cpp.orig	Sat Oct 12 17:17:13 2002
+++ bidwatcher.cpp	Sat Oct 12 17:18:32 2002
@@ -582,7 +582,7 @@
   bidurl = new URL(ustring, proxyurl);
   g_free(ustring);
 
-  int returnVal = fetchURL(bidurl, &Buff, TIMEOUT);
+  int returnVal = fetchURL(bidurl, 1, &Buff, TIMEOUT);
   if (returnVal != 1) {
     if (returnVal == 2)
       showError("Could not obtain bid key: a network error occurred.");
@@ -662,7 +662,7 @@
 
   g_free(url);
   
-  retval = fetchURL(bidurl, &Buff, TIMEOUT);
+  retval = fetchURL(bidurl, 1, &Buff, TIMEOUT);
   
   if (retval != NET_SUCCESS) {
     sprintf(lineBuff,"Bid on %lu FAILED: Error %d connecting to eBay",
@@ -869,7 +869,7 @@
 	      "ReturnUserEmail&requested=%s&userid=%s&pass=%s&iid=%s",
 	      name,authID,authPASS,auctionid);
       URL *emailurl=new URL(WebPage,proxyurl);
-      int err = fetchURL(emailurl,&Buff,TIMEOUT);
+      int err = fetchURL(emailurl,0,&Buff,TIMEOUT);
       delete(emailurl);
       if ((err == 2) || (err == 4) || (strlen(Buff) < 1000)) {
 	  showError("Could not get email address: Network error");
@@ -3533,7 +3533,7 @@
 	  "MfcISAPICommand=ViewBidItems&userid=%s&completed=0&all=1&rows=200",
 	  authID);
   URL *bidsurl = new URL(WebPage, proxyurl);
-  returnVal = fetchURL(bidsurl, &Buff, TIMEOUT);
+  returnVal = fetchURL(bidsurl, 0, &Buff, TIMEOUT);
   delete(bidsurl);
   blackLED();
   showStatus("");
@@ -3613,7 +3613,7 @@
   sprintf(WebPage, "http://cgi6.ebay.com/aw-cgi/eBayISAPI.dll?"
 	  "ViewListedItems&userid=%s&completed=0&sort=3&since=-1", authID);
   URL *listingurl = new URL(WebPage, proxyurl);
-  returnVal = fetchURL(listingurl, &Buff, TIMEOUT);
+  returnVal = fetchURL(listingurl, 0, &Buff, TIMEOUT);
   delete listingurl;
   blackLED();
   showStatus("");
@@ -3828,7 +3828,7 @@
     infourl = new URL(urlstring, proxyurl);
 
   greenLED();
-  returnVal = fetchURL(infourl, &HtmlBuff, TIMEOUT);
+  returnVal = fetchURL(infourl, 0, &HtmlBuff, TIMEOUT);
 
   if (returnVal == NET_NETERROR || returnVal == NET_TIMEOUT) { 
     // maybe proxy settings changed
@@ -3836,7 +3836,7 @@
       delete(infourl);
     infourl = new URL(urlstring, proxyurl);
  
-    returnVal = fetchURL(infourl, &HtmlBuff, TIMEOUT);
+    returnVal = fetchURL(infourl, 0, &HtmlBuff, TIMEOUT);
   }
 
   g_free(urlstring);
@@ -3905,7 +3905,7 @@
       greenLED();
       gettimeofday(&tm_start, NULL);
       
-      returnVal = fetchURL(timesyncurl, &HtmlBuff, TIMEOUT);
+      returnVal = fetchURL(timesyncurl, 0, &HtmlBuff, TIMEOUT);
 
       gettimeofday(&tm_end, NULL);
       t1 = (tm_end.tv_sec + 0.000001 * tm_end.tv_usec)
