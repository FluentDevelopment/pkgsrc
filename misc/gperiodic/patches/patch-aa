$NetBSD: patch-aa,v 1.2 2003/05/10 01:31:26 jtb Exp $

--- Makefile.orig
+++ Makefile
@@ -1,13 +1,11 @@
-CC=gcc
-CFLAGS=`pkg-config --cflags gtk+-2.0` -I. -DG_DISABLE_DEPRECATED -DGDK_DISABLE_DEPRECATED -DGDK_PIXBUF_DISABLE_DEPRECATED -DGTK_DISABLE_DEPRECATED
+CC?=gcc
+CFLAGS+=`pkg-config --cflags gtk+-2.0` -I. -DG_DISABLE_DEPRECATED -DGDK_DISABLE_DEPRECATED -DGDK_PIXBUF_DISABLE_DEPRECATED -DGTK_DISABLE_DEPRECATED
 LIBS=`pkg-config --libs gtk+-2.0`
 
-.c.o:
-	$(CC) -c $(CFLAGS) $(CPPFLAGS) $<
+all:	gperiodic
 
 gperiodic: gperiodic.o
 	$(CC) $(CFLAGS) -o gperiodic gperiodic.o $(LIBS)
-	strip gperiodic
 
 gpdata.o: gpdata.c gperiodic.h
 
@@ -17,10 +15,11 @@
 	rm *.o gperiodic
 
 install:
-	make -C po/ install enable_nls=1
-	cp gperiodic /usr/local/bin
-	cp gperiodic.desktop /usr/share/applications
-	cp gperiodic.png /usr/share/pixmaps
+	cd po && $(MAKE) install enable_nls=1
+	$(BSD_INSTALL_PROGRAM) gperiodic $(PREFIX)/bin
+	$(BSD_INSTALL_DATA_DIR) $(PREFIX)/share/gnome/apps/Applications
+	$(BSD_INSTALL_DATA) gperiodic.desktop $(PREFIX)/share/gnome/apps/Applications
+	$(BSD_INSTALL_DATA) gperiodic.png $(PREFIX)/share/pixmaps
 
 uninstall:
 	rm /usr/local/bin/gperiodic
