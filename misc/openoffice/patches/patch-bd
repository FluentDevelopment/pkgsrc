$NetBSD: patch-bd,v 1.2 2002/12/25 16:20:18 jdolecek Exp $

--- ../product/util/makefile.mk.orig	Thu Oct 11 12:10:42 2001
+++ ../product/util/makefile.mk	Tue Dec 24 17:37:53 2002
@@ -101,6 +101,16 @@
 STLPORTLIBNAME=libstlport_gcc.so
 BINDINGDLL=gcc2_uno
 
+.ELIF "$(OS)"=="NETBSD"
+###########
+# NETBSD
+###########
+DESTDIRBIN=$(DESTDIR)$/netbsd$/bin
+DESTDIRLIB=$(DESTDIR)$/netbsd$/lib
+DESTDIRDLL=$(DESTDIRLIB)
+STLPORTLIBNAME=libstlport_gcc.so
+BINDINGDLL=gcc2_uno
+
 .ELIF "$(OS)"=="WNT"
 ###############
 # WINDOWS
@@ -341,30 +351,30 @@
 	$(MKDIRHIER)	$@
 
 $(DESTDIRBIN)$/udkapi.rdb : $(BINOUT)$/udkapi.rdb $(DESTDIRBIN)
-	$(GNUCOPY) -p $(BINOUT)$/udkapi.rdb $@
+	$(GNUCOPY) -fp $(BINOUT)$/udkapi.rdb $@
 
 $(DESTDIRBIN)$/%$(EXEPOSTFIX) : $(BINOUT)$/%$(EXEPOSTFIX) $(DIRLIST)
-	$(GNUCOPY) -p $(BINOUT)$/$(@:f) $@
+	$(GNUCOPY) -fp $(BINOUT)$/$(@:f) $@
 
 
 .IF "$(STLPORTDEST)" != ""
 #OOo build environment
 $(STLPORTDEST) : $(STLPORTOUT) $(DIRLIST)
- 	$(GNUCOPY) -p $(STLPORTOUT) $@
+ 	$(GNUCOPY) -fp $(STLPORTOUT) $@
 .ENDIF
 
 $(DESTDIRDLL)$/%$(MY_DLLPOSTFIX) : $(DLLOUT)$/%$(MY_DLLPOSTFIX) $(DIRLIST)
-	$(GNUCOPY) -p $(DLLOUT)$/$(@:f) $@
+	$(GNUCOPY) -fp $(DLLOUT)$/$(@:f) $@
 
 $(DESTDIRDLL)$/%$(MY_VERSION_DLLPOSTFIX) : $(DLLOUT)$/%$(MY_VERSION_DLLPOSTFIX) $(DIRLIST)
-	$(GNUCOPY) -p $(DLLOUT)$/$(@:f) $@
+	$(GNUCOPY) -fp $(DLLOUT)$/$(@:f) $@
 
 $(DESTDIRDLL)$/%$(MY_VERSION_LINKPOSTFIX) : $(DESTDIRDLL)$/%$(MY_VERSION_DLLPOSTFIX) $(DIRLIST)
-	+ln -s $(@:f)$(MY_VERSION_LINKTARGETPOSTFIX) $@
-	+ln -s $(@:f)$(MY_VERSION_LINKTARGETPOSTFIX) $(@:db)
+	+ln -sf $(@:f)$(MY_VERSION_LINKTARGETPOSTFIX) $@
+	+ln -sf $(@:f)$(MY_VERSION_LINKTARGETPOSTFIX) $(@:db)
 
 $(DESTDIRJAR)$/%.jar : $(BINOUT)$/%.jar $(DIRLIST)
-	$(GNUCOPY) -p $(BINOUT)$/$(@:f) $@
+	$(GNUCOPY) -fp $(BINOUT)$/$(@:f) $@
 
 $(DESTDIRXML)$/%.xml : $(XMLOUT)$/%.xml $(DIRLIST)
 	$(MY_TEXTCOPY) $(MY_TEXTCOPY_SOURCEPRE) $? $(MY_TEXTCOPY_TARGETPRE) $@
@@ -373,7 +383,7 @@
 	$(MY_TEXTCOPY) $(MY_TEXTCOPY_SOURCEPRE) $(XMLOUT)$/module-description.dtd $(MY_TEXTCOPY_TARGETPRE) $@
 
 $(DESTDIRLIB)$/%.lib : $(LIBOUT)$/%.lib $(DIRLIST)
-	$(GNUCOPY) -p $(LIBOUT)$/$(@:f) $@
+	$(GNUCOPY) -fp $(LIBOUT)$/$(@:f) $@
 
 $(DESTDIRSETTINGS)$/%.mk : $(PRJ)$/settings$/%.mk $(DIRLIST)
 	+-rm -f $@ >& $(NULLDEV)
@@ -385,7 +395,7 @@
 	$(MY_TEXTCOPY) $(MY_TEXTCOPY_SOURCEPRE) $? $(MY_TEXTCOPY_TARGETPRE) $@
 
 $(DESTDIREXAMPLES)$/README : $(PRJ)$/examples$/README
-	$(GNUCOPY) -p $(PRJ)$/examples$/README $@
+	$(GNUCOPY) -fp $(PRJ)$/examples$/README $@
 
 $(DESTDIRIDL)$/% : $(IDLOUT)$/%
 	+-rm -f $@
