$NetBSD: patch-ae,v 1.1 2006/05/21 11:17:28 rillig Exp $

GNU Make does not strip the line-continuation backslashes before
executing the shell. This confuses Perl.

In addition, it is bad style to pipe directly into the target file in
Make, since in a second run Make will assume the target file has been
updated properly.

--- main/Makefile.in.orig	2004-10-27 11:06:43.000000000 +0200
+++ main/Makefile.in	2006-05-21 13:06:28.000000000 +0200
@@ -72,6 +72,6 @@ enquiry.o: archtable.h
 
 archtable.h: $(top_srcdir)/archtable
 	expand $< | \
-	 perl -ne 'print "  { \"$$1\",$$2\"$$3\",$$4\"$$5\" },\n" \
-		   if m/^(?!\s*#)\s*(\S+)(\s+)(\S+)(\s+)(\S+)\s*$$/' \
-		>$@
+	 perl -ne 'print "  { \"$$1\",$$2\"$$3\",$$4\"$$5\" },\n" if m/^(?!\s*#)\s*(\S+)(\s+)(\S+)(\s+)(\S+)\s*$$/' \
+		>$@.tmp
+	mv $@.tmp $@
