$NetBSD: patch-aa,v 1.7 2006/06/06 21:11:29 joerg Exp $

--- udf.c.orig	2006-06-06 21:05:41.000000000 +0000
+++ udf.c
@@ -5323,7 +5323,9 @@ static int read_fid_stream(struct udf_no
 	/* create resulting dirent structure */
 	fid_name = (char *) fid->data + udf_rw16(fid->l_iu);
 	dirent->d_fileno = udf_rw32(fid->icb.impl.im_used.unique_id);	/* only 32 bits salvageable */
+#if !defined(__DragonFly__)
 	dirent->d_reclen = sizeof(struct dirent);
+#endif
 	dirent->d_type   = DT_UNKNOWN;
 	udf_to_unix_name(dirent->d_name, fid_name, fid->l_fi, &dir_node->udf_log_vol->log_vol->desc_charset);
 	if (fid->file_char & UDF_FILE_CHAR_DIR) dirent->d_type = DT_DIR;
