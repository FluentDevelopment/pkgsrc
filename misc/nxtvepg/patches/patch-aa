$NetBSD: patch-aa,v 1.9 2002/11/24 17:23:40 magick Exp $

--- Makefile.orig	Tue Nov 19 20:03:24 2002
+++ Makefile
@@ -33,34 +33,34 @@
 else
 
 ROOT    =
-prefix  = /usr/local
+prefix  = ${PREFIX}
 exec_prefix = ${prefix}
 bindir  = $(ROOT)${exec_prefix}/bin
 mandir  = $(ROOT)${prefix}/man/man1
-resdir  = $(ROOT)/usr/X11R6/lib/X11
+resdir  = $(ROOT)${X11PREFIX}/lib/X11
 
 # if you have perl set the path here, else just leave it alone
-PERL    = /usr/bin/perl
+PERL    = ${LOCALBASE}/perl
 
 # select Tcl/Tk version
 TCL_VER = 8.3
 
-LDLIBS  = -ltk$(TCL_VER) -ltcl$(TCL_VER) -L/usr/X11R6/lib -lX11 -lXmu -lm -ldl
+LDLIBS  = -ltk83 -ltcl83 -lX11 -lXmu -lm
 
 # use static libraries for debugging only
 #LDLIBS += -Ldbglib -static
 
-INCS   += -I. -I/usr/X11R6/include
+INCS   += -I. -I${X11BASE}/include
 # path to Tcl/Tk headers, if not properly installed
 #INCS   += -I/usr/local/tcl/tcl8.0/generic -I/usr/local/tcl/tk8.0/generic
 
 # path to Tcl/Tk script library (Tk is usually in X11/lib/tk#.#)
-DEFS   += -DTK_LIBRARY_PATH=\"/usr/lib/tk$(TCL_VER)\"
-DEFS   += -DTCL_LIBRARY_PATH=\"/usr/lib/tcl$(TCL_VER)\"
+DEFS   += -DTK_LIBRARY_PATH=\"$(LOCALBASE)/lib/tk8.3\"  
+DEFS   += -DTCL_LIBRARY_PATH=\"$(LOCALBASE)/lib/tcl8.3\"  
 
 # enable use of multi-threading
-DEFS   += -DUSE_THREADS
-LDLIBS += -lpthread
+#DEFS   += -DUSE_THREADS
+#LDLIBS += -lpthread
 
 # enable use of daemon and client/server connection
 DEFS   += -DUSE_DAEMON
@@ -71,8 +71,8 @@
 #USER_DBDIR  = .nxtvdb
 #DEFS       += -DEPG_DB_ENV=\"HOME\" -DEPG_DB_DIR=\"$(USER_DBDIR)\"
 ifndef USER_DBDIR
-SYS_DBDIR    = /usr/tmp/nxtvdb
-DEFS        += -DEPG_DB_DIR=\"$(SYS_DBDIR)\"
+SYS_DBDIR    = _PATH_TMP\"nxtvdb\"
+DEFS        += -DEPG_DB_DIR=$(SYS_DBDIR)
 INST_DB_DIR  = $(ROOT)$(SYS_DBDIR)
 INST_DB_PERM = 0777
 endif
@@ -112,14 +112,9 @@
 install: nxtvepg nxtvepg.1
 	test -d $(bindir) || mkdirhier $(bindir)
 	test -d $(mandir) || mkdirhier $(mandir)
-ifndef USER_DBDIR
-	test -d $(INST_DB_DIR) || mkdirhier $(INST_DB_DIR)
-	chmod $(INST_DB_PERM) $(INST_DB_DIR)
-endif
 	install -c -m 0755 nxtvepg     $(bindir)
 	install -c -m 0644 nxtvepg.1   $(mandir)
 	install -c -m 0644 Nxtvepg.ad  $(resdir)/app-defaults/Nxtvepg
-	rm -f $(mandir)/nxtvepg.1x
 
 .SUFFIXES: .c .o .tcl
 
@@ -171,7 +166,7 @@
 	cd .. && tar cf pc1.tar pc -X pc/tar-ex && bzip2 -f -9 pc1.tar
 	tar cf ../pc2.tar www ATTIC dsdrv?* tk8* tcl8* && bzip2 -f -9 ../pc2.tar
 
-include Makefile.dep
+#include Makefile.dep
 
 # end UNIX specific part
 endif
