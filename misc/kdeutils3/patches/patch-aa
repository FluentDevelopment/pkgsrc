$NetBSD: patch-aa,v 1.3 2003/03/11 13:22:31 markd Exp $

--- kcalc/Makefile.am.orig	Mon Sep 16 09:16:37 2002
+++ kcalc/Makefile.am
@@ -1,20 +1,24 @@
 AM_CPPFLAGS=-D_GNU_SOURCE -D_ISOC99_SOURCE
 bin_PROGRAMS = kcalc
-lib_LTLIBRARIES = kcalc.la
+lib_LTLIBRARIES = libkcalc_main.la kcalc.la
 
-kcalc_la_SOURCES = kcalc.cpp kcalc_core.cpp dlabel.cpp stats.cpp \
+libkcalc_main_la_SOURCES = kcalc.cpp kcalc_core.cpp dlabel.cpp stats.cpp \
 	           optiondialog.cpp
+libkcalc_main_la_LDFLAGS = $(all_libraries)
+libkcalc_main_la_LIBADD = $(LIB_KDEUI) -lm
+
+kcalc_la_SOURCES = kcalc_main.cpp
+kcalc_la_LDFLAGS = $(all_libraries) -module -avoid-version
+kcalc_la_LIBADD = libkcalc_main.la
 
 METASOURCES = AUTO
 
 noinst_HEADERS  = kcalc.h dlabel.h stats.h kcalctype.h
 
 INCLUDES= $(all_includes)
-kcalc_la_LDFLAGS = $(all_libraries) -module -avoid-version
-kcalc_la_LIBADD = $(LIB_KDEUI) -lm
 
-kcalc_SOURCES = dummy.cpp
-kcalc_LDADD = kcalc.la
+kcalc_SOURCES = kcalc_main.cpp
+kcalc_LDADD = libkcalc_main.la
 kcalc_LDFLAGS = $(all_libraries) $(KDE_RPATH)
 
 pics_DATA = 
@@ -29,6 +33,3 @@ EXTRA_DIST = $(pics_DATA) $(apps_DATA) 
 
 messages:
 	$(XGETTEXT) *.cpp -o $(podir)/kcalc.pot
-
-dummy.cpp:
-	echo > dummy.cpp
