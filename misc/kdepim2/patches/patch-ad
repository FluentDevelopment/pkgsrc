$NetBSD: patch-ad,v 1.1 2003/05/13 20:02:51 jmc Exp $

--- kpilot/kpilot/kpilotlink.cc.orig	Tue May 13 13:09:06 2003
+++ kpilot/kpilot/kpilotlink.cc	Tue May 13 16:21:46 2003
@@ -51,6 +51,7 @@
 #include <sys/stat.h>
 #include <sys/types.h>
 #include <stdio.h>
+#include <errno.h>
 #include <unistd.h>
 #include <fcntl.h>
 #include <iostream.h>
@@ -254,7 +255,7 @@
 	}
 
 	if (!(fPilotMasterSocket =
-			pi_socket(PI_AF_SLP, PI_SOCK_STREAM, PI_PF_PADP)))
+			pi_socket(PI_AF_PILOT, PI_SOCK_STREAM, PI_PF_PADP)))
 	{
 		e = errno;
 		msg = i18n("Cannot create socket for communicating "
@@ -262,7 +263,7 @@
 		goto errInit;
 	}
 
-	addr.pi_family = PI_AF_SLP;
+	addr.pi_family = PI_AF_PILOT;
 	strcpy(addr.pi_device, QFile::encodeName(fPilotPath));
 
 	ret = pi_bind(fPilotMasterSocket,
