$NetBSD: patch-ab,v 1.2 2006/07/11 17:33:27 gson Exp $

--- lib/gpsformat.c.orig	2004-08-19 05:45:29.000000000 +0300
+++ lib/gpsformat.c
@@ -147,7 +147,7 @@ wpt_common(int *datalen, int state, char
 
 	/* byte 1-6: waypoint name */
 	for (ix = 0; ix < 6; ix += 1) {
-		data[len++] = toupper(name[ix]);
+		data[len++] = toupper((unsigned char)(name[ix]));
 	}
 
 	/* byte 7-10: latitude */
@@ -574,7 +574,7 @@ waypoints(gps_handle gps, u_char *buf, i
 			len = end - beg - 2;
 		if (len > GPS_STRING_MAX)
 			len = GPS_STRING_MAX;
-		switch (toupper(beg[-1])) {
+		switch (toupper((unsigned char)(beg[-1]))) {
 		case 'A':
 			sscanf(&beg[1], "%f", &alt);
 			break;
