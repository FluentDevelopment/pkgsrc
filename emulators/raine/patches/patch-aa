$NetBSD: patch-aa,v 1.2 2004/06/05 17:14:14 xtraeme Exp $

--- makefile.orig	2004-06-05 18:53:01.000000000 +0200
+++ makefile	2004-06-05 18:58:51.000000000 +0200
@@ -27,30 +27,7 @@
 # Use asm video core ? (comment to use C core)
 ASM_VIDEO_CORE = 1
 
-# Try to detect mingw... If you want to build the dos and the mingw
-# version on the same system you should unset djdir before making
-# the mingw version.
-ifeq ($(shell uname -o),GNU/Linux)
-OSTYPE=linux-gnu
-endif
-
-ifeq ("$(OSTYPE)","msys")
-MINGDIR=1
-OSTYPE=mingw32
-ifeq (`nasm -r`,)
-ifdef VERBOSE
-ASM=nasmw
-else
-ASM=@nasmw
-endif
-else
-ifdef VERBOSE
 ASM=nasm
-else
-ASM=@nasm
-endif
-endif
-endif
 
 ifdef mingdir
 MINGDIR=1
@@ -176,10 +153,10 @@
 #	SDL = 1
 
    prefix = $(DESTDIR)
-   bindir = $(prefix)/usr/games
-   sharedir = $(prefix)/usr/share
-   mandir = $(sharedir)/man/man6
-   rainedata = $(sharedir)/games/raine
+   bindir = $(PREFIX)/bin
+   sharedir = $(PREFIX)/share
+   mandir = $(PREFIX)/man/man6
+   rainedata = $(sharedir)/raine
    langdir = $(rainedata)/languages
    romdir = $(rainedata)/roms
 
@@ -202,10 +179,10 @@
    DEFINE = -D__RAINE__ \
 	   -DRAINE_UNIX \
 
-   LIBS = -lz `allegro-config --libs` -lvga # -lefence
-   LIBS_DEBUG = -lz -lvga `allegro-config --libs debug`
+   LIBS = -lz `allegro-config --libs`
+   LIBS_DEBUG = -lz `allegro-config --libs debug`
 
-   LIBS_STATIC = -lz -lvga `allegro-config --static`
+   LIBS_STATIC = -lz `allegro-config --static`
 
 endif # linux / mingw32
 endif # djgpp
@@ -942,11 +919,7 @@
 make.dep:
 	./makedep $(OBJDIR) $(OBJS) > make.dep
 
-cpuinfo:
-	@sh ./detect-cpu
-
 include make.dep
-include cpuinfo
 
 # create directories
 
@@ -984,14 +957,16 @@
 install: install_dirs $(RAINE_LNG)
 ifdef RAINE_LINUX
 
-	$(INSTALL_BIN) $(RAINE_EXE) $(bindir)
-	$(INSTALL_DATA) $(RAINE_DAT) $(rainedata)
+	$(BSD_INSTALL_PROGRAM) $(RAINE_EXE) $(rainedata)
+	$(BSD_INSTALL_DATA) $(RAINE_DAT) $(rainedata)
 
 install_dirs:
-	$(MD) -pv $(bindir) $(rainedata) $(langdir) $(romdir)
+	$(BSD_INSTALL_DATA_DIR) $(rainedata)
+	$(BSD_INSTALL_DATA_DIR) $(langdir)
+	$(BSD_INSTALL_DATA_DIR) $(romdir)
 
 $(RAINE_LNG):
-	$(INSTALL_DATA) config/language/$@ $(langdir)
+	$(BSD_INSTALL_DATA) config/language/$@ $(langdir)
 
 else
 	@echo There is no needs to install for a win32/dos system
