$NetBSD: patch-af,v 1.5 2002/02/20 17:21:00 mycroft Exp $
--- src/unix/video-drivers/xf86_dga2.c.orig	Wed Feb  6 03:33:31 2002
+++ src/unix/video-drivers/xf86_dga2.c	Wed Feb 20 17:14:59 2002
@@ -405,9 +405,17 @@
 	while(XDGAGetViewportStatus(display, xf86ctx.screen))
 		;
 
-	memset(xf86ctx.base_addr, 0,
-	       xf86ctx.device->mode.bytesPerScanline
-	       * xf86ctx.device->mode.imageHeight);
+	if (xf86ctx.device->mode.flags & XDGASolidFillRect) {
+		XDGAFillRectangle(display, xf86ctx.screen, 0, 0, 
+			DisplayWidth(display, xf86ctx.screen),
+			DisplayHeight(display, xf86ctx.screen),
+			BlackPixel(display, xf86ctx.screen));
+		XDGASync(display, xf86ctx.screen);
+	} else {
+		memset(xf86ctx.base_addr, 0,
+		       xf86ctx.device->mode.bytesPerScanline
+		       * xf86ctx.device->mode.imageHeight);
+	}
 
 	effect_init2(bitmap_depth, depth, xf86ctx.width);
 	
