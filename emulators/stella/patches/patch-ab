$NetBSD: patch-ab,v 1.4 2004/08/16 22:23:58 dillo Exp $

--- ../unix/SettingsUNIX.cxx.orig	2004-07-05 02:53:48.000000000 +0200
+++ ../unix/SettingsUNIX.cxx
@@ -43,9 +43,9 @@ SettingsUNIX::SettingsUNIX()
     mkdir(myStateDir.c_str(), 0777);
 
   myUserPropertiesFile   = stelladir + "/stella.pro";
-  mySystemPropertiesFile = "/etc/stella.pro";
+  mySystemPropertiesFile = DATADIR "/stella.pro";
   myUserConfigFile       = stelladir + "/stellarc";
-  mySystemConfigFile     = "/etc/stellarc";
+  mySystemConfigFile     = PKG_SYSCONFDIR "/stellarc";
 
   // Set up the names of the input and output config files
   mySettingsOutputFilename = myUserConfigFile;
@@ -54,6 +54,10 @@ SettingsUNIX::SettingsUNIX()
   else
     mySettingsInputFilename = mySystemConfigFile;
 
+  // otherwise the system properties file is never used
+  if(!fileExists(myUserPropertiesFile))
+    myUserPropertiesFile = "";
+
   mySnapshotFile = "";
   myStateFile    = "";
 }
