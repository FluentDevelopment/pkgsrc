$NetBSD: patch-ac,v 1.1 2005/06/09 07:01:59 kent Exp $

--- dll/ui.so/string.cc.~1.9.~	2003-12-01 01:11:04.000000000 +0900
+++ dll/ui.so/string.cc
@@ -43,7 +43,7 @@ CharLowerA(LPSTR str)
 		/*
 		 * 1 character.
 		 */
-		return (LPSTR)tolower(str);
+		return (LPSTR)tolower(LOWORD(str));
 	} else {
 		CharLowerBuffA(str, strlen(str));
 	}
@@ -60,7 +60,7 @@ CharLowerW(LPWSTR str)
 		/*
 		 * 1 character.
 		 */
-		return (LPWSTR)tolower(str);
+		return (LPWSTR)tolower(LOWORD(str));
 	} else {
 		CharLowerBuffW(str, lstrlenW(str));
 	}
@@ -223,7 +223,7 @@ CharUpperA(LPSTR str)
 		/*
 		 * 1 character.
 		 */
-		return (LPSTR)toupper(str);
+		return (LPSTR)toupper(LOWORD(str));
 	} else {
 		CharUpperBuffA(str, strlen(str));
 	}
@@ -240,7 +240,7 @@ CharUpperW(LPWSTR str)
 		/*
 		 * 1 character.
 		 */
-		return (LPWSTR)toupper(str);
+		return (LPWSTR)toupper(LOWORD(str));
 	} else {
 		CharUpperBuffW(str, lstrlenW(str));
 	}
