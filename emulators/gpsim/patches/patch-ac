$NetBSD: patch-ac,v 1.3 2004/05/02 20:08:14 bouyer Exp $

--- src/pir.cc.orig	2004-01-31 03:58:03.000000000 +0100
+++ src/pir.cc	2004-04-29 23:32:37.000000000 +0200
@@ -40,6 +40,14 @@
 }
 
 
+void PIR1v1::set_txif(void)
+{
+  trace.register_write(address,value);
+  value |= TXIF;
+  if( value & pie->value )
+    intcon->peripheral_interrupt();
+}
+
 void PIR1v1::clear_txif(void)
 {
   value &= ~TXIF;
@@ -56,6 +64,14 @@
 
 
 
+void PIR1v2::set_txif(void)
+{
+  trace.register_write(address,value);
+  value |= TXIF;
+  if( value & pie->value )
+    intcon->peripheral_interrupt();
+}
+
 void PIR1v2::clear_txif(void)
 {
   value &= ~TXIF;
