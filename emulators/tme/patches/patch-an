$NetBSD: patch-an,v 1.1 2007/03/17 13:44:19 tsutsui Exp $

--- machine/sun/sun-si.c.orig	2005-02-17 21:19:17.000000000 +0900
+++ machine/sun/sun-si.c	2006-07-29 14:59:24.000000000 +0900
@@ -475,7 +475,6 @@
   tme_uint32_t csr_old, csr_new, csr_diff, csr_mask;
   tme_bus_addr_t address;
   tme_uint8_t cycle_size;
-  tme_uint32_t csr;
   tme_uint32_t dma_count;
   int new_callouts;
 
@@ -561,7 +560,7 @@
       case TME_SUN_SI_TYPE_VME:
 	TME_SUN_SI_REG16_PUT(sun_si, TME_SUN_SI_REG_FIFO_COUNT_L, 0);
 	TME_SUN_SI_REG16_PUT(sun_si, TME_SUN_SI_REG_VME_FIFO_COUNT_H, 0);
-	csr &= ~TME_SUN_SI_CSR_VME_LOB_MASK;
+	csr_new &= ~TME_SUN_SI_CSR_VME_LOB_MASK;
 	break;
       case TME_SUN_SI_TYPE_COBRA:
 	abort();
@@ -1428,7 +1427,7 @@
   sun_si = tme_new0(struct tme_sun_si, 1);
   sun_si->tme_sun_si_type = si_type;
   sun_si->tme_sun_si_3e_dma = (si_type == TME_SUN_SI_TYPE_3E
-			       ? tme_new(char, TME_SUN_SI_3E_SIZ_DMA)
+			       ? tme_new(unsigned char, TME_SUN_SI_3E_SIZ_DMA)
 			       : NULL);
   sun_si->tme_sun_si_element = element;
   TME_SUN_SI_CSR_PUT(sun_si,
