$NetBSD: patch-ai,v 1.1 2006/05/10 20:31:50 christos Exp $

--- src/serverserve.c.orig	2001-10-26 19:07:19.000000000 -0400
+++ src/serverserve.c	2006-05-10 16:28:22.000000000 -0400
@@ -19,7 +19,9 @@
 fd_set held_fdset;
 
 void	serverserve (void);
+#ifdef USE_ALARM
 static void	gotalarm (int);
+#endif
 static void	sdoinput (void);
 
 void
@@ -35,10 +37,13 @@
 		for (i = 0; i < MAX_USERS+1; i++)
 			cbufs[i].new = 1;
 
+#ifdef USE_ALARM
 	signal(SIGALRM, gotalarm);
+#endif
 	timeisup = 0;
 
 	for (;;) {
+#ifdef USE_ALARM
 		if (polldelay) {
 			if (setitimer(ITIMER_REAL, polldelay, 0) < 0) {
 				perror("server: setitimer failed");
@@ -46,6 +51,7 @@
 			}
 			timeisup = 0;
 		}
+#endif
 
 		memmove(&fdr, &fdset, sizeof(fdset));
 		memmove(&efdr, &fdset, sizeof(fdset));
@@ -85,12 +91,14 @@
 	}
 }
 
+#ifdef USE_ALARM
 static void
 gotalarm(int n)
 {
 	timeisup++;
 	signal(n, gotalarm);
 }
+#endif
 
 static void
 sdoinput(void)
