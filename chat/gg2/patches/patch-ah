$NetBSD: patch-ah,v 1.3 2005/09/07 12:41:12 adam Exp $

--- src/plugins/jabber/jabber_login.c.orig	2005-08-12 08:21:27.000000000 +0000
+++ src/plugins/jabber/jabber_login.c
@@ -92,16 +92,16 @@ gpointer jabber_login_connect(gpointer s
 
 	if (!jabber_data.connection || !lm_connection_is_open(jabber_data.connection))
 	{
-		portstr ? print_debug("jabber: Connecting to %s:%s with %s", server, portstr, jid) :
-			print_debug("jabber: Connecting to %s with %s", server, jid);
-		jabber_data.connection = lm_connection_new(server);
-		lm_connection_set_keep_alive_rate(jabber_data.connection,30);
-
 		/* proxy setting taken from EKG project */
 		gint jabber_proxy_enabled = 0;
 		gchar *jabber_proxy_host = NULL;
 		gint jabber_proxy_port;
 
+		portstr ? print_debug("jabber: Connecting to %s:%s with %s", server, portstr, jid) :
+			print_debug("jabber: Connecting to %s with %s", server, jid);
+		jabber_data.connection = lm_connection_new(server);
+		lm_connection_set_keep_alive_rate(jabber_data.connection,30);
+
 		if (ggadu_config_var_check(jabber_handler, "proxy"))
 		{
 			gchar **auth = array_make((gchar *) ggadu_config_var_get(jabber_handler, "proxy"), "@", 0, 0, 0);
