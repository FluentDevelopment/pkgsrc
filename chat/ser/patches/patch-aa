$NetBSD: patch-aa,v 1.2 2003/08/28 04:13:10 jmc Exp $

--- Makefile.defs.orig	Tue Nov 12 17:21:28 2002
+++ Makefile.defs	Wed Aug 27 22:41:18 2003
@@ -16,7 +16,6 @@
 			-e s/armv4l/arm/)
 
  # install location
-PREFIX = /usr/local
 prefix = $(PREFIX)
 # install path is $(basedir) $(prefix) 
 # example:
@@ -33,7 +32,7 @@
 ut-prefix = $(basedir)$(prefix)
 
 # dirs
-cfg-dir = etc/ser/
+cfg-dir = ser/
 bin-dir = sbin/
 modules-dir = lib/ser/modules/
 ifeq ($(OS), linux)
@@ -45,7 +44,7 @@
 endif
 ut-prefix = bin/
 # target dirs for various stuff
-cfg-target = $(prefix)/$(cfg-dir)
+cfg-target = $(PKG_SYSCONFDIR)/$(cfg-dir)
 modules-target = $(prefix)/$(modules-dir)
 
 
@@ -446,6 +445,7 @@
 endif
 
 endif #mode=release
+LDFLAGS+= -L${BUILDLINK_PREFIX.pthread}/lib -Wl,${RPATH_FLAG}${BUILDLINK_PREFIX.pthread}/lib
 
 
 #*FLAGS used for compiling the modules
@@ -473,8 +473,10 @@
 	DEFS+=-DHAVE_GETHOSTBYNAME2 -DHAVE_UNION_SEMUN
 endif
 ifneq ($(OS), openbsd)
+ifneq ($(OS), netbsd)
 	DEFS+=-DHAVE_SCHED_YIELD
 endif
+endif
 
 
 #os specific stuff
@@ -520,7 +522,7 @@
 ifeq ($(OS), netbsd)
 	DEFS+=-DHAVE_SOCKADDR_SA_LEN
 	YACC=yacc
-	LIBS= -lfl  -lc_r
+	LIBS= -lfl  -lpthread
 endif
 
 ifneq (,$(findstring CYGWIN, $(OS)))
