$NetBSD: patch-aa,v 1.2 2004/05/07 23:18:50 hubertf Exp $

--- src/icqconf.cc.orig	2003-10-26 11:46:52.000000000 +0100
+++ src/icqconf.cc
@@ -27,7 +27,11 @@
 #include <dirent.h>
 #include <fstream>
 
-#ifdef __sun__
+#ifdef __NetBSD__
+/* Find out about __NetBSD_Version__ */
+#  include <sys/param.h>
+#endif
+#if defined(__sun__) || (defined(__NetBSD__) && (__NetBSD_Version__ >= 200040000))
 #include <sys/statvfs.h>
 #endif
 
@@ -427,11 +431,11 @@ void icqconf::loadsounds() {
 
 	    switch(rs) {
 		case rscard:
-		    fo << "*\tmsg\tplay " << SHARE_DIR << "/msg.wav" << endl;
-		    fo << "*\turl\tplay " << SHARE_DIR << "/url.wav" << endl;
-		    fo << "*\temail\tplay " << SHARE_DIR << "/email.wav" << endl;
-		    fo << "*\tonline\tplay " << SHARE_DIR << "/online.wav" << endl;
-		    fo << "*\tsms\tplay " << SHARE_DIR << "/sms.wav" << endl;
+		    fo << "*\tmsg\t" AUDIO_PLAYER " " << SHARE_DIR << "/msg.wav" << endl;
+		    fo << "*\turl\t" AUDIO_PLAYER " " << SHARE_DIR << "/url.wav" << endl;
+		    fo << "*\temail\t" AUDIO_PLAYER " " << SHARE_DIR << "/email.wav" << endl;
+		    fo << "*\tonline\t" AUDIO_PLAYER " " << SHARE_DIR << "/online.wav" << endl;
+		    fo << "*\tsms\t" AUDIO_PLAYER " " << SHARE_DIR << "/sms.wav" << endl;
 		    break;
 
 		case rsspeaker:
@@ -1126,7 +1130,7 @@ unsigned int icqconf::gethttpproxyport()
 void icqconf::checkdiskspace() {
     fenoughdiskspace = true;
 
-#ifndef __sun__
+#if !(defined(__sun__) || (defined(__NetBSD__) && (__NetBSD_Version__ >= 200040000)))
     struct statfs st;
     if(!statfs(conf.getdirname().c_str(), &st)) {
 #else
