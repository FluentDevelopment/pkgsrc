$NetBSD: patch-ac,v 1.8 2003/03/17 20:12:48 salo Exp $

--- lib/silccrypt/Makefile.in.orig	Wed Jan  8 17:25:45 2003
+++ lib/silccrypt/Makefile.in	Thu Jan  9 00:15:00 2003
@@ -366,6 +366,14 @@
 .c.obj:
 	$(COMPILE) -c `if test -f '$<'; then $(CYGPATH_W) '$<'; else $(CYGPATH_W) '$(srcdir)/$<'`
 
+# Workaround a bug in GCC which causes memory exhaustion
+# when compiling sha1 with optimizations on UltraSPARC.
+#
+ifeq (sparc64, $(host_cpu))
+sha1.lo:
+	$(LTCOMPILE) -O0 -c -o $@ `test -f 'sha1.c' || echo '$(srcdir)/'`sha1.c
+ endif
+
 .c.lo:
 	$(LTCOMPILE) -c -o $@ `test -f '$<' || echo '$(srcdir)/'`$<
 
