$NetBSD: patch-af,v 1.1 2006/10/02 16:20:05 dmcmahill Exp $

--- configure.in.orig	2005-11-10 19:15:51.000000000 -0500
+++ configure.in
@@ -85,12 +85,9 @@ dnl that it actually does what it's supp
 dnl since configure relies upon tr heavily and there's no use continuing
 dnl if it's broken.
 dnl
-AC_MSG_CHECKING([if tr works])
-AC_SUBST(TR)
-if test "X${TR}" = "X"; then
-  TR=tr
-fi
-TR_TEST="`echo Test | ${TR} 'a-z,' 'A-Z '`"
+AC_PATH_PROG(TR, tr)
+AC_MSG_CHECKING([if ${TR} works])
+TR_TEST="`echo Test | ${TR} [[a-z]], [[A-Z]]\ `"
 if test "X${TR_TEST}" != "XTEST"; then
   AC_MSG_ERROR([tr program doesn't work])
 else
@@ -555,6 +552,7 @@ AC_CHECK_LIB([m], [ceil])
 
 if test "`uname`" = "SunOS" -o "`uname -sr`" = "HP-UX B.11.00"; then
   dnl ...for Solaris
+  AC_CHECK_LIB([socket], [socket])
   AC_CHECK_LIB([nsl], [xdr_int])
 fi
 
@@ -1672,7 +1670,7 @@ case "X-$DEBUG_PKG" in
 esac
 
 if test -n "$DEBUG_PKG"; then
-  for pkg in `echo $DEBUG_PKG | ${TR} 'a-z,' 'A-Z '`; do
+  for pkg in `echo $DEBUG_PKG | ${TR} "[[a-z]]," "[[A-Z]] "`; do
     CPPFLAGS="$CPPFLAGS -DH5${pkg}_DEBUG"
   done
 fi
@@ -1839,7 +1837,7 @@ case "$CC_BASENAME" in
     if (echo $cmd | grep / >/dev/null); then
       path="`echo $cmd | sed 's/\(.*\)\/.*$/\1/'`"
     else
-      for path in `echo $PATH | ${TR} : ' '`; do
+      for path in `echo $PATH | ${TR} ":" " "`; do
         if test -x $path/$cmd; then
           break
         fi
@@ -1870,7 +1868,7 @@ case "$CC_BASENAME" in
     if (echo $cmd | grep / >/dev/null); then
       path="`echo $cmd | sed 's/\(.*\)\/.*$/\1/'`"
     else
-      for path in `echo $PATH | ${TR} : ' '`; do
+      for path in `echo $PATH | ${TR} ":" " "`; do
         if test -x $path/$cmd; then
           break
         fi
@@ -2146,7 +2144,7 @@ case "X-$FILTERS" in
 esac
 
 if test -n "$FILTERS"; then
-  for filter in `echo $FILTERS | ${TR} 'a-z,' 'A-Z '`; do
+  for filter in `echo $FILTERS | ${TR} "[[a-z]]," "[[A-Z]] "`; do
     dnl ------------------------------------------------------------------
     dnl Have to use separate 'if' construct for each filter, so that
     dnl autoheader can detect the AC_DEFINE for each one...
