$NetBSD: patch-ab,v 1.5 2005/08/30 01:31:21 dmcmahill Exp $

--- configure.in.orig	2005-03-15 21:36:03.000000000 -0500
+++ configure.in
@@ -71,8 +71,9 @@ dnl that it actually does what it's supp
 dnl since configure relies upon tr heavily and there's no use continuing
 dnl if it's broken.
 dnl
-AC_MSG_CHECKING([if tr works])
-TR_TEST="`echo Test | tr 'a-z,' 'A-Z '`"
+AC_PATH_PROG(TR, tr)
+AC_MSG_CHECKING([if ${TR} works])
+TR_TEST="`echo Test | ${TR} [a-z], [A-Z]\ `"
 if test $TR_TEST != "TEST"; then
   AC_MSG_ERROR([tr program doesn't work])
 else
@@ -528,6 +529,7 @@ AC_CHECK_LIB([m], [ceil])
 
 if test "`uname`" = "SunOS" -o "`uname -sr`" = "HP-UX B.11.00"; then
   dnl ...for Solaris
+  AC_CHECK_LIB([socket], [socket])
   AC_CHECK_LIB([nsl], [xdr_int])
 fi
 
@@ -1652,7 +1654,7 @@ case "X-$DEBUG_PKG" in
 esac
 
 if test -n "$DEBUG_PKG"; then
-  for pkg in `echo $DEBUG_PKG | tr 'a-z,' 'A-Z '`; do
+  for pkg in `echo $DEBUG_PKG | ${TR} "[a-z]," "[A-Z] "`; do
     CPPFLAGS="$CPPFLAGS -DH5${pkg}_DEBUG"
   done
 fi
@@ -1819,7 +1821,7 @@ case "$CC_BASENAME" in
     if (echo $cmd | grep / >/dev/null); then
       path="`echo $cmd | sed 's/\(.*\)\/.*$/\1/'`"
     else
-      for path in `echo $PATH | tr : ' '`; do
+      for path in `echo $PATH | ${TR} ":" " "`; do
         if test -x $path/$cmd; then
           break
         fi
@@ -1850,7 +1852,7 @@ case "$CC_BASENAME" in
     if (echo $cmd | grep / >/dev/null); then
       path="`echo $cmd | sed 's/\(.*\)\/.*$/\1/'`"
     else
-      for path in `echo $PATH | tr : ' '`; do
+      for path in `echo $PATH | ${TR} ":" " "`; do
         if test -x $path/$cmd; then
           break
         fi
@@ -2100,7 +2102,7 @@ case "X-$FILTERS" in
 esac
 
 if test -n "$FILTERS"; then
-  for filter in `echo $FILTERS | tr 'a-z,' 'A-Z '`; do
+  for filter in `echo $FILTERS | ${TR} "[a-z]," "[A-Z] "`; do
     dnl ------------------------------------------------------------------
     dnl Have to use separate 'if' construct for each filter, so that
     dnl autoheader can detect the AC_DEFINE for each one...
