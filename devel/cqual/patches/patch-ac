$NetBSD: patch-ac,v 1.1 2006/01/13 07:51:42 rillig Exp $

From the maintainers via private mail. It fixes the special handling of
malloc(), which had been confusing to me. Fixed in CVS.

Index: src/analyze.c
===================================================================
RCS file: /cvsroot/cqual/cqual/src/analyze.c,v
retrieving revision 1.373
diff -u -r1.373 analyze.c
--- src/analyze.c	12 Sep 2005 14:55:48 -0000	1.373
+++ src/analyze.c	13 Jan 2006 05:36:38 -0000
@@ -2342,13 +2342,16 @@
       fqt = points_to_qtype(f_info.qt);
       args = arg_qtypes(fqt);
 
-      magic_info = analyze_magic_function_call(fc, fqt, env, drinfolist);
-      if (magic_info.qt)
-        {
-          magic_info.eff = effect_union(f_info.eff, magic_info.eff);
-          result = magic_info;
-          break;
-        }
+      if (flag_flow_sensitive)
+	{
+	  magic_info = analyze_magic_function_call(fc, fqt, env, drinfolist);
+	  if (magic_info.qt)
+	    {
+	      magic_info.eff = effect_union(f_info.eff, magic_info.eff);
+	      result = magic_info;
+	      break;
+	    }
+	}
 
       if (exists_effect_qual) {
 	mkleq_qual(fc->loc, &effect_qgate, 
