$NetBSD: patch-af,v 1.4 2002/03/01 15:40:45 skrll Exp $

--- doc/libtool.texi.orig	Fri Apr  6 05:05:10 2001
+++ doc/libtool.texi
@@ -1068,6 +1068,15 @@
 Display basic configuration options.  This provides a way for packages
 to determine whether shared or static libraries will be built.
 
+@item --preserve-dup-deps
+Do not remove duplicate dependencies in libraries.  When building packages
+with static libraries, the libraries may depend circularly on each other
+(shared libs can too, but for those it doesn't matter), so there are
+situations, where -la -lb -la is required, and the second -la may not be
+stripped or the link will fail.  In cases where these duplications are
+required, this option will preserve them, only stripping the libraries
+that libtool knows it can safely.
+
 @item --finish
 Same as @samp{--mode=finish}.
 
@@ -4449,15 +4458,9 @@
 other's symbols, it might be necessary to list one of those archives
 both before and after the other one.  Libtool does not currently cope
 with this situation well, since dupicate libraries are removed from
-thr link line.
-
-If you find yourself developing on a host that requires you to list
-libraries multiple times in order for it to generate correctly linked
-objects, you can defeat libtool's removal algorithm like this:
-
-@example
-$ libtool ... -lfoo -lbar -Wl,-lfoo
-@end example
+the link line by default.  Libtool provides the command line option
+@samp{--preserve-dup-deps} to preserve all duplicate dependencies
+in cases where it is necessary.
 
 @node Archivers
 @subsection Archivers
