# $NetBSD: Makefile,v 1.16 2006/03/04 21:29:14 jlam Exp $

DISTNAME=		dmalloc-5.4.2
CATEGORIES=		devel
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=dmalloc/}
EXTRACT_SUFX=		.tgz

MAINTAINER=		pkgsrc-users@NetBSD.org
HOMEPAGE=		http://www.dmalloc.com/
COMMENT=		Run-time configurable debugging malloc library

USE_LANGUAGES=		c c++
GNU_CONFIGURE=		yes
CONFIGURE_ARGS+=	--enable-shlib
CFLAGS+=		-fPIC -DPIC
CONFIGURE_ARGS+=	--enable-threads
INSTALLATION_DIRS=	${INFO_DIR}

# XXX the "installinfo" target is broken
#INSTALL_TARGET=	install installinfo
post-install:
	${INSTALL_DATA} ${WRKSRC}/docs/dmalloc.info ${PREFIX}/${INFO_DIR}/

INFO_FILES=		dmalloc.info

.include "../../mk/pthread.buildlink3.mk"
.include "../../mk/bsd.pkg.mk"
