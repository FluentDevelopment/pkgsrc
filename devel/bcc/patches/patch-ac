$NetBSD: patch-ac,v 1.3 2001/12/25 22:46:32 wiz Exp $

--- bcc/Makefile.orig	Thu Mar  9 11:43:29 1995
+++ bcc/Makefile
@@ -1,14 +1,22 @@
-CFLAGS		=-O -DNSIG=32
+.include "../Makefile.inc"
+
+CFLAGS		+=-DNSIG=32
+#CFLAGS		+=-Wall		# too many warnings
 LDFLAGS 	=
 
-bcc: bcc.c
-	$(CC) $(CFLAGS) $(LDFLAGS) $@.c -o $@
+PROG		=bcc-cc1
+
+SRCS		=assign.c declare.c gencode.c label.c preserve.c type.c \
+		 bcc-cc1.c express.c genloads.c loadexp.c scan.c \
+		 exptree.c glogcode.c longop.c softop.c codefrag.c \
+		 floatop.c hardop.c output.c state.c debug.c function.c \
+		 input.c preproc.c table.c
+
 
-bcc09: bcc.c
-	$(CC) -DMC6809 $(CFLAGS) $(LDFLAGS) bcc.c -o $@
+BINDIR		= ${LOCALPREFIX}/lib/bcc
+MANDIR		= ${LOCALPREFIX}/man
 
-ccc: bcc.c
-	$(CC) -DCCC $(CFLAGS) $(LDFLAGS) bcc.c -o $@
+beforeinstall:
+		-mkdir -p ${LOCALPREFIX}/lib/bcc
 
-clean:
-	rm -f bcc bcc09 ccc
+.include <bsd.prog.mk>
