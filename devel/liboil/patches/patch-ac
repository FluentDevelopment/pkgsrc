$NetBSD: patch-ac,v 1.1 2006/10/23 18:39:24 drochner Exp $

--- ./liboil/sse/composite_sse_4pix.c.orig	2006-10-23 20:03:45.000000000 +0200
+++ ./liboil/sse/composite_sse_4pix.c
@@ -270,6 +270,13 @@ composite_in_argb_const_mask_sse (uint32
 OIL_DEFINE_IMPL_FULL (composite_in_argb_const_mask_sse,
     composite_in_argb_const_mask, OIL_IMPL_FLAG_SSE2);
 
+/*
+ * These functions trigger an ICE with gcc-3.3.3 on i386.
+ * (see NetBSD PR pkg/34886)
+ * Since SSE2 is broken anyway on i386, just disable it.
+ * (amd64 is OK)
+ */
+#ifndef __i386__
 static void
 composite_over_argb_sse (uint32_t *dest, const uint32_t *src, int n)
 {
@@ -504,6 +511,7 @@ composite_in_over_argb_const_mask_sse (u
 }
 OIL_DEFINE_IMPL_FULL (composite_in_over_argb_const_mask_sse,
     composite_in_over_argb_const_mask, OIL_IMPL_FLAG_SSE2);
+#endif
 
 static void
 composite_over_u8_sse (uint8_t *dest, const uint8_t *src, int n)
