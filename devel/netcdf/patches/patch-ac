$NetBSD: patch-ac,v 1.2 2003/03/02 08:26:10 jtb Exp $

--- rules.make.orig	Thu Feb 27 13:08:11 2003
+++ rules.make
@@ -55,8 +55,7 @@
 lib:		$(LIBRARY)
 
 $(LIBRARY):	$(LIB_OBJS) FORCE
-	$(AR) $(ARFLAGS) $@ $(LIB_OBJS)
-	$(RANLIB) $@
+	$(AR) $(ARFLAGS) -o $(.TARGET:.a=.la) $(LIB_OBJS:.o=.lo)
 
 #-------------------------------------------------------------------------------
 # Shared Libraries:
@@ -115,19 +114,19 @@ sunos5_shared_library:
 # Installation:
 
 $(INCDIR)/$(HEADER):	$(INCDIR) $(HEADER)
-	cp $(HEADER) $@
+	$(BSD_INSTALL_DATA) $(HEADER) $@
 $(INCDIR)/$(HEADER1):	$(INCDIR) $(HEADER1)
-	cp $(HEADER1) $@
+	$(BSD_INSTALL_DATA) $(HEADER1) $@
 $(INCDIR)/$(HEADER2):	$(INCDIR) $(HEADER2)
-	cp $(HEADER2) $@
+	$(BSD_INSTALL_DATA) $(HEADER2) $@
 $(INCDIR)/$(HEADER3):	$(INCDIR) $(HEADER3)
-	cp $(HEADER3) $@
+	$(BSD_INSTALL_DATA) $(HEADER3) $@
 
 $(LIBDIR)/$(LIBRARY):	$(LIBDIR) $(LIBRARY)
-	cp $(LIBRARY) $@
+	$(LIBTOOL) --mode=install $(BSD_INSTALL_DATA)  $(LIBRARY) $@
 
 $(BINDIR)/$(PROGRAM):	$(BINDIR) $(PROGRAM)
-	cp $(PROGRAM) $@
+	$(LIBTOOL) --mode=install $(BSD_INSTALL_PROGRAM) $(PROGRAM) $@
 
 $(BINDIR) \
 $(INCDIR) \
