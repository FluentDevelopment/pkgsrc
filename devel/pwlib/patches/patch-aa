$NetBSD: patch-aa,v 1.4 2004/10/08 21:02:53 mjl Exp $

--- make/unix.mak.orig	2003-07-25 00:01:42.000000000 +0200
+++ make/unix.mak	2004-10-08 21:27:52.000000000 +0200
@@ -66,7 +66,7 @@
 #
 
 ifndef PWLIBDIR
-PWLIBDIR = $(HOME)/pwlib
+PWLIBDIR = /usr/pkg
 endif
 
 ####################################################
@@ -381,9 +381,9 @@
 
 ifeq ($(OSTYPE),OpenBSD)
 
-ifeq ($(MACHTYPE),x86)
-STDCCFLAGS	+= -m486
-endif
+# ifeq ($(MACHTYPE),x86)
+# STDCCFLAGS	+= -m486
+# endif
 
 LDLIBS		+= -lossaudio
 
@@ -404,9 +404,9 @@
 
 ifeq ($(OSTYPE),NetBSD)
 
-ifeq ($(MACHTYPE),x86)
-STDCCFLAGS	+= -m486
-endif
+# ifeq ($(MACHTYPE),x86)
+# STDCCFLAGS	+= -m486
+# endif
 
 ifndef OSRELASE
 OSRELEASE   := $(shell /sbin/sysctl -n kern.osrevision)
@@ -853,7 +853,7 @@
 endif
 
 ifeq ($(P_SHAREDLIB),1)
-LIB_SUFFIX	= $(SHAREDLIBEXT)
+LIB_SUFFIX	= la
 else   
 LIB_SUFFIX	= a 
 ifndef DEBUG
@@ -865,8 +865,9 @@
 LIB_TYPE	=
 endif
 
+INSTALL_DIR = ${PREFIX}
 ifndef INSTALL_DIR
-INSTALL_DIR	= /usr/local
+INSTALL_DIR	= /usr/pkg
 endif
 
 ifndef INSTALLBIN_DIR
@@ -891,11 +892,11 @@
 
 # Directories
 
-ifdef PREFIX
-UNIX_INC_DIR	= $(PREFIX)/include/ptlib/unix
-else
+#ifdef PREFIX
+#UNIX_INC_DIR	= $(PREFIX)/include/ptlib/unix
+#else
 UNIX_INC_DIR	= $(PWLIBDIR)/include/ptlib/unix
-endif
+#endif
 
 ifndef UNIX_SRC_DIR
 UNIX_SRC_DIR	= $(PWLIBDIR)/src/ptlib/unix
@@ -904,7 +905,7 @@
 PW_LIBDIR	= $(PWLIBDIR)/lib
 
 # set name of the PT library
-PTLIB_BASE	= pt_$(PLATFORM_TYPE)_$(OBJ_SUFFIX)
+PTLIB_BASE	= pt
 PTLIB_FILE	= lib$(PTLIB_BASE)$(LIB_TYPE).$(LIB_SUFFIX)
 PT_OBJBASE	= obj_$(PLATFORM_TYPE)_$(OBJDIR_SUFFIX)
 PT_OBJDIR	= $(PW_LIBDIR)/$(PT_OBJBASE)
@@ -972,6 +973,6 @@
 # add library directory to library path and include the library
 LDFLAGS		+= -L$(PW_LIBDIR)
 
-LDLIBS		+= -l$(PTLIB_BASE)$(LIB_TYPE)
+LDLIBS		+= $(PW_LIBDIR)/$(PTLIB_FILE)
 
 # End of unix.mak
