$NetBSD: patch-af,v 1.3 2003/05/02 11:49:48 wiz Exp $

--- pth.h.in.orig	Wed Jan  1 15:45:06 2003
+++ pth.h.in
@@ -45,6 +45,7 @@
 #include <sys/socket.h>    /* for sockaddr        */
 #include <sys/signal.h>    /* for sigset_t        */
 @EXTRA_INCLUDE_SYS_SELECT_H@
+@EXTRA_INCLUDE_SYS_RESOURCE_H@
 
     /* fallbacks for essential typedefs */
 #ifndef _PTHREAD_PRIVATE
@@ -338,7 +339,6 @@ enum {
 #define PTH_FAKE_POLL @PTH_FAKE_POLL@
 #if !(PTH_FAKE_POLL)
 /* use vendor poll(2) environment */
-#define _XOPEN_SOURCE
 #include <poll.h>
 #ifndef POLLRDNORM
 #define POLLRDNORM POLLIN
@@ -544,7 +544,10 @@ extern ssize_t        pth_sendto(int, co
 extern ssize_t        pth_pread(int, void *, size_t, off_t);
 extern ssize_t        pth_pwrite(int, const void *, size_t, off_t);
 
+    /* additional replacement functions */
+extern pid_t          pth_wait4(pid_t, int *, int, struct rusage *);
 END_DECLARATION
+
 
     /* soft system call mapping support */
 #if PTH_SYSCALL_SOFT && !defined(_PTH_PRIVATE)
