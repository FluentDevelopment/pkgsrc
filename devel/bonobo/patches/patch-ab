$NetBSD: patch-ab,v 1.6 2002/04/10 14:37:17 jlam Exp $

--- configure.orig	Thu Jan 10 08:59:43 2002
+++ configure
@@ -1312,8 +1312,8 @@
 fi
 	if test x$gnome_cv_orbit_found = xyes; then
 		
-		ORBIT_CFLAGS=`orbit-config --cflags client server`
-		ORBIT_LIBS=`orbit-config --use-service=name --libs client server`
+		ORBIT_CFLAGS=`$ORBIT_CONFIG --cflags client server`
+		ORBIT_LIBS=`$ORBIT_CONFIG --use-service=name --libs client server`
 		
 		
 	else
@@ -1330,8 +1330,8 @@
   
 		gnome_cv_gnorba_found=no
 		if test x$gnome_cv_orbit_found = xyes; then
-			GNORBA_CFLAGS="`gnome-config --cflags gnorba gnomeui`"
-			GNORBA_LIBS="`gnome-config --libs gnorba gnomeui`"
+			GNORBA_CFLAGS="`$GNOME_CONFIG --cflags gnorba gnomeui`"
+			GNORBA_LIBS="`$GNOME_CONFIG --libs gnorba gnomeui`"
 			if test -n "$GNORBA_LIBS"; then
 				gnome_cv_gnorba_found=yes
 			fi
@@ -1351,8 +1351,8 @@
 fi
 	if test x$gnome_cv_orbit_found = xyes; then
 		
-		GNORBA_CFLAGS="`gnome-config --cflags gnorba gnomeui`"
-		GNORBA_LIBS="`gnome-config --libs gnorba gnomeui`"
+		GNORBA_CFLAGS="`$GNOME_CONFIG --cflags gnorba gnomeui`"
+		GNORBA_LIBS="`$GNOME_CONFIG --libs gnorba gnomeui`"
 		
 		
 	else
@@ -7779,7 +7779,7 @@
   cat conftest.$ac_ext >&5
   rm -rf conftest*
   CATOBJEXT=.mo
-		   DATADIRNAME=lib
+		   DATADIRNAME=share
 fi
 rm -f conftest*
 		INSTOBJEXT=.mo
@@ -8159,7 +8159,7 @@
 
 echo $ac_n "checking ORBit version""... $ac_c" 1>&6
 echo "configure:8162: checking ORBit version" >&5
-orbit_version=`orbit-config --version | awk '{print $2;}'`
+orbit_version=`$ORBIT_CONFIG --version | awk '{print $2;}'`
 echo "$ac_t""$orbit_version" 1>&6
 orbit_version=`echo $orbit_version | awk -F. '{print $1 * 10000 + $2 * 100 + $3;}'`
 if test 0$orbit_version -lt 000512; then
@@ -8168,8 +8168,8 @@
 
 echo $ac_n "checking for libIDL >= 0.6.8""... $ac_c" 1>&6
 echo "configure:8171: checking for libIDL >= 0.6.8" >&5
-if gnome-config --libs libIDL > /dev/null 2>&1; then
-	verstxt=`gnome-config --modversion libIDL`
+if $GNOME_CONFIG --libs libIDL > /dev/null 2>&1; then
+	verstxt=`$GNOME_CONFIG --modversion libIDL`
 	vers=`echo "$verstxt" | sed -e "s/^libIDL-//" | \
 		awk -F. '{ printf "%d", $1 * 10000 + $2 * 100 + $3; }'`
 else
@@ -8219,8 +8219,8 @@
 	echo "$ac_t""not found - no auto shlib factory unloads" 1>&6
 fi
 
-BONOBO_IDL_CFLAGS=`gnome-config --cflags gnome libIDL`
-BONOBO_IDL_LIBS=`gnome-config --libs gnome libIDL`
+BONOBO_IDL_CFLAGS=`$GNOME_CONFIG --cflags gnome libIDL`
+BONOBO_IDL_LIBS=`$GNOME_CONFIG --libs gnome libIDL`
 
 
 
@@ -8238,7 +8238,7 @@
 align_save_libs="$LIBS"
 LIBS="$GLIB_LIBS $LIBS"
 align_save_flags="$CFLAGS"
-CFLAGS="`orbit-config --cflags client` $CFLAGS"
+CFLAGS="`$ORBIT_CONFIG --cflags client` $CFLAGS"
 if eval "test \"`echo '$''{'ac_cv_alignof_CORBA_short'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -8288,7 +8288,7 @@
 align_save_libs="$LIBS"
 LIBS="$GLIB_LIBS $LIBS"
 align_save_flags="$CFLAGS"
-CFLAGS="`orbit-config --cflags client` $CFLAGS"
+CFLAGS="`$ORBIT_CONFIG --cflags client` $CFLAGS"
 if eval "test \"`echo '$''{'ac_cv_alignof_CORBA_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -8338,7 +8338,7 @@
 align_save_libs="$LIBS"
 LIBS="$GLIB_LIBS $LIBS"
 align_save_flags="$CFLAGS"
-CFLAGS="`orbit-config --cflags client` $CFLAGS"
+CFLAGS="`$ORBIT_CONFIG --cflags client` $CFLAGS"
 if eval "test \"`echo '$''{'ac_cv_alignof_CORBA_unsigned_short'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -8388,7 +8388,7 @@
 align_save_libs="$LIBS"
 LIBS="$GLIB_LIBS $LIBS"
 align_save_flags="$CFLAGS"
-CFLAGS="`orbit-config --cflags client` $CFLAGS"
+CFLAGS="`$ORBIT_CONFIG --cflags client` $CFLAGS"
 if eval "test \"`echo '$''{'ac_cv_alignof_CORBA_unsigned_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -8438,7 +8438,7 @@
 align_save_libs="$LIBS"
 LIBS="$GLIB_LIBS $LIBS"
 align_save_flags="$CFLAGS"
-CFLAGS="`orbit-config --cflags client` $CFLAGS"
+CFLAGS="`$ORBIT_CONFIG --cflags client` $CFLAGS"
 if eval "test \"`echo '$''{'ac_cv_alignof_CORBA_float'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -8488,7 +8488,7 @@
 align_save_libs="$LIBS"
 LIBS="$GLIB_LIBS $LIBS"
 align_save_flags="$CFLAGS"
-CFLAGS="`orbit-config --cflags client` $CFLAGS"
+CFLAGS="`$ORBIT_CONFIG --cflags client` $CFLAGS"
 if eval "test \"`echo '$''{'ac_cv_alignof_CORBA_double'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -8538,7 +8538,7 @@
 align_save_libs="$LIBS"
 LIBS="$GLIB_LIBS $LIBS"
 align_save_flags="$CFLAGS"
-CFLAGS="`orbit-config --cflags client` $CFLAGS"
+CFLAGS="`$ORBIT_CONFIG --cflags client` $CFLAGS"
 if eval "test \"`echo '$''{'ac_cv_alignof_CORBA_char'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -8588,7 +8588,7 @@
 align_save_libs="$LIBS"
 LIBS="$GLIB_LIBS $LIBS"
 align_save_flags="$CFLAGS"
-CFLAGS="`orbit-config --cflags client` $CFLAGS"
+CFLAGS="`$ORBIT_CONFIG --cflags client` $CFLAGS"
 if eval "test \"`echo '$''{'ac_cv_alignof_CORBA_boolean'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -8638,7 +8638,7 @@
 align_save_libs="$LIBS"
 LIBS="$GLIB_LIBS $LIBS"
 align_save_flags="$CFLAGS"
-CFLAGS="`orbit-config --cflags client` $CFLAGS"
+CFLAGS="`$ORBIT_CONFIG --cflags client` $CFLAGS"
 if eval "test \"`echo '$''{'ac_cv_alignof_CORBA_octet'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -8688,7 +8688,7 @@
 align_save_libs="$LIBS"
 LIBS="$GLIB_LIBS $LIBS"
 align_save_flags="$CFLAGS"
-CFLAGS="`orbit-config --cflags client` $CFLAGS"
+CFLAGS="`$ORBIT_CONFIG --cflags client` $CFLAGS"
 if eval "test \"`echo '$''{'ac_cv_alignof_CORBA_long_double'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -8738,7 +8738,7 @@
 align_save_libs="$LIBS"
 LIBS="$GLIB_LIBS $LIBS"
 align_save_flags="$CFLAGS"
-CFLAGS="`orbit-config --cflags client` $CFLAGS"
+CFLAGS="`$ORBIT_CONFIG --cflags client` $CFLAGS"
 if eval "test \"`echo '$''{'ac_cv_alignof_CORBA_wchar'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -8788,7 +8788,7 @@
 align_save_libs="$LIBS"
 LIBS="$GLIB_LIBS $LIBS"
 align_save_flags="$CFLAGS"
-CFLAGS="`orbit-config --cflags client` $CFLAGS"
+CFLAGS="`$ORBIT_CONFIG --cflags client` $CFLAGS"
 if eval "test \"`echo '$''{'ac_cv_alignof_CORBA_long_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -8838,7 +8838,7 @@
 align_save_libs="$LIBS"
 LIBS="$GLIB_LIBS $LIBS"
 align_save_flags="$CFLAGS"
-CFLAGS="`orbit-config --cflags client` $CFLAGS"
+CFLAGS="`$ORBIT_CONFIG --cflags client` $CFLAGS"
 if eval "test \"`echo '$''{'ac_cv_alignof_CORBA_unsigned_long_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -8888,7 +8888,7 @@
 align_save_libs="$LIBS"
 LIBS="$GLIB_LIBS $LIBS"
 align_save_flags="$CFLAGS"
-CFLAGS="`orbit-config --cflags client` $CFLAGS"
+CFLAGS="`$ORBIT_CONFIG --cflags client` $CFLAGS"
 if eval "test \"`echo '$''{'ac_cv_alignof_CORBA_struct'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -8938,7 +8938,7 @@
 align_save_libs="$LIBS"
 LIBS="$GLIB_LIBS $LIBS"
 align_save_flags="$CFLAGS"
-CFLAGS="`orbit-config --cflags client` $CFLAGS"
+CFLAGS="`$ORBIT_CONFIG --cflags client` $CFLAGS"
 if eval "test \"`echo '$''{'ac_cv_alignof_CORBA_pointer'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -9001,7 +9001,7 @@
 
 echo $ac_n "checking for gnome-libs >= 1.2.7""... $ac_c" 1>&6
 echo "configure:9004: checking for gnome-libs >= 1.2.7" >&5
-vers=`gnome-config --modversion gnome | sed -e "s/gnome-libs-//" | \
+vers=`$GNOME_CONFIG --modversion gnome | sed -e "s/gnome-libs-//" | \
 		awk 'BEGIN { FS = "."; } { printf "%d", $1 * 10000 + $2 * 100 + $3;}'`
 if test "$vers" -ge 10207; then
 	echo "$ac_t""found" 1>&6
@@ -9012,7 +9012,7 @@
 have_oaf=true
 echo $ac_n "checking for Oaf >= 0.6.7""... $ac_c" 1>&6
 echo "configure:9015: checking for Oaf >= 0.6.7" >&5
-vers=`gnome-config --modversion oaf | sed -e "s/oaf-//" | \
+vers=`$GNOME_CONFIG --modversion oaf | sed -e "s/oaf-//" | \
 		awk 'BEGIN { FS = "."; } { printf "%d", $1 * 10000 + $2 * 100 + $3;}'`
 if test "$vers" -ge 607; then
 	cat >> confdefs.h <<\EOF
@@ -9026,7 +9026,7 @@
 
 echo $ac_n "checking for libXml >= 1.8.15""... $ac_c" 1>&6
 echo "configure:9029: checking for libXml >= 1.8.15" >&5
-vers=`gnome-config --modversion xml | sed -e "s/xml-//" | \
+vers=`$GNOME_CONFIG --modversion xml | sed -e "s/xml-//" | \
 		awk 'BEGIN { FS = "."; } { printf "%d", $1 * 10000 + $2 * 100 + $3;}'`
 if test "$vers" -ge 10815; then
 	echo "$ac_t""found" 1>&6
@@ -9341,8 +9341,8 @@
 
 echo $ac_n "checking for GnomePrint libraries >= 0.16""... $ac_c" 1>&6
 echo "configure:9344: checking for GnomePrint libraries >= 0.16" >&5
-if gnome-config --libs print > /dev/null 2>&1; then 
-    vers=`gnome-config --modversion print | sed -e "s/gnome-print-//" | \
+if $GNOME_CONFIG --libs print > /dev/null 2>&1; then 
+    vers=`$GNOME_CONFIG --modversion print | sed -e "s/gnome-print-//" | \
         awk 'BEGIN { FS = "."; } { print $1 * 1000 + $2;}'`
     if test "$vers" -ge 16; then
         echo "$ac_t""found" 1>&6
@@ -9370,8 +9370,8 @@
   HAVE_VFS_FALSE=
 fi
 
-BONOBO_LIBDIR='-L${libdir}'
-BONOBO_INCLUDEDIR="-I${includedir}/gnome-1.0 `$GNOME_CONFIG --cflags gnomeui gdk_pixbuf print oaf xml`"
+BONOBO_LIBDIR="`$GNOME_CONFIG --libs-only-L gnome`"
+BONOBO_INCLUDEDIR="`$GNOME_CONFIG --cflags gnomeui gdk_pixbuf print oaf xml`"
 BONOBO_LIBS="-lbonobo `$GNOME_CONFIG --libs oaf gtk gnome`"
 BONOBOX_LIBS="$BONOBO_LIBS -lbonobox `$GNOME_CONFIG --libs gnomeui gdk_pixbuf xml`"
 BONOBOX_PRINT_LIBS="$BONOBOX_LIBS -lbonobo-print `$GNOME_CONFIG --libs print`"
