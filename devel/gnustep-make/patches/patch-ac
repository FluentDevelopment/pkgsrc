$NetBSD: patch-ac,v 1.4 2005/07/29 12:57:14 adam Exp $

--- target.make.orig	2005-07-13 14:56:18.000000000 +0000
+++ target.make
@@ -671,9 +671,9 @@ endif
 
 ####################################################
 #
-# NetBSD
+# NetBSD a.out
 #
-ifeq ($(findstring netbsd, $(GNUSTEP_TARGET_OS)), netbsd)
+ifeq (@object_fmt@,netbsd-a.out)
 # This is disabled temporarily, because I don't know exactly how
 # to link shared libs. Everything seems to link correctly now but
 # constructor functions in the shared lib failed to get called
@@ -705,7 +705,7 @@ endif
 #
 # NetBSD ELF
 #
-ifeq ($(findstring netbsdelf, $(GNUSTEP_TARGET_OS)), netbsdelf)
+ifeq (@object_fmt@,netbsd-ELF)
 HAVE_SHARED_LIBS    = yes
 SHARED_LD_POSTFLAGS = -Wl,-R/usr/pkg/lib -L/usr/pkg/lib
 SHARED_LIB_LINK_CMD = \
