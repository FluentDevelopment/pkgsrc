$NetBSD: patch-ac,v 1.3 2004/08/18 13:58:27 adam Exp $

--- target.make.orig	2004-04-20 09:43:51.000000000 +0000
+++ target.make
@@ -632,9 +632,9 @@ endif
 
 ####################################################
 #
-# NetBSD
+# NetBSD a.out
 #
-ifeq ($(findstring netbsd, $(GNUSTEP_TARGET_OS)), netbsd)
+ifeq (@object_fmt@,netbsd-a.out)
 # This is disabled temporarily, because I don't know exactly how
 # to link shared libs. Everything seems to link correctly now but
 # constructor functions in the shared lib failed to get called
@@ -666,7 +666,7 @@ endif
 #
 # NetBSD ELF
 #
-ifeq ($(findstring netbsdelf, $(GNUSTEP_TARGET_OS)), netbsdelf)
+ifeq (@object_fmt@,netbsd-ELF)
 HAVE_SHARED_LIBS    = yes
 SHARED_LD_POSTFLAGS = -Wl,-R/usr/pkg/lib -L/usr/pkg/lib
 SHARED_LIB_LINK_CMD = \
