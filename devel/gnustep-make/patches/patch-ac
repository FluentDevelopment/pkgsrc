$NetBSD: patch-ac,v 1.2 2003/12/05 09:16:33 adam Exp $

--- target.make.orig	2003-09-26 04:30:39.000000000 +0200
+++ target.make
@@ -594,9 +594,9 @@ endif
 
 ####################################################
 #
-# NetBSD
+# NetBSD a.out
 #
-ifeq ($(findstring netbsd, $(GNUSTEP_TARGET_OS)), netbsd)
+ifeq (@object_fmt@,netbsd-a.out)
 # This is disabled temporarily, because I don't know exactly how
 # to link shared libs. Everything seems to link correctly now but
 # constructor functions in the shared lib failed to get called
@@ -628,7 +628,7 @@ endif
 #
 # NetBSD ELF
 #
-ifeq ($(findstring netbsdelf, $(GNUSTEP_TARGET_OS)), netbsdelf)
+ifeq (@object_fmt@,netbsd-ELF)
 HAVE_SHARED_LIBS    = yes
 SHARED_LD_POSTFLAGS = -Wl,-R/usr/pkg/lib -L/usr/pkg/lib
 SHARED_LIB_LINK_CMD = \
