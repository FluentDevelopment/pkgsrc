$NetBSD: patch-an,v 1.2 2003/01/21 20:08:10 rh Exp $

--- sysdeps/freebsd/procuid.c.orig	Tue Jun 11 07:34:42 2002
+++ sysdeps/freebsd/procuid.c
@@ -35,15 +35,7 @@ static const unsigned long _glibtop_sysd
 (1L << GLIBTOP_PROC_UID_NICE);
 
 static const unsigned long _glibtop_sysdeps_proc_uid_groups =
-#if LIBGTOP_VERSION_CODE >= 1001000
-#if defined(__NetBSD__) && (__NetBSD_Version__ >= 104000000)
-(1L << GLIBTOP_PROC_UID_NGROUPS) + (1L << GLIBTOP_PROC_UID_GROUPS);
-#else
-0L;
-#endif
-#else /* LIBGTOP_VERSION_CODE < 1001000 */
 0L;
-#endif
 
 /* Init function. */
 
@@ -94,14 +86,18 @@ glibtop_get_proc_uid_p (glibtop *server,
 	buf->tpgid = pinfo [0].kp_eproc.e_tpgid;
 
 	buf->nice     = pinfo [0].kp_proc.p_nice;
+#if defined(__NetBSD__) && defined(SACTIVE)
+	buf->priority = 0;
+#else
 	buf->priority = pinfo [0].kp_proc.p_priority;
+#endif
 
 	/* Set the flags for the data we're about to return*/
 	buf->flags = _glibtop_sysdeps_proc_uid;
 
 	/* Use LibGTop conditionals here so we can more easily merge this
 	 * code into the LIBGTOP_STABLE_1_0 branch. */
-#if LIBGTOP_VERSION_CODE >= 1001000
+#if 0
 	/* This probably also works with other versions, but not yet
 	 * tested. Please remove the conditional if this is true. */
 #if defined(__NetBSD__) && (__NetBSD_Version__ >= 104000000)
