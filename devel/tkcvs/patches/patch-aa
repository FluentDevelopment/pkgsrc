$NetBSD: patch-aa,v 1.8 2002/12/22 14:59:26 agc Exp $

--- doinstall.tcl.orig	Wed Jan 23 18:18:03 2002
+++ doinstall.tcl
@@ -1,7 +1,7 @@
 #!/bin/sh
 #-*-tcl-*-
 # the next line restarts using wish \
-if [ -z "$DISPLAY" ]; then exec tclsh "$0" -- ${1+"$@"}; else exec wish "$0" -- ${1+"$@"}; fi
+exec tclsh "$0" -- ${1+"$@"}
 
 #
 # $Id: patch-aa,v 1.8 2002/12/22 14:59:26 agc Exp $
@@ -29,7 +29,7 @@
     set MANDIR ""
   } else {
     set BINDIR [file join $INSTALLROOT bin]
-    set LIBDIR [file join $INSTALLROOT lib]
+    set LIBDIR [file join $INSTALLROOT share]
     set MANDIR [file join $INSTALLROOT man man1]
   }
 }
@@ -40,23 +40,6 @@
   global LIBDIR BINDIR MANDIR
 
   set_paths $INSTALLROOT
-
-  set msg(1) [file join $BINDIR $TKCVS]
-  set msg(2) [file join $BINDIR $TKDIFF]
-  set msg(3) [file join $LIBDIR tkcvs *.tcl]
-  set msg(4) [file join $LIBDIR tkcvs bitmaps *.gif,xbm]
-  if {$tcl_platform(platform) == "unix"} {
-     set msg(5) [file join $MANDIR tkcvs.1]
-  }
-  foreach m [lsort [array names msg]] {
-    if {[winfo exists .messages.$m]} {
-      destroy .messages.$m
-    }
-    global var$m
-    set var$m $msg($m)
-    label .messages.$m -text $msg($m) -justify left -textvariable var$m
-    pack .messages.$m -side top -anchor w
-  }
 }
 
 proc doinstall { INSTALLROOT } {
@@ -117,13 +100,6 @@
   }
   cd ..
   puts "Finished!"
-
-  if {$X} {
-    destroy .bottom.do
-    destroy .bottom.not
-    button .bottom.done -text "Finished!" -command {destroy .}
-    pack .bottom.done
-  }
 }
 
 ################################################################################
@@ -132,12 +108,7 @@
 set X 1
 
 # Check Tcl/TK version
-if {$tcl_version < 8.3} {
-   tk_dialog .wrongversion "Tcl/Tk too old" \
-   "TkCVS requires Tcl/Tk 8.3 or better!" \
-   error 0 {Bye Bye}
-   exit 1
-}
+# This is done by the package Makefile
 
 # Do this after checking tcl version, because 7.x doesn't have it.
 puts "[info nameofexecutable]"
