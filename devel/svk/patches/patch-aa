$NetBSD: patch-aa,v 1.1 2005/03/03 04:38:36 epg Exp $

--- lib/SVK/Util.pm.orig	2005-03-01 11:22:43.000000000 -0500
+++ lib/SVK/Util.pm
@@ -254,7 +254,7 @@ Get the current encoding from locale
 sub get_encoding {
     return 'utf8' if $^O eq 'darwin';
     local $@;
-    return resolve_alias (eval {
+    my $result = resolve_alias (eval {
 	require Locale::Maketext::Lexicon;
         local $Locale::Maketext::Lexicon::Opts{encoding} = 'locale';
         Locale::Maketext::Lexicon::encoding();
@@ -262,6 +262,8 @@ sub get_encoding {
         require 'open.pm';
         return open::_get_locale_encoding();
     } || 'utf8');
+    $result ||= resolve_alias('C');
+    return $result;
 }
 
 =head3 get_encoder ([$encoding])
