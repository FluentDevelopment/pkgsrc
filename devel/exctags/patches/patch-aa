$NetBSD: patch-aa,v 1.4 2004/06/03 15:20:59 uebayasi Exp $

--- Makefile.in.orig	2004-06-03 23:33:10.000000000 +0900
+++ Makefile.in	2004-06-03 23:37:34.000000000 +0900
@@ -6,8 +6,8 @@
 # These are the names of the installed programs, in case you wish to change
 # them.
 #
-CTAGS_PROG = ctags
-ETAGS_PROG = etags
+CTAGS_PROG = exctags
+ETAGS_PROG = exetags
 
 # Set this to the path to your shell (must run Bourne shell commands).
 #
@@ -28,6 +28,7 @@
 CC	= @CC@
 DEFS	= @DEFS@
 CFLAGS	= @CFLAGS@
+CPPFLAGS	= @CPPFLAGS@
 LDFLAGS	= @LDFLAGS@
 LIBS	= @LIBS@
 EXEEXT	= @EXEEXT@
@@ -59,9 +60,9 @@
 
 VPATH	= $(srcdir)
 
-INSTALL		= cp
-INSTALL_PROG	= $(INSTALL)
-INSTALL_DATA	= $(INSTALL)
+INSTALL_PROGRAM	= $(BSD_INSTALL_PROGRAM)
+INSTALL_MAN	= $(BSD_INSTALL_MAN)
+INSTALL_DATA	= $(BSD_INSTALL_DATA)
 
 READ_LIB = readtags.$(OBJEXT)
 READ_INC = readtags.h
@@ -103,14 +104,14 @@
 	$(CC) -I. -I$(srcdir) $(DEFS) -DDEBUG -g $(LDFLAGS) -o $@ debug.c $(SOURCES)
 
 readtags$(EXEEXT): readtags.c readtags.h
-	$(CC) -DREADTAGS_MAIN -I. -I$(srcdir) $(DEFS) $(CFLAGS) $(LDFLAGS) -o $@ readtags.c
+	$(CC) -DREADTAGS_MAIN -I. -I$(srcdir) $(DEFS) $(CPPFLAGS) $(CFLAGS) $(LDFLAGS) -o $@ readtags.c
 
 ETYPEREF_OBJS = etyperef.o keyword.o routines.o strlist.o vstring.o
 etyperef$(EXEEXT): $(ETYPEREF_OBJS)
 	$(CC) $(LDFLAGS) -o $@ $(ETYPEREF_OBJS)
 
 etyperef.o: eiffel.c
-	$(CC) -DTYPE_REFERENCE_TOOL -I. -I$(srcdir) $(DEFS) $(CFLAGS) -o $@ -c eiffel.c
+	$(CC) -DTYPE_REFERENCE_TOOL -I. -I$(srcdir) $(DEFS) $(CPPFLAGS) $(CFLAGS) -o $@ -c eiffel.c
 
 $(OBJECTS): $(HEADERS) config.h
 
@@ -138,7 +139,7 @@
 install-lib: $(DEST_READ_LIB) $(DEST_READ_INC)
 
 $(DEST_CTAGS): $(CTAGS_EXEC) $(bindir) FORCE
-	$(INSTALL_PROG) $(CTAGS_EXEC) $@  &&  chmod 755 $@
+	$(INSTALL_PROGRAM) $(CTAGS_EXEC) $@  &&  chmod 755 $@
 
 $(DEST_ETAGS):
 	- if [ -x $(DEST_CTAGS) ]; then \
@@ -153,7 +154,7 @@
 install-eman: $(DEST_EMAN)
 
 $(DEST_CMAN): $(man1dir) $(MANPAGE) FORCE
-	- $(INSTALL_DATA) $(srcdir)/$(MANPAGE) $@  &&  chmod 644 $@
+	- $(INSTALL_MAN) $(srcdir)/$(MANPAGE) $@  &&  chmod 644 $@
 
 $(DEST_EMAN):
 	- if [ -f $(DEST_CMAN) ]; then \
@@ -164,10 +165,10 @@
 # install the library
 #
 $(DEST_READ_LIB): $(READ_LIB) $(libdir) FORCE
-	$(INSTALL_PROG) $(READ_LIB) $@  &&  chmod 644 $@
+	$(INSTALL_DATA) $(READ_LIB) $@  &&  chmod 644 $@
 
 $(DEST_READ_INC): $(READ_INC) $(incdir) FORCE
-	$(INSTALL_PROG) $(READ_INC) $@  &&  chmod 644 $@
+	$(INSTALL_DATA) $(READ_INC) $@  &&  chmod 644 $@
 
 
 #
@@ -216,6 +217,6 @@
 # implicit rules
 #
 .c.$(OBJEXT):
-	$(CC) -I. -I$(srcdir) $(DEFS) $(CFLAGS) -c $<
+	$(CC) -I. -I$(srcdir) $(DEFS) $(CPPFLAGS) $(CFLAGS) -c $<
 
 # vi:set tabstop=8:
