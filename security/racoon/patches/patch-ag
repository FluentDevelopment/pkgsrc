$NetBSD: patch-ag,v 1.3 2002/05/07 09:03:57 itojun Exp $

--- plog.c	Fri Apr 26 09:00:10 2002
+++ plog.c	Tue May  7 17:56:49 2002
@@ -1,2 +1,2 @@
-/*	$KAME: plog.c,v 1.22 2002/04/26 00:00:10 itojun Exp $	*/
+/*	$KAME: plog.c,v 1.23 2002/05/07 08:56:19 sakane Exp $	*/
 
@@ -133,6 +133,5 @@
 plogv(int pri, const char *func, struct sockaddr *sa,
-	const char *fmt, ...)
+	const char *fmt, va_list ap)
 {
 	char *newfmt;
-	va_list ap;
 
@@ -143,9 +142,5 @@
 
-	if (f_foreground) {
-		va_start(ap, fmt);
+	if (f_foreground)
 		vprintf(newfmt, ap);
-		va_end(ap);
-	}
 
-	va_start(ap, fmt);
 	if (logfile)
@@ -158,3 +153,2 @@
 	}
-	va_end(ap);
 }
