$NetBSD: patch-aj,v 1.5 2004/08/31 11:27:12 wiz Exp $

--- ssh-keygen.c.orig	2004-07-17 08:12:08.000000000 +0200
+++ ssh-keygen.c
@@ -622,6 +622,7 @@ do_change_passphrase(struct passwd *pw)
 	exit(0);
 }
 
+#ifndef __INTERIX
 /*
  * Print the SSHFP RR.
  */
@@ -651,6 +652,7 @@ do_print_resource_record(struct passwd *
 	printf("failed to read v2 public key from %s.\n", identity_file);
 	exit(1);
 }
+#endif /* __INTERIX */
 
 /*
  * Change the comment of a private key file.
@@ -769,7 +771,9 @@ usage(void)
 	fprintf(stderr, "  -C comment  Provide new comment.\n");
 	fprintf(stderr, "  -N phrase   Provide new passphrase.\n");
 	fprintf(stderr, "  -P phrase   Provide old passphrase.\n");
+#ifndef __INTERIX
 	fprintf(stderr, "  -r hostname Print DNS resource record.\n");
+#endif /* __INTERIX */
 #ifdef SMARTCARD
 	fprintf(stderr, "  -D reader   Download public key from smartcard.\n");
 	fprintf(stderr, "  -U reader   Upload private key to smartcard.\n");
@@ -957,7 +961,11 @@ main(int ac, char **av)
 	if (print_public)
 		do_print_public(pw);
 	if (resource_record_hostname != NULL) {
+#ifndef __INTERIX
 		do_print_resource_record(pw, resource_record_hostname);
+#else /* __INTERIX */
+		fatal("no support for DNS.");
+#endif /* __INTERIX */
 	}
 	if (reader_id != NULL) {
 #ifdef SMARTCARD
