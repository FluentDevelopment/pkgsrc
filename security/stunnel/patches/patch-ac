$NetBSD: patch-ac,v 1.5 2004/12/28 09:09:52 martti Exp $

*** src/network.c	2004-10-14 17:03:49.000000000 +0200
--- src/network.c	2004-12-27 21:21:16.000000000 +0100
***************
*** 125,131 ****
      int retval;
  
      do { /* skip "Interrupted system call" errors */
!         retval=poll(fds->ufds, fds->nfds, 1000*timeout);
              /* no timeout -> main loop */
          if(timeout<0 && retval>0 && s_poll_canread(fds, signal_pipe[0]))
              signal_pipe_empty();
--- 125,131 ----
      int retval;
  
      do { /* skip "Interrupted system call" errors */
!         retval=poll(fds->ufds, fds->nfds, timeout<0 ? -1 : 1000*timeout);
              /* no timeout -> main loop */
          if(timeout<0 && retval>0 && s_poll_canread(fds, signal_pipe[0]))
              signal_pipe_empty();
