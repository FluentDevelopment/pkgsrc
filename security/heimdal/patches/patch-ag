$NetBSD: patch-ag,v 1.1 2004/02/22 11:59:50 markd Exp $

--- lib/roken/ndbm_wrap.c.orig	2002-05-01 04:37:08.000000000 +1200
+++ lib/roken/ndbm_wrap.c
@@ -165,7 +165,11 @@ dbm_open (const char *file, int flags, m
 	free(fn);
 	return NULL;
     }
+#if defined(HAVE_DB4_DB_H)
+    if(db->open(db, NULL, fn, NULL, DB_BTREE, myflags, mode) != 0) {
+#else
     if(db->open(db, fn, NULL, DB_BTREE, myflags, mode) != 0) {
+#endif
 	free(fn);
 	db->close(db, 0);
 	return NULL;
