$NetBSD: patch-ad,v 1.1 2004/03/21 19:49:05 bouyer Exp $

--- percent_m.c.orig	Thu Feb  5 11:40:42 2004
+++ percent_m.c	Thu Feb  5 11:44:20 2004
@@ -13,10 +13,6 @@
 #include <string.h>
 
 extern int errno;
-#ifndef SYS_ERRLIST_DEFINED
-extern char *sys_errlist[];
-extern int sys_nerr;
-#endif
 
 #include "mystdarg.h"
 
@@ -29,11 +25,7 @@
 
     while (*bp = *cp)
 	if (*cp == '%' && cp[1] == 'm') {
-	    if (errno < sys_nerr && errno > 0) {
-		strcpy(bp, sys_errlist[errno]);
-	    } else {
-		sprintf(bp, "Unknown error %d", errno);
-	    }
+	    strcpy(bp, strerror(errno));
 	    bp += strlen(bp);
 	    cp += 2;
 	} else {
