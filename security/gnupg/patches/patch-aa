$NetBSD: patch-aa,v 1.10 2004/12/25 02:54:13 wiz Exp $

--- cipher/idea-stub.c.orig	2004-11-17 16:50:56.000000000 +0100
+++ cipher/idea-stub.c
@@ -132,9 +132,9 @@ load_module (const char *name)
     }
 
   sym = dlsym (handle, "idea_get_info");
-  if (dlerror ())
+  if ((sym == NULL) && dlerror ())
     sym = dlsym (handle, "_idea_get_info");
-  if ((err=dlerror())) 
+  if ((sym == NULL) && (err=dlerror())) 
     goto failure;
 
   return sym;
