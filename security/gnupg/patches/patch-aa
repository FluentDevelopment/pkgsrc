$NetBSD: patch-aa,v 1.9 2003/08/25 21:25:25 itojun Exp $

--- cipher/idea-stub.c.orig	2003-07-31 00:15:51.000000000 +0900
+++ cipher/idea-stub.c	2003-08-26 06:19:38.000000000 +0900
@@ -131,9 +131,9 @@
     }
 
   sym = dlsym (handle, "idea_get_info");
-  if (dlerror ())
+  if ((sym == NULL) && dlerror ())
     sym = dlsym (handle, "_idea_get_info");
-  if ((err=dlerror())) 
+  if ((sym == NULL) && (err=dlerror())) 
     goto failure;
 
   return sym;
