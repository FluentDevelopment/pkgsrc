$NetBSD: patch-ag,v 1.1 2007/02/22 17:38:34 drochner Exp $

--- src/sftp/sftp_c.c.orig	2007-02-09 13:58:41.000000000 +0100
+++ src/sftp/sftp_c.c
@@ -1097,8 +1097,11 @@ sftp_get_file_main(struct sftp_callback 
   int write_needed = 0;
   UINT32 i;
 
-  /* FIXME: state is const */
-  state->mem.used = 0;
+  /* FIXME: This is ugly. The me object needs to be moved a pointer
+   * away, or redesigned so that we don't need to modify it here. (Or
+   * the constification of sftp_callback could be undone
+   * altogether). */
+  ((struct sftp_callback *)state)->mem.used = 0;
 
   sftp_get_mem_main(next, msg, id, in, out, state );
 
