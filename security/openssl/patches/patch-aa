$NetBSD: patch-aa,v 1.9 2002/08/04 15:47:46 fredb Exp $

--- config.orig	Sun Jun 16 05:32:14 2002
+++ config
@@ -388,7 +388,7 @@
   # does give us what we want though, so we use that.  We just just the
   # major and minor version numbers.
   # peak single digit before and after first dot, e.g. 2.95.1 gives 29
-  GCCVER=`echo $GCCVER | sed 's/\([0-9]\)\.\([0-9]\).*/\1\2/'`
+  GCCVER=`echo $GCCVER | sed 's/[^.]*\([0-9]\)\.\([0-9]\).*/\1\2/'`
 else
   CC=cc
 fi
@@ -577,8 +577,8 @@
   *-freebsd[3-9]*) OUT="FreeBSD-elf" ;;
   *-freebsd[1-2]*) OUT="FreeBSD" ;;
   *86*-*-netbsd) OUT="NetBSD-x86" ;;
-  sun3*-*-netbsd) OUT="NetBSD-m68" ;;
-  *-*-netbsd) OUT="NetBSD-sparc" ;;
+  sun3*-*-netbsd) OUT="NetBSD-m68k" ;;
+  *-*-netbsd) OUT="NetBSD-`sysctl -n hw.machine_arch`" ;;
   *86*-*-openbsd) OUT="OpenBSD-x86" ;;
   alpha*-*-openbsd) OUT="OpenBSD-alpha" ;;
   pmax*-*-openbsd) OUT="OpenBSD-mips" ;;
