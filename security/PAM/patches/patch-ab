$NetBSD: patch-ab,v 1.4 2004/11/16 07:46:57 jlam Exp $

--- configure.in.orig	Tue Jul  9 02:17:13 2002
+++ configure.in
@@ -199,7 +199,7 @@ AC_CHECK_LIB(crack, FascistCheck, HAVE_L
 	HAVE_LIBCRACK=no)
 AC_SUBST(HAVE_LIBCRACK)
 
-AC_CHECK_LIB(crypt, fcrypt, HAVE_LIBCRYPT=yes ; AC_DEFINE(HAVE_LIBCRYPT),
+AC_CHECK_LIB(crypt, crypt, HAVE_LIBCRYPT=yes ; AC_DEFINE(HAVE_LIBCRYPT),
 	HAVE_LIBCRYPT=no)
 AC_SUBST(HAVE_LIBCRYPT)
 AC_CHECK_LIB(util, logwtmp, HAVE_LIBUTIL=yes ; AC_DEFINE(HAVE_LIBUTIL),
@@ -240,6 +240,13 @@ AC_CHECK_HEADERS(fcntl.h limits.h malloc
 dnl Linux wants features.h in some of the source files.
 AC_CHECK_HEADERS(features.h)
 
+dnl For module/pam_filter
+AC_CHECK_HEADERS(termios.h)
+
+dnl For module/pam_unix
+AC_CHECK_HEADERS(shadow.h)
+AC_CHECK_FUNCS(getspnam)
+
 dnl For module/pam_cracklib
 AC_CHECK_HEADERS(crypt.h)
 
@@ -257,7 +264,7 @@ dnl being found.
 
 dnl Look for cracklib dictionary
 AC_MSG_CHECKING(path to cracklib dictionary)
-DICT_DIR_CANDIDATES="/usr/lib /usr/share/dict /usr/share/lib \
+DICT_DIR_CANDIDATES="${prefix}/libdata /usr/lib /usr/share/dict /usr/share/lib \
   /usr/local/lib /usr/local/share/lib"
 DICT_FILE_CANDIDATES="pw_dict cracklib_dict"
 CRACKLIB_DICTPATH=""
