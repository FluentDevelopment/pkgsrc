$NetBSD: patch-aj,v 1.2 2006/01/27 18:08:10 joerg Exp $

--- ssh_sys_bsd44+.c.orig	2001-02-15 21:33:40.000000000 +0000
+++ ssh_sys_bsd44+.c
@@ -61,7 +61,7 @@
 #include <netinet/in.h>
 #include <arpa/inet.h>
 
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__DragonFly__)
 #include <libutil.h>
 #else
 #include <util.h>
@@ -830,7 +830,7 @@ ssh_sys_checkpw(char *uname, const char 
 	if (pwent == NULL)
 		return -1;
 
-	if (pwent->pw_passwd[0] == NULL) {
+	if (pwent->pw_passwd[0] == 0) {
 		ret = 0;
 		goto out;
 	}
