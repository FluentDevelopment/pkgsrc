$NetBSD: patch-ae,v 1.2 2002/01/30 10:19:39 dillo Exp $

--- libsock/padp.c.orig	Tue Jun 19 07:50:11 2001
+++ libsock/padp.c
@@ -173,13 +173,13 @@
 					   && (padp.type ==
 					       (unsigned char) padData)
 					   && (slp->id == ps->xid)
-					   && (len == 0)) {
+					   && (len == tlen)) {
 					fprintf(stderr, "Missing ack\n");
 					/* Incoming padData from response to
 					   this transmission.  Maybe the Ack
 					   was lost */
 					/* Don't consume packet, and return success. */
-					count = 0;
+					count += tlen;
 					goto done;
 					return 0;
 				} else if (padp.type == (unsigned char) 4) {
