$NetBSD: patch-ad,v 1.4 2007/03/01 21:39:09 plunky Exp $

--- main.c.orig	2007-01-30 00:35:23.000000000 +0000
+++ main.c	2007-02-26 10:31:55.000000000 +0000
@@ -138,6 +138,10 @@
 			break;
 
 		case 'A':
+#ifdef __NetBSD__
+			if (!bt_devaddr(optarg, &context.saddr))
+				err(1, "%s", optarg);
+#else
 			if (!bt_aton(optarg, &context.saddr)) {
 				struct hostent	*he = bt_gethostbyname(optarg);
 
@@ -148,6 +152,7 @@
 				memcpy(&context.saddr, he->h_addr,
 						sizeof(context.saddr));
 			}
+#endif
 			break;
 
 		case 'c': /* client */
@@ -251,7 +256,7 @@
 			if (rfcomm_channel_lookup(NULL,
 						&context.addr.rfcomm_bdaddr,
 						service, &channel, &n) != 0)
-				errc(1, n, "Could not obtain RFCOMM channel");
+				errx(1, "Could not obtain RFCOMM channel: %s", strerror(n));
 
 			context.addr.rfcomm_channel = (u_int8_t) channel;
 		}
