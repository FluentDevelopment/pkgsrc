$NetBSD: patch-aa,v 1.4 2002/12/25 13:39:36 jmmv Exp $

--- CONFIG.orig	Sun Mar  7 15:51:36 1999
+++ CONFIG	Wed Feb 21 10:48:51 2001
@@ -3,10 +3,10 @@
 VERSION     = "3.0.cm.alpha-4.1"
 
 # Where to put binaries
-BINDIR = "/usr/lib/ifmail"
+BINDIR = ${PREFIX}/sbin
 
 # Main configuration file. This default may be overwritten by -I key.
-CONFIGFILE  = "/etc/ifmail/config"
+CONFIGFILE  = ${PKG_SYSCONFDIR}/config
 
 # Debug messages turned on by -x key are written here.
 # Some error messages may occationally appear here too.
@@ -26,7 +26,7 @@
 CICOLOG    = LOG_LOCAL0
 
 # Directory where UUCP lock files reside.
-LOCKDIR     = "/var/lock"
+LOCKDIR     = "/var/spool/lock"
 #LOCKDIR     = "/var/spool/uucp"
 
 # Directory from which file requests are resolved.
@@ -180,11 +180,6 @@
 #		-DHAS_SELECT -DREGEX_NEED_CARET -DPRE_21_KERNEL
 
 # Linux: (glibc 2 aka libc 6.x)
-SOPTS        = -DHAS_STATFS -DSTATFS_IN_VFS_H -DHAS_SETSID -DHAS_NDBM_H \
-		-DDONT_HAVE_TM_GMTOFF -DHAS_TERMIOS_H -DASCII_LOCKFILES \
-		-DHAS_FSYNC -DHAS_IOCTL_H -DHAS_REGEX_H -DHAS_TCP \
-		-DHAS_SYSLOG -DNEED_UUCPFROM -DNEED_TRAP -DSETPROCTITLE \
-		-DHAS_SELECT -DREGEX_NEED_CARET -DBSD_SIGNALS
 
 # Linux: (bleeding edge options)
 #SOPTS        = -DHAS_STATFS -DSTATFS_IN_VFS_H -DHAS_SETSID \
@@ -201,6 +196,13 @@
 #		-DNEGATIVE_SEEK_BUG -DSETPROCTITLE -DBSD_SIGNALS \
 #		-DHAS_SELECT -DREGEX_NEED_CARET -DHAS_SYS_ERRLIST
 
+# NetBSD:
+SOPTS        = -DHAS_STATFS -DSTATFS_IN_MOUNT_H -DHAS_SETSID -DHAS_NDBM_H \
+		-DHAS_TERMIOS_H -DASCII_LOCKFILES -DHAS_FSYNC -DHAS_IOCTL_H \
+		-DHAS_TCP -DHAS_SYSLOG -DNEED_UUCPFROM -DNEWDB \
+		-DNEGATIVE_SEEK_BUG -DSETPROCTITLE -DBSD_SIGNALS \
+		-DHAS_SELECT -DREGEX_NEED_CARET -DHAS_SYS_ERRLIST
+
 # SVR4:
 #SOPTS        = -DHAS_STATVFS -DDONT_HAVE_TM_GMTOFF -DHAS_SETSID -DHAS_NDBM_H \
 #		-DHAS_TERMIOS_H -DHAS_DIAL -DHAS_DIAL_H -DASCII_LOCKFILES \
@@ -265,9 +267,7 @@
 #RANLIB = touch
 SHELL = /bin/sh
 ECHO = echo -e
-CC = cc -pipe
-#YACC = yacc
-YACC = bison -y
+YACC = yacc
 #LEX = lex
 LEX = flex
 AWK = awk
@@ -275,7 +275,7 @@
 
 #CFLAGS = -g -Wall
 # Linux, 386BSD, SunOS:
-CFLAGS = -D_GNU_SOURCE -O2 -Wall
+CFLAGS += -D_GNU_SOURCE -Wall -Werror -Wno-unused
 # SVR4:
 #CFLAGS = -O -Xa
 
@@ -285,12 +285,10 @@
 # If you need TERM also add e.g. "/usr/src/term112/client.a"
 
 # Linux
-LIBS = -lgdbm
-LIBRESOLV = -lresolv		# this is needed for glibc 2
 # SunOS:
 #LIBS =
 # 386BSD:
-#LIBS = -lcompat
+LIBS = -lcompat
 # SVR4
 #LIBS = -ldbm -lform -lnsl -lsocket -lc -L/usr/ucblib -lucb
 # SCO
