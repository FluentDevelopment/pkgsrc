$NetBSD: patch-ad,v 1.3 2006/01/18 11:39:54 mjl Exp $

--- channels/Makefile.orig	2005-12-15 11:52:30.000000000 +0100
+++ channels/Makefile	2006-01-18 12:13:57.000000000 +0100
@@ -22,12 +22,13 @@
 endif
 
 ifeq ($(findstring BSD,${OSARCH}),BSD)
- CFLAGS+=-I$(CROSS_COMPILE_TARGET)/usr/local/include -L$(CROSS_COMPILE_TARGET)/usr/local/lib
+ CFLAGS+=-I${PREFIX}/include -L${PREFIX}/lib
 endif
 
 ifeq (${OSARCH},OpenBSD)
   PTLIB=-lpt_OpenBSD_x86_r
   H323LIB=-lh323_OpenBSD_x86_r
+  CHANH323LIB=-L${PREFIX}/lib
 endif
 
 ifeq (${OSARCH},Linux)
@@ -73,41 +74,41 @@
   SOLINK+=-lrt
 endif
 
-ifneq ($(wildcard $(CROSS_COMPILE_TARGET)/usr/include/linux/ixjuser.h)$(wildcard $(CROSS_COMPILE_TARGET)/usr/local/include/ixjuser.h),)
-  CHANNEL_LIBS+=chan_phone.so
-endif
-
-ifneq ($(wildcard h323/libchanh323.a),)
-  CHANNEL_LIBS+=chan_h323.so
-endif
-
-ifneq ($(wildcard misdn/chan_misdn_lib.a),)
-  CHANNEL_LIBS+=chan_misdn.so
-  CFLAGS+=-Imisdn 
-endif
+# ifneq ($(wildcard $(CROSS_COMPILE_TARGET)/usr/include/linux/ixjuser.h)$(wildcard $(CROSS_COMPILE_TARGET)/usr/local/include/ixjuser.h),)
+#   CHANNEL_LIBS+=chan_phone.so
+# endif
+
+# ifneq ($(wildcard h323/libchanh323.a),)
+#   CHANNEL_LIBS+=chan_h323.so
+# endif
+
+# ifneq ($(wildcard misdn/chan_misdn_lib.a),)
+#   CHANNEL_LIBS+=chan_misdn.so
+#   CFLAGS+=-Imisdn 
+# endif
 
 CFLAGS+=-Wno-missing-prototypes -Wno-missing-declarations
 
-ifneq ($(wildcard $(CROSS_COMPILE_TARGET)/usr/include/alsa/asoundlib.h),)
-  CHANNEL_LIBS+=chan_alsa.so
-endif
-
-ifneq ($(wildcard $(CROSS_COMPILE_TARGET)/usr/lib/libpri.so.1)$(wildcard $(CROSS_COMPILE_TARGET)/usr/local/lib/libpri.so.1),)
-  CFLAGS+=-DZAPATA_PRI
-  ZAPPRI=-lpri
-endif
-
-ifneq ($(wildcard $(CROSS_COMPILE_TARGET)/usr/lib/libmfcr2.so.1)$(wildcard $(CROSS_COMPILE_TARGET)/usr/local/lib/libmfcr2.so.1),)
-  CFLAGS+=-DZAPATA_R2
-  ZAPR2=-lmfcr2
-endif
+# ifneq ($(wildcard $(CROSS_COMPILE_TARGET)/usr/include/alsa/asoundlib.h),)
+#   CHANNEL_LIBS+=chan_alsa.so
+# endif
+
+# ifneq ($(wildcard $(CROSS_COMPILE_TARGET)/usr/lib/libpri.so.1)$(wildcard $(CROSS_COMPILE_TARGET)/usr/local/lib/libpri.so.1),)
+#   CFLAGS+=-DZAPATA_PRI
+#   ZAPPRI=-lpri
+# endif
+
+# ifneq ($(wildcard $(CROSS_COMPILE_TARGET)/usr/lib/libmfcr2.so.1)$(wildcard $(CROSS_COMPILE_TARGET)/usr/local/lib/libmfcr2.so.1),)
+#   CFLAGS+=-DZAPATA_R2
+#   ZAPR2=-lmfcr2
+# endif
 
 ALSA_SRC=chan_alsa.c
 
-ifneq ($(wildcard alsa-monitor.h),)
-  CFLAGS+=-DALSA_MONITOR
-  ALSA_SRC+=alsa-monitor.h
-endif
+# ifneq ($(wildcard alsa-monitor.h),)
+#   CFLAGS+=-DALSA_MONITOR
+#   ALSA_SRC+=alsa-monitor.h
+# endif
 
 ifndef WITHOUT_ZAPTEL
 ifneq ($(wildcard $(CROSS_COMPILE_TARGET)/usr/include/linux/zaptel.h)$(wildcard $(CROSS_COMPILE_TARGET)/usr/local/include/zaptel.h)$(wildcard $(CROSS_COMPILE_TARGET)/usr/pkg/include/zaptel.h),)
@@ -122,10 +123,10 @@
 endif
 endif # WITHOUT_ZAPTEL
 
-ifneq ($(wildcard $(CROSS_COMPILE_TARGET)/usr/include/vpbapi.h),)
-  CHANNEL_LIBS+=chan_vpb.so
-  CFLAGS+=-DLINUX
-endif
+# ifneq ($(wildcard $(CROSS_COMPILE_TARGET)/usr/include/vpbapi.h),)
+#   CHANNEL_LIBS+=chan_vpb.so
+#   CFLAGS+=-DLINUX
+# endif
 
 CFLAGS+=-DCRYPTO
 
@@ -137,9 +138,9 @@
 
 ZAPDIR=/usr/lib
 
-ifneq ($(wildcard $(CROSS_COMPILE_TARGET)/usr/include/nbs.h),)
-  CHANNEL_LIBS+=chan_nbs.so
-endif
+# ifneq ($(wildcard $(CROSS_COMPILE_TARGET)/usr/include/nbs.h),)
+#   CHANNEL_LIBS+=chan_nbs.so
+# endif
 
 ifndef OPENH323DIR
   OPENH323DIR=$(HOME)/openh323
@@ -164,13 +165,13 @@
   include .depend
 endif
 
-ifneq ($(wildcard h323/Makefile.ast),)
-  include h323/Makefile.ast
-endif
-
-ifneq ($(wildcard misdn/Makefile.ast),)
-  include misdn/Makefile.ast
-endif
+# ifneq ($(wildcard h323/Makefile.ast),)
+#   include h323/Makefile.ast
+# endif
+
+# ifneq ($(wildcard misdn/Makefile.ast),)
+#   include misdn/Makefile.ast
+# endif
 
 gentone: gentone.c
 	$(HOST_CC) -o gentone gentone.c -lm
