$NetBSD: patch-ab,v 1.6 2003/04/18 16:18:33 wiz Exp $

--- src/smspdu.c.orig	Sun Mar  9 13:24:24 2003
+++ src/smspdu.c
@@ -88,7 +88,7 @@ void create_smssubmit_pdu(char *pdu, cha
   //leave PID and vp_relative as is
 	
   //process user data length and user data
-  wide_str=convert_to_internal(nl_langinfo(CODESET),smstext,strlen(smstext));
+  wide_str=convert_to_internal("char",smstext,strlen(smstext));
   ud=sms_data_7bit_encode(wide_str,&udl);
   mem_realloc(wide_str,0);
 	
@@ -212,7 +212,7 @@ void decode_smsdeliver_pdu(unsigned char
 	sprintf(&oa.number[strlen(oa.number)],"%c%c",pdu[i],pdu[i+1]);
       }
       wide_str=sms_data_7bit_decode(oa.number,(oa.length*4)/7);
-      t=convert_from_internal(nl_langinfo(CODESET),wide_str,2);
+      t=convert_from_internal("char",wide_str,2);
       mem_realloc(wide_str,0);
       strcpy(oa.number,t);
       mem_realloc(t,0);
@@ -301,9 +301,9 @@ void decode_smsdeliver_pdu(unsigned char
       //all encodings of uncompressed 7bit
       wide_str=sms_data_7bit_decode(pdu+where,udl);
       if ((pdutype>>6)&1){
-	t=convert_from_internal(nl_langinfo(CODESET),&wide_str[1+((udh_length*8)+(udh_length*8)%7)/7],2);
+	t=convert_from_internal("char",&wide_str[1+((udh_length*8)+(udh_length*8)%7)/7],2);
       } else {
-	t=convert_from_internal(nl_langinfo(CODESET),wide_str,2);
+	t=convert_from_internal("char",wide_str,2);
       }
       mem_realloc(wide_str,0);
       strcpy(ud,t);
@@ -318,7 +318,7 @@ void decode_smsdeliver_pdu(unsigned char
       } else {
 	wide_str=convert_from_ucs2(pdu+where);
       }
-      t=convert_from_internal(nl_langinfo(CODESET),wide_str,2);
+      t=convert_from_internal("char",wide_str,2);
       mem_realloc(wide_str,0);
       strcpy(ud,t);
       mem_realloc(t,0);
