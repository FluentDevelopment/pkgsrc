# $NetBSD: Makefile,v 1.12 2003/08/30 02:55:03 taca Exp $

DISTNAME=	FXRuby-1.0.25
PKGNAME=	${RUBY_PKGNAMEPREFIX}fox-1.0.25
WRKSRC=		${WRKDIST}/ext/fox
CATEGORIES=	x11
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=fxruby/}

MAINTAINER=	sakamoto@NetBSD.org
HOMEPAGE=	http://fxruby.sourceforge.net/
COMMENT=	Ruby interface to FOX GUI library

DEPENDS+=	ruby-opengl-[0-9]*:../../graphics/ruby-opengl
WRKDIST=	${WRKDIR}/${DISTNAME}

USE_BUILDLINK2=	yes
DIST_SUBDIR=	ruby
USE_RUBY_EXTCONF= # defined
CONFIGURE_ARGS+= --with-fox-include=${BUILDLINK_PREFIX.fox}/include/fox
CONFIGURE_ARGS+= --with-opengl-include=${BUILDLINK_PREFIX.Mesa}/include/GL
CONFIGURE_ARGS+= --with-fox-lib=${BUILDLINK_PREFIX.fox}/lib

INSTALL_TARGET=	site-install

post-install:
	${INSTALL_DATA_DIR} ${RUBY_SITELIBDIR}/fox
	${INSTALL_DATA} ${WRKDIST}/lib/fox/*.rb ${RUBY_SITELIBDIR}/fox
	${INSTALL_DATA_DIR} ${RUBY_EXAMPLESDIR}/fox
	${INSTALL_DATA} ${WRKDIST}/examples/README ${WRKDIST}/examples/*.rb ${RUBY_EXAMPLESDIR}/fox
	${INSTALL_DATA_DIR} ${RUBY_EXAMPLESDIR}/fox/icons
	${INSTALL_DATA} ${WRKDIST}/examples/icons/* \
		${RUBY_EXAMPLESDIR}/fox/icons
	${INSTALL_DATA_DIR} ${RUBY_EXAMPLESDIR}/fox/textedit
	${INSTALL_DATA} ${WRKDIST}/examples/textedit/* \
		${RUBY_EXAMPLESDIR}/fox/textedit
	${INSTALL_DATA_DIR} ${RUBY_EXAMPLESDIR}/fox/tests
	${INSTALL_DATA} ${WRKDIST}/tests/* ${RUBY_EXAMPLESDIR}/fox/tests
	${INSTALL_DATA_DIR} ${RUBY_DOCDIR}/fox ${RUBY_DOCDIR}/fox/images
	${INSTALL_DATA} ${WRKDIST}/doc/*.html ${RUBY_DOCDIR}/fox
	${INSTALL_DATA} ${WRKDIST}/doc/images/* ${RUBY_DOCDIR}/fox/images

.include "../../graphics/Mesa/buildlink2.mk"
.include "../../x11/fox/buildlink2.mk"
.include "../../graphics/jpeg/buildlink2.mk"
.include "../../graphics/png/buildlink2.mk"
.include "../../graphics/tiff/buildlink2.mk"
.include "../../lang/ruby-base/Makefile.common"
.include "../../lang/ruby-base/buildlink2.mk"
.include "../../mk/bsd.pkg.mk"
