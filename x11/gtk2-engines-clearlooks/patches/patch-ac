$NetBSD: patch-ac,v 1.1 2005/03/16 15:30:21 rillig Exp $

gcc-2.95.3 cannot handle declarations intermixed with code.

--- src/clearlooks_style.c.orig	Thu Mar  3 22:43:15 2005
+++ src/clearlooks_style.c	Wed Mar 16 14:33:40 2005
@@ -548,13 +548,12 @@ draw_extension (DRAW_ARGS, GtkPositionTy
 	if (DETAIL ("tab"))
 	{
 		GdkRectangle new_area;
+		GdkColor tmp_color;
 	
 		cl_rectangle_set_button (&r, style, state_type, FALSE,
 								CL_CORNER_ROUND, CL_CORNER_ROUND,
 								CL_CORNER_ROUND, CL_CORNER_ROUND);
 
-		GdkColor tmp_color;
-		
 		if (state_type == GTK_STATE_ACTIVE)
 			shade (&style->bg[state_type], &tmp_color, 1.08);
 		else
@@ -866,7 +865,7 @@ draw_box (DRAW_ARGS)
 	if (widget && DETAIL ("button") && widget->parent &&
 	         (GTK_IS_TREE_VIEW(widget->parent) || GTK_IS_CLIST (widget->parent))) // headers
 	{
-		gint columns = 0, column_index = 0;
+		gint columns = 0, column_index = 0, nwidth;
 
 		if ( width < 2 || height < 2 )
 			return;
@@ -874,7 +873,7 @@ draw_box (DRAW_ARGS)
 		if (GTK_IS_TREE_VIEW (widget->parent))
 			gtk_treeview_get_header_index (widget->parent, widget, &column_index, &columns);
 		
-		int nwidth = (column_index == columns-1) ? width : width+1;
+		nwidth = (column_index == columns-1) ? width : width+1;
 
 		cl_rectangle_set_button (&r, style, state_type, FALSE,
 		                        CL_CORNER_NONE, CL_CORNER_NONE,
@@ -1189,12 +1188,13 @@ draw_box (DRAW_ARGS)
 	{
 		gboolean menubar = (widget->parent && GTK_IS_MENU_BAR(widget->parent)) ? TRUE : FALSE;
 		gboolean flatmenu = FALSE;
+		int corner;
 	
 		GdkColor inner_lower;
 		
 		shade (clearlooks_get_spot_color (CLEARLOOKS_RC_STYLE (style->rc_style)), &inner_lower, 1.3);
 
-		int corner = CL_CORNER_NARROW;
+		corner = CL_CORNER_NARROW;
 		
 		if (menubar)
 		{
