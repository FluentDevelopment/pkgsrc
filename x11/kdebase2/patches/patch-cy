$NetBSD: patch-cy,v 1.2 2001/12/03 15:37:19 skrll Exp $

--- konsole/src/Makefile.am.orig	Thu Jun 14 19:53:50 2001
+++ konsole/src/Makefile.am
@@ -16,7 +16,8 @@
 
 # you can add here more. This one gets installed
 bin_PROGRAMS = 	konsole konsole_grantpty kwrited #kcmkonsole
-lib_LTLIBRARIES = libkonsolepart.la kwrited.la konsole.la
+lib_LTLIBRARIES = libkonsolepart.la libkwrited_main.la kwrited.la \
+	libkonsole_main.la konsole.la
 # libkonsolepart is a part, but konsole.la links directly to it, so we can't
 # install it under kde_module
 
@@ -34,24 +35,32 @@
 libkonsolepart_la_LDFLAGS = $(all_libraries) $(KDE_PLUGIN)
 libkonsolepart_la_LIBADD = $(LIB_KPARTS) $(LIBUTIL)
 
+libkwrited_main_la_SOURCES = kwrited.C
+libkwrited_main_la_LIBADD  = libkonsolepart.la
+libkwrited_main_la_LDFLAGS = $(all_libraries)
+
 # kwrited kdeinit module
-kwrited_la_SOURCES = kwrited.C
-kwrited_la_LIBADD  = libkonsolepart.la
+kwrited_la_SOURCES = kwrited_main.cpp
+kwrited_la_LIBADD  = libkwrited_main.la
 kwrited_la_LDFLAGS = $(all_libraries) -module -avoid-version
 
 # kwrited executable
-kwrited_SOURCES	= dummy.C
-kwrited_LDADD   = kwrited.la 
+kwrited_SOURCES	= kwrited_main.cpp
+kwrited_LDADD   = libkwrited_main.la 
 kwrited_LDFLAGS = $(all_libraries) $(KDE_RPATH)
 
+libkonsole_main_la_SOURCES = main.C konsole.C
+libkonsole_main_la_LIBADD  = libkonsolepart.la
+libkonsole_main_la_LDFLAGS = $(all_libraries)
+
 # konsole kdeinit module
-konsole_la_SOURCES = main.C konsole.C
-konsole_la_LIBADD  = libkonsolepart.la
+konsole_la_SOURCES = konsole_main.cpp
+konsole_la_LIBADD  = libkonsole_main.la
 konsole_la_LDFLAGS = $(all_libraries) -module -avoid-version
 
 # konsole executable - has all the sources, doesn't link kparts, saves startup time
 konsole_SOURCES	= TEPty.C BlockArray.C main.C konsole.C schema.C session.C TEWidget.C TEmuVt102.C \
-                  TEScreen.C TEmulation.C TEHistory.C keytrans.C 
+                  TEScreen.C TEmulation.C TEHistory.C keytrans.C konsole_main.cpp
 konsole_LDADD = $(LIB_KDEUI) $(LIB_KSYCOCA) $(LIBUTIL)
 konsole_LDFLAGS = $(all_libraries) $(KDE_RPATH)
 
@@ -88,10 +97,6 @@
 	done
 	$(XGETTEXT) rc.cpp *.C -o $(podir)/konsole.pot
 	rm -f schemas.C
-
-dummy.C:
-	echo > dummy.C
-
 
 rcdir = $(kde_datadir)/konsole
 rc_DATA = konsole_part.rc
