$NetBSD: patch-cm,v 1.1 2001/10/15 22:46:05 skrll Exp $

--- konqueror/Makefile.am.orig	Fri Jun 15 09:36:56 2001
+++ konqueror/Makefile.am
@@ -3,7 +3,7 @@
 
 SUBDIRS = . kfmexec client iconview dirtree listview keditbookmarks kfindpart shellcmdplugin about pics sidebar
 
-lib_LTLIBRARIES = konqueror.la
+lib_LTLIBRARIES = libkonqueror_main.la konqueror.la
 
 konqdatadir = $(kde_datadir)/konqueror
 konqdata_DATA = konqueror.rc
@@ -20,7 +20,7 @@
 
 bin_PROGRAMS = konqueror
 
-konqueror_la_SOURCES = konq_main.cc \
+libkonqueror_main_la_SOURCES = konq_main.cc \
 	    KonquerorIface.cc KonquerorIface.skel \
 	    KonqMainWindowIface.cc KonqMainWindowIface.skel \
 	    KonqViewIface.cc KonqViewIface.skel \
@@ -34,11 +34,15 @@
 		konq_combo.cc	\
 	    konq_browseriface.cc
 
+libkonqueror_main_la_LDFLAGS = $(all_libraries) -module -avoid-version
+libkonqueror_main_la_LIBADD = ../libkonq/libkonq.la
+
+konqueror_la_SOURCES = konqueror_main.cc
 konqueror_la_LDFLAGS = $(all_libraries) -module -avoid-version
-konqueror_la_LIBADD = ../libkonq/libkonq.la
+konqueror_la_LIBADD = libkonqueror_main.la ../libkonq/libkonq.la
 
-konqueror_SOURCES = dummy.cc
-konqueror_LDADD = konqueror.la
+konqueror_SOURCES = konqueror_main.cc
+konqueror_LDADD = libkonqueror_main.la
 konqueror_LDFLAGS = $(KDE_RPATH) $(all_libraries)
 
 # Hmm, this experiment of a static konq failed, don't trust it...
@@ -52,9 +56,6 @@
 #konqueror_static_SOURCES = dummy.cc
 #konqueror_static_LDADD = konqueror.la *view/*.la dirtree/*.la $(libdir)/libkhtml.la
 #konqueror_static_LDFLAGS = $(all_libraries) -static
-
-dummy.cc:
-	echo > dummy.cc
 
 messages: rc.cpp
 	$(EXTRACTRC) */*.rc >> rc.cpp
