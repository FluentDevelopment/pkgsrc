$NetBSD: patch-ak,v 1.1 2005/05/23 19:14:14 xtraeme Exp $

--- config/imake/imake.c.orig	2004-03-04 18:45:52.000000000 +0100
+++ config/imake/imake.c	2004-08-10 17:20:20.000000000 +0200
@@ -145,7 +145,7 @@
  *	#include INCLUDE_IMAKEFILE
  *	<add any global targets like 'clean' and long dependencies>
  */
-#if defined(__FreeBSD__) || defined(__NetBSD__)
+#if defined(__FreeBSD__) || defined(__NetBSD__) || defined(__DragonFly__)
 /* This needs to be before _POSIX_SOURCE gets defined */
 # include <sys/param.h>
 # include <sys/types.h>
@@ -1020,7 +1020,7 @@
 }
 #endif
 
-#if defined(__OpenBSD__) 
+#if defined(__OpenBSD__) || defined(__DragonFly__)
 static void
 get_stackprotector(FILE *inFile)
 {
@@ -1285,6 +1285,7 @@
      defined(__NetBSD__) || \
      defined(__OpenBSD__) || \
      defined(__FreeBSD__) || \
+     defined(__DragonFly__) || \
      defined(__APPLE__) || \
      defined(__GNU__)
 	"/usr/bin/cc",	/* for Linux PostIncDir */
@@ -1603,7 +1604,7 @@
       fprintf(inFile, "#define DefaultOSTeenyVersion 0\n");
     }
 #endif /* EMX */
-#if defined(__OpenBSD__)
+#if defined(__OpenBSD__) || defined(__DragonFly__)
   get_stackprotector(inFile);
 #endif
   return FALSE;
