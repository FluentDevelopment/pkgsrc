$NetBSD: patch-ba,v 1.4 2003/03/11 13:10:36 markd Exp $

--- kinit/Makefile.in.orig	Thu Jan 23 12:30:38 2003
+++ kinit/Makefile.in
@@ -340,8 +340,7 @@
 klauncher_la_SOURCES = klauncher.cpp klauncher_main.cpp autostart.cpp
 
 klauncher_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-klauncher_LDADD = klauncher.la
-klauncher_SOURCES = dummy.cpp
+klauncher_SOURCES = main.cpp
 
 #>- METASOURCES = AUTO
 
@@ -390,11 +389,12 @@
 #>+ 1
 kioslave_OBJECTS = kioslave.$(OBJEXT)
 kioslave_DEPENDENCIES =
-am_klauncher_OBJECTS = dummy.$(OBJEXT)
+am_klauncher_OBJECTS = main.$(OBJEXT)
 #>- klauncher_OBJECTS = $(am_klauncher_OBJECTS)
 #>+ 1
-klauncher_OBJECTS = dummy.$(OBJEXT)
-klauncher_DEPENDENCIES = klauncher.la
+klauncher_OBJECTS = main.$(OBJEXT)
+klauncher_LDADD = $(LDADD)
+klauncher_DEPENDENCIES =
 am_kshell_OBJECTS = shell.$(OBJEXT)
 #>- kshell_OBJECTS = $(am_kshell_OBJECTS)
 #>+ 1
@@ -421,28 +421,25 @@
 LIBS = @LIBS@
 depcomp = $(SHELL) $(top_srcdir)/admin/depcomp
 am__depfiles_maybe = depfiles
-#>- @AMDEP_TRUE@DEP_FILES = ./$(DEPDIR)/autostart.Plo ./$(DEPDIR)/dummy.Po \
-#>- @AMDEP_TRUE@	./$(DEPDIR)/kinit.Po ./$(DEPDIR)/kioslave.Po \
-#>- @AMDEP_TRUE@	./$(DEPDIR)/klauncher.Plo \
+#>- @AMDEP_TRUE@DEP_FILES = ./$(DEPDIR)/autostart.Plo ./$(DEPDIR)/kinit.Po \
+#>- @AMDEP_TRUE@	./$(DEPDIR)/kioslave.Po ./$(DEPDIR)/klauncher.Plo \
 #>- @AMDEP_TRUE@	./$(DEPDIR)/klauncher_main.Plo \
 #>- @AMDEP_TRUE@	./$(DEPDIR)/kwrapper.Po ./$(DEPDIR)/lnusertemp.Po \
-#>- @AMDEP_TRUE@	./$(DEPDIR)/setproctitle.Po ./$(DEPDIR)/shell.Po \
-#>- @AMDEP_TRUE@	./$(DEPDIR)/wrapper.Po
-#>+ 15
-@AMDEP_TRUE@@KDE_USE_FINAL_TRUE@DEP_FILES =   $(DEPDIR)/klauncher_la.all_cpp.P $(DEPDIR)/kdeinit.all_cpp.P  ./$(DEPDIR)/autostart.Plo ./$(DEPDIR)/dummy.Po \
-@AMDEP_TRUE@@KDE_USE_FINAL_TRUE@	@AMDEP_TRUE@	./$(DEPDIR)/kinit.Po ./$(DEPDIR)/kioslave.Po \
-@AMDEP_TRUE@@KDE_USE_FINAL_TRUE@	@AMDEP_TRUE@	./$(DEPDIR)/klauncher.Plo \
+#>- @AMDEP_TRUE@	./$(DEPDIR)/main.Po ./$(DEPDIR)/setproctitle.Po \
+#>- @AMDEP_TRUE@	./$(DEPDIR)/shell.Po ./$(DEPDIR)/wrapper.Po
+#>+ 13
+@AMDEP_TRUE@@KDE_USE_FINAL_TRUE@DEP_FILES =   $(DEPDIR)/klauncher_la.all_cpp.P $(DEPDIR)/kdeinit.all_cpp.P  ./$(DEPDIR)/autostart.Plo ./$(DEPDIR)/kinit.Po \
+@AMDEP_TRUE@@KDE_USE_FINAL_TRUE@	@AMDEP_TRUE@	./$(DEPDIR)/kioslave.Po ./$(DEPDIR)/klauncher.Plo \
 @AMDEP_TRUE@@KDE_USE_FINAL_TRUE@	@AMDEP_TRUE@	./$(DEPDIR)/klauncher_main.Plo \
 @AMDEP_TRUE@@KDE_USE_FINAL_TRUE@	@AMDEP_TRUE@	./$(DEPDIR)/kwrapper.Po ./$(DEPDIR)/lnusertemp.Po \
-@AMDEP_TRUE@@KDE_USE_FINAL_TRUE@	@AMDEP_TRUE@	./$(DEPDIR)/setproctitle.Po ./$(DEPDIR)/shell.Po \
-@AMDEP_TRUE@@KDE_USE_FINAL_TRUE@	@AMDEP_TRUE@	./$(DEPDIR)/wrapper.Po
-@AMDEP_TRUE@@KDE_USE_FINAL_FALSE@DEP_FILES =   ./$(DEPDIR)/autostart.Plo ./$(DEPDIR)/dummy.Po \
-@AMDEP_TRUE@@KDE_USE_FINAL_FALSE@	@AMDEP_TRUE@	./$(DEPDIR)/kinit.Po ./$(DEPDIR)/kioslave.Po \
-@AMDEP_TRUE@@KDE_USE_FINAL_FALSE@	@AMDEP_TRUE@	./$(DEPDIR)/klauncher.Plo \
+@AMDEP_TRUE@@KDE_USE_FINAL_TRUE@	@AMDEP_TRUE@	./$(DEPDIR)/main.Po ./$(DEPDIR)/setproctitle.Po \
+@AMDEP_TRUE@@KDE_USE_FINAL_TRUE@	@AMDEP_TRUE@	./$(DEPDIR)/shell.Po ./$(DEPDIR)/wrapper.Po
+@AMDEP_TRUE@@KDE_USE_FINAL_FALSE@DEP_FILES =   ./$(DEPDIR)/autostart.Plo ./$(DEPDIR)/kinit.Po \
+@AMDEP_TRUE@@KDE_USE_FINAL_FALSE@	@AMDEP_TRUE@	./$(DEPDIR)/kioslave.Po ./$(DEPDIR)/klauncher.Plo \
 @AMDEP_TRUE@@KDE_USE_FINAL_FALSE@	@AMDEP_TRUE@	./$(DEPDIR)/klauncher_main.Plo \
 @AMDEP_TRUE@@KDE_USE_FINAL_FALSE@	@AMDEP_TRUE@	./$(DEPDIR)/kwrapper.Po ./$(DEPDIR)/lnusertemp.Po \
-@AMDEP_TRUE@@KDE_USE_FINAL_FALSE@	@AMDEP_TRUE@	./$(DEPDIR)/setproctitle.Po ./$(DEPDIR)/shell.Po \
-@AMDEP_TRUE@@KDE_USE_FINAL_FALSE@	@AMDEP_TRUE@	./$(DEPDIR)/wrapper.Po
+@AMDEP_TRUE@@KDE_USE_FINAL_FALSE@	@AMDEP_TRUE@	./$(DEPDIR)/main.Po ./$(DEPDIR)/setproctitle.Po \
+@AMDEP_TRUE@@KDE_USE_FINAL_FALSE@	@AMDEP_TRUE@	./$(DEPDIR)/shell.Po ./$(DEPDIR)/wrapper.Po
 
 COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
 	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
@@ -592,13 +589,13 @@
 	-rm -f *.tab.c
 
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/autostart.Plo@am__quote@
-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/dummy.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/kinit.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/kioslave.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/klauncher.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/klauncher_main.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/kwrapper.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/lnusertemp.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/main.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/setproctitle.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/shell.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/wrapper.Po@am__quote@
@@ -751,7 +748,7 @@
 	-rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH
 #>- DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 #>+ 4
-KDE_DIST=README.DCOP LICENSE.setproctitle README.autostart README.wrapper startkde.example 
+KDE_DIST=startkde.example LICENSE.setproctitle README.wrapper README.autostart README.DCOP 
 
 DISTFILES= $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST) $(KDE_DIST)
 
@@ -897,9 +894,6 @@
 kwrapper.o: wrapper.c
 
 shell.o: wrapper.c
-
-dummy.cpp:
-	echo > dummy.cpp
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
 .NOEXPORT:
