$NetBSD: patch-ba,v 1.3 2003/01/02 09:12:39 skrll Exp $

--- kinit/Makefile.in.orig	Tue Nov 26 08:57:39 2002
+++ kinit/Makefile.in
@@ -324,8 +324,7 @@ klauncher_la_LIBADD = $(LIB_KSYCOCA)
 klauncher_la_SOURCES = klauncher.cpp klauncher_main.cpp autostart.cpp
 
 klauncher_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-klauncher_LDADD = klauncher.la
-klauncher_SOURCES = dummy.cpp
+klauncher_SOURCES = main.cpp
 
 METASOURCES = AUTO
 
@@ -374,11 +373,12 @@ am_kioslave_OBJECTS = kioslave.$(OBJEXT)
 #>+ 1
 kioslave_OBJECTS = kioslave.$(OBJEXT)
 kioslave_DEPENDENCIES =
-am_klauncher_OBJECTS = dummy.$(OBJEXT)
+am_klauncher_OBJECTS = main.$(OBJEXT)
 #>- klauncher_OBJECTS = $(am_klauncher_OBJECTS)
 #>+ 1
-klauncher_OBJECTS = dummy.$(OBJEXT)
-klauncher_DEPENDENCIES = klauncher.la
+klauncher_OBJECTS = main.$(OBJEXT)
+klauncher_LDADD = $(LDADD)
+klauncher_DEPENDENCIES =
 am_kshell_OBJECTS = shell.$(OBJEXT)
 #>- kshell_OBJECTS = $(am_kshell_OBJECTS)
 #>+ 1
@@ -404,25 +404,25 @@ CPPFLAGS = @CPPFLAGS@
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
 depcomp = $(SHELL) $(top_srcdir)/admin/depcomp
-#>- @AMDEP_TRUE@DEP_FILES = $(DEPDIR)/autostart.Plo $(DEPDIR)/dummy.Po \
-#>- @AMDEP_TRUE@	$(DEPDIR)/kinit.Po $(DEPDIR)/kioslave.Po \
-#>- @AMDEP_TRUE@	$(DEPDIR)/klauncher.Plo \
+#>- @AMDEP_TRUE@DEP_FILES = $(DEPDIR)/autostart.Plo $(DEPDIR)/kinit.Po \
+#>- @AMDEP_TRUE@	$(DEPDIR)/kioslave.Po $(DEPDIR)/klauncher.Plo \
 #>- @AMDEP_TRUE@	$(DEPDIR)/klauncher_main.Plo $(DEPDIR)/kwrapper.Po \
-#>- @AMDEP_TRUE@	$(DEPDIR)/lnusertemp.Po $(DEPDIR)/setproctitle.Po \
-#>- @AMDEP_TRUE@	$(DEPDIR)/shell.Po $(DEPDIR)/wrapper.Po
+#>- @AMDEP_TRUE@	$(DEPDIR)/lnusertemp.Po $(DEPDIR)/main.Po \
+#>- @AMDEP_TRUE@	$(DEPDIR)/setproctitle.Po $(DEPDIR)/shell.Po \
+#>- @AMDEP_TRUE@	$(DEPDIR)/wrapper.Po
 #>+ 13
-@AMDEP_TRUE@@KDE_USE_FINAL_TRUE@DEP_FILES =   $(DEPDIR)/klauncher_la.all_cpp.P $(DEPDIR)/kdeinit.all_cpp.P  $(DEPDIR)/autostart.Plo $(DEPDIR)/dummy.Po \
-@AMDEP_TRUE@@KDE_USE_FINAL_TRUE@	@AMDEP_TRUE@	$(DEPDIR)/kinit.Po $(DEPDIR)/kioslave.Po \
-@AMDEP_TRUE@@KDE_USE_FINAL_TRUE@	@AMDEP_TRUE@	$(DEPDIR)/klauncher.Plo \
+@AMDEP_TRUE@@KDE_USE_FINAL_TRUE@DEP_FILES =   $(DEPDIR)/klauncher_la.all_cpp.P $(DEPDIR)/kdeinit.all_cpp.P  $(DEPDIR)/autostart.Plo $(DEPDIR)/kinit.Po \
+@AMDEP_TRUE@@KDE_USE_FINAL_TRUE@	@AMDEP_TRUE@	$(DEPDIR)/kioslave.Po $(DEPDIR)/klauncher.Plo \
 @AMDEP_TRUE@@KDE_USE_FINAL_TRUE@	@AMDEP_TRUE@	$(DEPDIR)/klauncher_main.Plo $(DEPDIR)/kwrapper.Po \
-@AMDEP_TRUE@@KDE_USE_FINAL_TRUE@	@AMDEP_TRUE@	$(DEPDIR)/lnusertemp.Po $(DEPDIR)/setproctitle.Po \
-@AMDEP_TRUE@@KDE_USE_FINAL_TRUE@	@AMDEP_TRUE@	$(DEPDIR)/shell.Po $(DEPDIR)/wrapper.Po
-@AMDEP_TRUE@@KDE_USE_FINAL_FALSE@DEP_FILES =   $(DEPDIR)/autostart.Plo $(DEPDIR)/dummy.Po \
-@AMDEP_TRUE@@KDE_USE_FINAL_FALSE@	@AMDEP_TRUE@	$(DEPDIR)/kinit.Po $(DEPDIR)/kioslave.Po \
-@AMDEP_TRUE@@KDE_USE_FINAL_FALSE@	@AMDEP_TRUE@	$(DEPDIR)/klauncher.Plo \
+@AMDEP_TRUE@@KDE_USE_FINAL_TRUE@	@AMDEP_TRUE@	$(DEPDIR)/lnusertemp.Po $(DEPDIR)/main.Po \
+@AMDEP_TRUE@@KDE_USE_FINAL_TRUE@	@AMDEP_TRUE@	$(DEPDIR)/setproctitle.Po $(DEPDIR)/shell.Po \
+@AMDEP_TRUE@@KDE_USE_FINAL_TRUE@	@AMDEP_TRUE@	$(DEPDIR)/wrapper.Po
+@AMDEP_TRUE@@KDE_USE_FINAL_FALSE@DEP_FILES =   $(DEPDIR)/autostart.Plo $(DEPDIR)/kinit.Po \
+@AMDEP_TRUE@@KDE_USE_FINAL_FALSE@	@AMDEP_TRUE@	$(DEPDIR)/kioslave.Po $(DEPDIR)/klauncher.Plo \
 @AMDEP_TRUE@@KDE_USE_FINAL_FALSE@	@AMDEP_TRUE@	$(DEPDIR)/klauncher_main.Plo $(DEPDIR)/kwrapper.Po \
-@AMDEP_TRUE@@KDE_USE_FINAL_FALSE@	@AMDEP_TRUE@	$(DEPDIR)/lnusertemp.Po $(DEPDIR)/setproctitle.Po \
-@AMDEP_TRUE@@KDE_USE_FINAL_FALSE@	@AMDEP_TRUE@	$(DEPDIR)/shell.Po $(DEPDIR)/wrapper.Po
+@AMDEP_TRUE@@KDE_USE_FINAL_FALSE@	@AMDEP_TRUE@	$(DEPDIR)/lnusertemp.Po $(DEPDIR)/main.Po \
+@AMDEP_TRUE@@KDE_USE_FINAL_FALSE@	@AMDEP_TRUE@	$(DEPDIR)/setproctitle.Po $(DEPDIR)/shell.Po \
+@AMDEP_TRUE@@KDE_USE_FINAL_FALSE@	@AMDEP_TRUE@	$(DEPDIR)/wrapper.Po
 
 COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
 	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
@@ -569,13 +569,13 @@ distclean-compile:
 	-rm -f *.tab.c
 
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/autostart.Plo@am__quote@
-@AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/dummy.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/kinit.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/kioslave.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/klauncher.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/klauncher_main.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/kwrapper.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/lnusertemp.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/main.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/setproctitle.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/shell.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/wrapper.Po@am__quote@
@@ -716,7 +716,7 @@ distclean-tags:
 
 #>- DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 #>+ 4
-KDE_DIST=README.DCOP LICENSE.setproctitle README.autostart README.wrapper startkde.example 
+KDE_DIST=startkde.example LICENSE.setproctitle README.wrapper README.autostart README.DCOP 
 
 DISTFILES= $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST) $(KDE_DIST)
 
@@ -858,9 +858,6 @@ kwrapper.c : wrapper.c
 
 shell.c : wrapper.c
 # do nothing, it just depends on it
-
-dummy.cpp:
-	echo > dummy.cpp
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
 .NOEXPORT:
