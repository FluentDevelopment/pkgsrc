$NetBSD: patch-aa,v 1.15 2001/10/12 13:29:40 tron Exp $

--- configure.orig	Tue Aug 21 23:41:20 2001
+++ configure	Fri Oct 12 15:12:57 2001
@@ -3471,12 +3471,9 @@
 
 
 
-GLIB_CFLAGS=`echo $GTK_CFLAGS | sed 's/^.*\(-I[^ ]*glib[^ ]*  *-I[^ ]*\).*$/\1/'`
-GLIB_LDFLAGS=`echo $GTK_LIBS | sed -e 's/^.*-lgdk[^ ]* *\(-L[^ ]*\).*$/\1/' -e 's/^.* -lgdk[^ ]* .*$//'`
-if test -z "$GLIB_LDFLAGS" ; then
-  GLIB_LDFLAGS=`echo $GTK_LIBS | sed -e 's/\(-L[^ ]*\) .*$/\1/' -e 's/^.*\(-L[^ ]*\)$/\1/'`
-fi 
-GLIB_LIBS="$GLIB_LDFLAGS `echo $GTK_LIBS | sed 's/^.*\(-lglib[^ ]*\).*$/\1/'`"
+GLIB_CFLAGS="`$GLIB_CONFIG --cflags`"
+GLIB_LIBS="`$GLIB_CONFIG --libs`"
+GLIB_LDFLAGS="$GLIB_LIBS"
 
 
 
@@ -5314,6 +5311,11 @@
    rm -f po/POTFILES
    sed -e "/^#/d" -e "/^\$/d" -e "s,.*,	$posrcprefix& \\\\," -e "\$s/\(.*\) \\\\/\1/" \
 	< $srcdir/po/POTFILES.in > po/POTFILES
+
+# NetBSD: set DATADIRNAME to "share"
+DATADIRNAME="${PKGLOCALEDIR}"
+INTLDEPS=
+INTLLIBS="-lintl"
   
 # AM_GNOME_GETTEXT above substs $DATADIRNAME
 # this is the directory where the *.{mo,gmo} files are installed
@@ -5415,7 +5417,7 @@
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
-  save_LDFLAGS="$LDFLAGBS"
+  save_LDFLAGS="$LDFLAGS"
   LDFLAGS="$LDFLAGS `glib-config --libs gmodule`"
   if test "$cross_compiling" = yes; then
   ac_cv_gmodule=yes
@@ -10116,7 +10118,7 @@
 GTKXMHTML_LIBS="-lgtkxmhtml $LIBGTKXMHTML_LIBS"
 ZVT_LIBS="-lzvt $UTIL_LIBS $GTK_LIBS"
 
-GNOME_LIBDIR='-L${libdir}'
+GNOME_LIBDIR='-L${libdir} -Wl,-R${libdir}'
 GNOME_INCLUDEDIR='-I${includedir} -DNEED_GNOMESUPPORT_H -I${pkglibdir}/include'
 GNOME_IDLDIR='-I${datadir}/idl'
 
@@ -10220,8 +10222,8 @@
 fi
 	if test x$gnome_cv_orbit_found = xyes; then
 		
-		ORBIT_CFLAGS=`orbit-config --cflags client server`
-		ORBIT_LIBS=`orbit-config --use-service=name --libs client server`
+		ORBIT_CFLAGS=`$ORBIT_CONFIG --cflags client server`
+		ORBIT_LIBS=`$ORBIT_CONFIG --use-service=name --libs client server`
 		
 		
 	else
