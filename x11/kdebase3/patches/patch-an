$NetBSD: patch-an,v 1.3 2003/03/11 13:10:19 markd Exp $

--- kcontrol/kcontrol/Makefile.am.orig	Fri Jan  3 17:41:16 2003
+++ kcontrol/kcontrol/Makefile.am
@@ -22,41 +22,52 @@ METASOURCES = AUTO
 
 SUBDIRS = . pics
 
-CLEANFILES = dummy.cpp
-
 bin_PROGRAMS = kcontrol kcmshell kcminit
-lib_LTLIBRARIES = kcontrol.la kcmshell.la kcminit.la
-
-kcontrol_la_SOURCES = main.cpp toplevel.cpp indexwidget.cpp searchwidget.cpp \
-	helpwidget.cpp moduleinfo.cpp modules.cpp proxywidget.cpp \
-	modloader.cpp dockcontainer.cpp aboutwidget.cpp global.cpp \
-	quickhelp.cpp moduletreeview.cpp moduleiconview.cpp \
+lib_LTLIBRARIES = libkcontrol_main.la kcontrol.la \
+	libkcmshell_main.la kcmshell.la \
+	libkcminit_main.la kcminit.la
+
+libkcontrol_main_la_SOURCES = main.cpp toplevel.cpp indexwidget.cpp \
+	searchwidget.cpp helpwidget.cpp moduleinfo.cpp modules.cpp \
+	proxywidget.cpp modloader.cpp dockcontainer.cpp aboutwidget.cpp \
+	global.cpp quickhelp.cpp moduletreeview.cpp moduleiconview.cpp \
 	kecdialog.cpp kcrootonly.cpp moduleIface.cpp moduleIface.skel
 
-kcontrol_la_LIBADD  = $(LIB_KDEUI) $(LIB_KSYCOCA)
+libkcontrol_main_la_LIBADD  = $(LIB_KDEUI) $(LIB_KSYCOCA)
+libkcontrol_main_la_LDFLAGS = $(all_libraries)
+
+kcontrol_la_SOURCES = kcontrol_main.cpp
+kcontrol_la_LIBADD  = libkcontrol_main.la
 kcontrol_la_LDFLAGS = $(all_libraries) -module -avoid-version
 
-kcmshell_la_SOURCES = kcmshell.cpp moduleinfo.cpp modloader.cpp kecdialog.cpp \
-			proxywidget.cpp kcdialog.cpp global.cpp \
-			kcdialog.skel
-kcmshell_la_LIBADD = $(LIB_KDEUI) $(LIB_KSYCOCA)
+libkcmshell_main_la_SOURCES = kcmshell.cpp moduleinfo.cpp modloader.cpp \
+	kecdialog.cpp proxywidget.cpp kcdialog.cpp global.cpp \
+	kcdialog.skel
+libkcmshell_main_la_LIBADD = $(LIB_KDEUI) $(LIB_KSYCOCA)
+libkcmshell_main_la_LDFLAGS = $(all_libraries)
+
+kcmshell_la_SOURCES = kcmshell_main.cpp
+kcmshell_la_LIBADD = libkcmshell_main.la
 kcmshell_la_LDFLAGS = $(all_libraries) -module -avoid-version
 
+libkcminit_main_la_SOURCES = kcminit.cpp global.cpp
+libkcminit_main_la_LIBADD = $(LIB_KDEUI) $(LIB_KSYCOCA)
+libkcminit_main_la_LDFLAGS = $(all_libraries)
 
 kcminit_la_SOURCES = kcminit.cpp global.cpp
-kcminit_la_LIBADD   = $(LIB_KDEUI) $(LIB_KSYCOCA)
+kcminit_la_LIBADD = libkcminit_main.la
 kcminit_la_LDFLAGS = $(all_libraries) -module -avoid-version
 
-kcontrol_SOURCES = dummy.cpp
-kcontrol_LDADD = kcontrol.la
+kcontrol_SOURCES = kcontrol_main.cpp
+kcontrol_LDADD = libkcontrol_main.la
 kcontrol_LDFLAGS = $(all_libraries) $(KDE_RPATH) -export-dynamic
 
-kcmshell_SOURCES = dummy.cpp
-kcmshell_LDADD = kcmshell.la
+kcmshell_SOURCES = kcmshell_main.cpp
+kcmshell_LDADD = libkcmshell_main.la
 kcmshell_LDFLAGS = $(all_libraries) $(KDE_RPATH) -export-dynamic
 
-kcminit_SOURCES = dummy.cpp
-kcminit_LDADD = kcminit.la
+kcminit_SOURCES = kcminit_main.cpp
+kcminit_LDADD = libkcminit_main.la
 kcminit_LDFLAGS = $(all_libraries) $(KDE_RPATH) -export-dynamic
 
 rccontroldir = $(kde_datadir)/kcontrol
@@ -81,6 +92,3 @@ EXTRA_DIST = $(data_DATA)
 
 messages: rc.cpp
 	$(XGETTEXT) *.cpp -o $(podir)/kcontrol.pot
-
-dummy.cpp:
-	echo > dummy.cpp
