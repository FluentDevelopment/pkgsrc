$NetBSD: patch-ab,v 1.3 2003/03/11 13:10:18 markd Exp $

--- kate/app/Makefile.am.orig	Fri Dec  6 09:39:40 2002
+++ kate/app/Makefile.am
@@ -1,4 +1,4 @@
-lib_LTLIBRARIES = libkateinterfaces.la kate.la kwrite.la
+lib_LTLIBRARIES = libkateinterfaces.la libkate_main.la kate.la libkwrite_main.la kwrite.la
 bin_PROGRAMS = kate kwrite
 
 libkateinterfaces_la_SOURCES = kateapp.cpp kateconfigdialog.cpp kateconfigplugindialogpage.cpp \
@@ -10,31 +10,33 @@ libkateinterfaces_la_SOURCES = kateapp.c
 
 libkateinterfaces_la_LIBADD   = ../interfaces/libkateinterfacesprivate.la -lkscript ../lib/libkmultitabbar.la
 libkateinterfaces_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module -avoid-version
-kate_la_SOURCES = katemain.cpp
-kate_la_LIBADD = libkateinterfaces.la
+libkate_main_la_SOURCES = katemain.cpp
+libkate_main_la_LIBADD = libkateinterfaces.la
+libkate_main_la_LDFLAGS = $(all_libraries) $(KDE_RPATH)
+
+kate_la_SOURCES = dummy_main.cpp
+kate_la_LIBADD = libkate_main.la
 kate_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module -avoid-version 
 
-kwrite_la_SOURCES = kwritemain.cpp katefiledialog.cpp kwritedialogs.cpp
-kwrite_la_LIBADD   = -lktexteditor
+libkwrite_main_la_SOURCES = kwritemain.cpp katefiledialog.cpp kwritedialogs.cpp
+libkwrite_main_la_LIBADD   = -lktexteditor
+libkwrite_main_la_LDFLAGS = $(all_libraries) $(KDE_RPATH)
+
+kwrite_la_SOURCES = dummy_main.cpp
+kwrite_la_LIBADD   = libkwrite_main.la
 kwrite_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module -avoid-version
 
-kate_SOURCES = dummy_kate.cpp
-kate_LDADD = kate.la
+kate_SOURCES = dummy_main.cpp
+kate_LDADD = libkate_main.la
 kate_LDFLAGS = $(KDE_RPATH) $(all_libraries)
 
-kwrite_SOURCES = dummy_kwrite.cpp
-kwrite_LDADD = kwrite.la
+kwrite_SOURCES = dummy_main.cpp
+kwrite_LDADD = libkwrite_main.la
 kwrite_LDFLAGS = $(KDE_RPATH) $(all_libraries)
 
 dummy_kate_la.cpp:
 	echo > dummy_kate_la.cpp
 
-dummy_kate.cpp:
-	echo > dummy_kate.cpp
-
-dummy_kwrite.cpp:
-	echo > dummy_kwrite.cpp
-                         
 METASOURCES = AUTO  
   
 INCLUDES= -I../interfaces -I$(srcdir)/../lib $(all_includes)
