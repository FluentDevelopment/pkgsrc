$NetBSD: patch-cc,v 1.3 2003/03/11 13:10:23 markd Exp $

--- kmenuedit/Makefile.am.orig	Mon Sep 16 09:08:52 2002
+++ kmenuedit/Makefile.am
@@ -1,17 +1,19 @@
 INCLUDES = $(all_includes)
 
 bin_PROGRAMS = kmenuedit
-lib_LTLIBRARIES = kmenuedit.la
+lib_LTLIBRARIES = libkmenuedit_main.la kmenuedit.la
 
-CLEANFILES = dummy.cpp
+libkmenuedit_main_la_SOURCES = basictab.cpp treeview.cpp desktopfileeditor.cpp menueditview.cpp kmenuedit.cpp main.cpp khotkeys.cpp
 
-kmenuedit_la_SOURCES = basictab.cpp treeview.cpp desktopfileeditor.cpp menueditview.cpp kmenuedit.cpp main.cpp khotkeys.cpp
+libkmenuedit_main_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO)
+libkmenuedit_main_la_LDFLAGS = $(all_libraries)
 
-kmenuedit_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO)
+kmenuedit_la_SOURCES = kmenuedit_main.cpp
+kmenuedit_la_LIBADD = libkmenuedit_main.la
 kmenuedit_la_LDFLAGS = $(all_libraries) -module -avoid-version
 
-kmenuedit_SOURCES = dummy.cpp
-kmenuedit_LDADD   = kmenuedit.la
+kmenuedit_SOURCES = kmenuedit_main.cpp
+kmenuedit_LDADD   = libkmenuedit_main.la
 kmenuedit_LDFLAGS = $(all_libraries) $(KDE_RPATH)
 
 noinst_HEADERS = kmenuedit.h menueditview.h treeview.h desktopfileeditor.h basictab.h khotkeys.h
