$NetBSD: patch-ad,v 1.3 2003/03/11 13:02:09 markd Exp $

--- src/kernel/qthread_unix.cpp.orig	2002-12-09 09:40:39.000000000 +0000
+++ src/kernel/qthread_unix.cpp
@@ -378,10 +378,17 @@ void QThread::start()
     int ret;
     pthread_attr_t attr;
     pthread_attr_init( &attr );
+#if defined(_POSIX_THREAD_PRIORITY_SCHEDULING)
     pthread_attr_setinheritsched( &attr, PTHREAD_INHERIT_SCHED );
+#endif
     pthread_attr_setdetachstate( &attr, PTHREAD_CREATE_DETACHED );
     if ( d->stacksize > 0 ) {
+#if defined(_POSIX_THREAD_ATTR_STACKSIZE)
 	ret = pthread_attr_setstacksize( &attr, d->stacksize );
+#else
+	ret = 1;
+#endif
+
 	if ( ret ) {
 #ifdef QT_CHECK_STATE
 	    qWarning( "QThread::start: thread stack size error: %s", strerror( ret ) ) ;
@@ -392,7 +399,8 @@ void QThread::start()
 	    d->running = FALSE;
 	    d->finished = FALSE;
 	    return;
-	}
+        }
+
     }
     d->args[0] = this;
     d->args[1] = d;
