$NetBSD: patch-ak,v 1.1 2001/10/31 01:44:37 minoura Exp $

--- battery/read-battery.c.orig	Thu Aug 23 18:09:54 2001
+++ battery/read-battery.c	Wed Oct 31 00:34:53 2001
@@ -211,6 +211,9 @@
       return FALSE;
     }
 
+#ifdef OAPM_IOC_GETPOWER
+  aip.batteryid = 0;	/* APM BIOS, that is, the summary */
+#endif
   if (ioctl(fd, APM_IOC_GETPOWER, &aip) == -1) {
     g_error(_("ioctl failed on /dev/apm."));
     return FALSE;
