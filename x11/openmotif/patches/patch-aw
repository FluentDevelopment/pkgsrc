$NetBSD: patch-aw,v 1.2 2004/08/31 03:10:16 danw Exp $

--- config/cf/darwin.cf.orig	Sun Mar 14 11:07:29 2004
+++ config/cf/darwin.cf
@@ -0,0 +1,129 @@
+XCOMM platform:  $XFree86: xc/config/cf/darwin.cf,v 1.34 2002/12/04 04:40:15 torrey Exp $
+
+/* Darwin / Mac OS X configuration by John Carmack <johnc@idsoftware.com> */
+
+/* imake determines the default values by parsing uname */
+#ifndef OSName
+#define OSName                  DefaultOSName
+#endif
+#ifndef OSVendor
+#define OSVendor                Apple Computer, Inc.
+#endif
+#ifndef OSMajorVersion
+#define OSMajorVersion          DefaultOSMajorVersion
+#endif
+#ifndef OSMinorVersion
+#define OSMinorVersion          DefaultOSMinorVersion
+#endif
+#ifndef OSTeenyVersion
+#define OSTeenyVersion          DefaultOSTeenyVersion
+#endif
+
+XCOMM operating system:  OSName (OSMajorVersion./**/OSMinorVersion./**/OSTeenyVersion)
+
+/*
+ * Define the operating system's capabilities
+ */
+#define HasSnprintf             YES
+#define HasPutenv               YES
+#define HasBSD44Sockets         YES
+#define Malloc0ReturnsNull      NO
+#define HasShadowPasswd         NO
+#define HasUsableFileMmap       YES
+#define HasZlib                 YES
+#ifndef HasShm
+# define HasShm                 YES
+#endif
+#define HasNdbm                 YES
+#if OSMajorVersion >= 6
+# define HasNCurses             YES
+#else
+# define HasNCurses             NO
+#endif
+#ifndef HasGroff
+# define HasGroff               YES
+#endif
+#ifndef HasGcc3
+# define HasGcc3                NO
+#endif
+
+/* Thread support */
+#define HasPosixThreads         YES
+#define SystemMTDefines         -D_REENTRANT
+#if OSMajorVersion >= 6
+# define HasThreadSafeAPI       YES
+# define MTSafeAPIDefines       -DXUSE_MTSAFE_API -DXNO_MTSAFE_UNISTDAPI
+#else
+# define HasThreadSafeAPI       NO
+# define MTSafeAPIDefines       -DXOS_USE_MTSAFE_NETDBAPI
+#endif
+
+/* Libtool on Darwin always uses minor numbers */
+#define LibtoolMinorVersions	YES
+
+/* we don't need -lm */
+#define MathLibrary             /**/
+
+#define TermcapLibrary          -lcurses
+#define SetTtyGroup             YES             /* for xterm */
+
+/* we don't have a dbm library */
+#define DBMLibrary              /**/
+
+#define MkdirHierCmd            mkdir -p
+
+/* our cpp isn't in /lib/cpp and early versions don't like -undef */
+#define CppCmd                  cpp
+#if HasGcc3
+# define RawCppCmd              CppCmd -undef
+#else
+# define RawCppCmd              CppCmd
+#endif
+
+/* we have a gcc compatible compiler, but its not called gcc */
+#ifndef CcCmd
+#define CcCmd                   cc
+#endif
+#ifndef CplusplusCmd
+#define CplusplusCmd            c++
+#endif
+
+/* default flags to pass to cc */
+#ifndef DefaultCCOptions
+# define DefaultCCOptions       -no-cpp-precomp
+#endif
+
+/* flags to pass to cc when building libraries */
+#ifndef LibraryCCOptions
+# define LibraryCCOptions       DefaultCCOptions -fno-common
+#endif
+
+#define OptimizedCDebugFlags	-g -Os
+
+/*
+ * __DARWIN__ will be used for platform specific #ifdefs that can't
+ * be handled by existing X defines.
+ *
+ * Darwin's alloca() seg faults (rather than returning NULL) on failed
+ * allocations, so we can't use it.
+ *
+ * Darwin's setlocale() doesn't work properly, so use X11's instead.
+ */
+#define StandardDefines         -D__DARWIN__ -DNO_ALLOCA -DX_LOCALE -DCSRG_BASED
+
+#define BuildLibPathVar         DYLD_LIBRARY_PATH
+
+/* include rules to build shared libraries */
+#include <darwinLib.rules>
+
+/*
+ * Darwin specific Imake Config files
+ */
+#ifndef LocalConfigFiles
+#define LocalConfigFiles \
+	darwinLib.rules \
+	darwinLib.tmpl
+#endif
+
+/* include all the XFree86 rules */
+#include <xfree86.cf>
