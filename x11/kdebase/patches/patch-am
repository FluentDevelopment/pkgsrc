$NetBSD: patch-am,v 1.8 2001/09/10 08:23:19 skrll Exp $

--- kdm/session.c.orig	Fri Aug 20 19:35:10 1999
+++ kdm/session.c
@@ -50,6 +50,7 @@
 #include <pwd.h>
 #include <grp.h>
 #include <sys/types.h>
+#include <sys/param.h>
 #ifdef AIXV3
 # include <usersec.h>
 #endif
@@ -103,7 +104,7 @@
 char *crypt(char *key, char *salt);
 #endif
 
-#ifdef HAVE_LOGIN_CAP_H
+#if defined(HAVE_LOGIN_CAP_H) && !defined(__NetBSD__)
 #include <login_cap.h>		/* BSDI-like login classes */
 #define HAVE_SETUSERCONTEXT	/* assume we have setusercontext if we have
 				 * the header file
@@ -1089,7 +1090,7 @@
     return env;
 }
 
-#if defined(Lynx) || defined(SCO) && !defined(SCO_USA) || !defined(HAVE_CRYPT_H)
+#if !defined(__NetBSD__) && (defined(Lynx) || defined(SCO) && !defined(SCO_USA) || !defined(HAVE_CRYPT_H))
 char *crypt(s1, s2)
 	char	*s1, *s2;
 {
