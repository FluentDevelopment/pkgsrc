$NetBSD: patch-ac,v 1.15 2005/06/28 10:03:14 wiz Exp $

--- configure.orig	2005-06-23 03:02:21.000000000 +0200
+++ configure
@@ -2856,6 +2856,9 @@ echo "${ECHO_T}Turning on SGI compiler w
     esac
   fi
 
+# Disable c89 options, since these trigger more errors than expected and
+# cause build failures.
+if false; then
 if test -n "$GCC"; then
    if test -n "$GCC"; then
    echo "$as_me:$LINENO: checking whether gcc accepts -std" >&5
@@ -2902,6 +2905,7 @@ echo "${ECHO_T}Disabling C++ comments in
      CC="$CC -Wp,-lang-c89"
    fi
   fi
+fi
 
 if test -n "$GCC"; then
    if test -n "$GCC"; then
@@ -12972,7 +12976,7 @@ if test "${ac_cv_lib_krb4_krb_get_tf_rea
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lkrb4  $LIBS"
+LIBS="-lkrb -lcrypto -lroken -lcom_err  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -13062,7 +13066,7 @@ echo "$as_me: WARNING: Cannot find compa
     # from Matt Knopp <mhat@infocalypse.netlag.com>
     # (who got it from amu@mit.edu)
 
-    PASSWD_LIBS="$PASSWD_LIBS -lkrb4 -ldes425 -lkrb5 -lk5crypto -lcom_err"
+    PASSWD_LIBS="$PASSWD_LIBS -lkrb5 -lasn1 -lkrb -lcrypto -lroken -lcom_err"
 
     # jwz: MacOS X uses -lkrb5, but not -lcrypt
 
@@ -14699,11 +14703,7 @@ echo "${ECHO_T}$ac_cv_gtk_config_libs" >
   ac_gtk_config_libs=$ac_cv_gtk_config_libs
 
   GTK_EXTRA_OBJS=""
-  GTK_DATADIR=""
-  if test "$have_gtk" = yes; then
-    GTK_DATADIR=`$pkg_config --variable=prefix gtk+-2.0`
-    GTK_DATADIR="$GTK_DATADIR/share"
-  fi
+  GTK_DATADIR="$datadir"
 
   if test "$have_gtk" = yes; then
     INCLUDES="$INCLUDES $ac_gtk_config_cflags"
