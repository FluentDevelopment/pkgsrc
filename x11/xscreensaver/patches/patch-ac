$NetBSD: patch-ac,v 1.13 2004/09/27 14:19:44 wiz Exp $

--- configure.orig	2004-08-15 00:22:36.000000000 +0200
+++ configure
@@ -2689,6 +2689,9 @@ echo "${ECHO_T}Turning on SGI compiler w
     esac
   fi
 
+# Disable c89 options, since these trigger more errors than expected and
+# cause build failures.
+if false; then
 if test -n "$GCC"; then
    if test -n "$GCC"; then
    echo "$as_me:$LINENO: checking whether gcc accepts -std" >&5
@@ -2735,6 +2738,7 @@ echo "${ECHO_T}Disabling C++ comments in
      CC="$CC -Wp,-lang-c89"
    fi
   fi
+fi
 
 if test -n "$GCC"; then
    if test -n "$GCC"; then
@@ -13226,7 +13230,7 @@ if test "${ac_cv_lib_krb4_krb_get_tf_rea
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lkrb4  $LIBS"
+LIBS="-lkrb -lcrypto -lroken -lcom_err  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -13316,7 +13320,7 @@ echo "$as_me: WARNING: Cannot find compa
     # from Matt Knopp <mhat@infocalypse.netlag.com>
     # (who got it from amu@mit.edu)
 
-    PASSWD_LIBS="$PASSWD_LIBS -lkrb4 -ldes425 -lkrb5 -lk5crypto -lcom_err"
+    PASSWD_LIBS="$PASSWD_LIBS -lkrb5 -lasn1 -lkrb -lcrypto -lroken -lcom_err"
 
     # jwz: MacOS X uses -lkrb5, but not -lcrypt
 
@@ -15535,19 +15539,7 @@ fi
   fi
 
 
-  GNOME_DATADIR=""
-  if test "$have_gtk" = yes; then
-    if test -n "$pkg_config"; then
-      if test "$have_gtk2" = yes; then
-        GNOME_DATADIR=`$pkg_config --variable=prefix gtk+-2.0`
-      else
-        GNOME_DATADIR=`$pkg_config --variable=prefix gtk+`
-      fi
-    else
-      GNOME_DATADIR=`$gtk_config --prefix`
-    fi
-    GNOME_DATADIR="$GNOME_DATADIR/share"
-  fi
+  GNOME_DATADIR="$datadir"
 
   # .desktop files go in different places in Gnome 1.x and Gnome 2.x...
   if test "$have_gtk2" = yes; then
