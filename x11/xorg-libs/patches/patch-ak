$NetBSD: patch-ak,v 1.4 2006/01/18 23:53:06 xtraeme Exp $

--- programs/xdm/config/Imakefile.orig	2006-01-02 10:57:27.000000000 +0100
+++ programs/xdm/config/Imakefile	2006-01-02 10:59:46.000000000 +0100
@@ -23,9 +23,9 @@
 # define XdmbwPixmap XVendorStdFilePrefix-bw.xpm
 #endif
 
-CHOOSERPATH = $(XDMDIR)/chooser
+CHOOSERPATH = $(BINDIR)/chooser
 
-XPM_DEFINES=-DXPM -DBITMAPDIR=$(XDMDIR)/pixmaps -DXDM_PIXMAP=XdmPixmap\ @@\
+XPM_DEFINES=-DXPM -DBITMAPDIR=$(INCDIR)/X11/pixmaps -DXDM_PIXMAP=XdmPixmap\ @@\
 	-DXDM_BWPIXMAP=XdmbwPixmap
 
 XDMLOGDIR = $(LOGDIRECTORY)
@@ -48,24 +48,23 @@
 #endif
 
 CppFileTarget(Xservers.ws,Xserv.ws.cpp,-DBINDIR=$(BINDIR) -DDEFAULTVT=$(DEFAULTVT) -DSHELL_CMD=$(SHELL_CMD),NullParameter)
-CppFileTarget(xdm-config,xdm-conf.cpp,-DXDMDIR=$(XDMDIR) -DXDMLOGDIR=$(XDMLOGDIR) -DXDMPIDDIR=$(XDMPIDDIR) -DSU=$(SU) -DCHOOSERPATH=$(CHOOSERPATH) $(XPM_DEFINES),NullParameter)
+CppFileTarget(xdm-config,xdm-conf.cpp,-DXDMDIR=$(XDMDIR) -DXDMAUTHDIR=$(XDMVARDIR) -DXDMLOGDIR=$(XDMLOGDIR) -DXDMPIDDIR=$(XDMPIDDIR) -DSU=$(SU) -DCHOOSERPATH=$(CHOOSERPATH) $(XPM_DEFINES),NullParameter)
 CppFileTarget(Xresources,Xres.cpp,$(XPM_DEFINES),NullParameter)
 CppFileTarget(Xsession,Xsession.cpp,-DBINDIR=$(BINDIR) -DDEFAULTVT=$(DEFAULTVT) -DSHELL_CMD=$(SHELL_CMD),NullParameter)
 
 LinkFile(Xservers,Xservers.$(SERVERSTYPE))
 
 #if InstallXdmConfig
-InstallNonExecFile(xdm-config,$(XDMDIR))
-InstallNonExecFile(Xresources,$(XDMDIR))
-InstallNonExecFile(Xservers,$(XDMDIR))
-InstallNonExecFile(Xaccess,$(XDMDIR))
-InstallNamedProg(Xsession,Xsession,$(XDMDIR))
-InstallNamedProg(GiveConsole,GiveConsole,$(XDMDIR))
-InstallNamedProg(TakeConsole,TakeConsole,$(XDMDIR))
-InstallNamedProg(Xsetup_0,Xsetup_0,$(XDMDIR))
-InstallNamedProg(Xstartup,Xstartup,$(XDMDIR))
-InstallNamedProg(Xreset,Xreset,$(XDMDIR))
-InstallNamedProg(Xwilling,Xwilling,$(XDMDIR))
+XDMEGDIR = XdmEgDir
+InstallNonExecFile(xdm-config,$(XDMEGDIR))
+InstallNonExecFile(Xresources,$(XDMEGDIR))
+InstallNonExecFile(Xservers,$(XDMEGDIR))
+InstallNonExecFile(Xaccess,$(XDMEGDIR))
+InstallNamedProg(Xsession,Xsession,$(XDMEGDIR))
+InstallNamedProg(GiveConsole,GiveConsole,$(XDMEGDIR))
+InstallNamedProg(TakeConsole,TakeConsole,$(XDMEGDIR))
+InstallNamedProg(Xsetup_0,Xsetup_0,$(XDMEGDIR))
+InstallNamedProg(Xwilling,Xwilling,$(XDMEGDIR))
 #else
 InstallNonExecFileNoClobber(xdm-config,$(XDMDIR))
 InstallNonExecFileNoClobber(Xresources,$(XDMDIR))
@@ -81,8 +80,8 @@
 #endif
 
 #if InstallXdmConfig
-InstallNonExecFile(XdmPixmap,$(XDMDIR)/pixmaps)
-InstallNonExecFile(XdmbwPixmap,$(XDMDIR)/pixmaps)
+InstallNonExecFile(XdmPixmap,$(INCDIR)/X11/pixmaps)
+InstallNonExecFile(XdmbwPixmap,$(INCDIR)/X11/pixmaps)
 #else
 InstallNonExecFileNoClobber(XdmPixmap,$(XDMDIR)/pixmaps)
 InstallNonExecFileNoClobber(XdmbwPixmap,$(XDMDIR)/pixmaps)
