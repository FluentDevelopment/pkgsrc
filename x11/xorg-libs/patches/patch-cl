$NetBSD: patch-cl,v 1.1 2006/09/14 16:52:54 joerg Exp $

--- programs/Xserver/hw/xfree86/common/xf86Init.c.orig	2006-09-13 14:25:27.000000000 +0200
+++ programs/Xserver/hw/xfree86/common/xf86Init.c
@@ -1905,7 +1905,11 @@ xf86RunVtInit(void)
           FatalError("xf86RunVtInit: fork failed (%s)\n", strerror(errno));
           break;
       case 0:  /* child */
-          setuid(getuid());
+	  if (setuid(getuid()) == -1) {
+	      xf86Msg(X_ERROR, "xf86RunVtInit: setuid failed (%s)\n",
+			 strerror(errno));
+	      exit(255);
+	  }
           /* set stdin, stdout to the consoleFd */
           for (i = 0; i < 2; i++) {
             if (xf86Info.consoleFd != i) {
