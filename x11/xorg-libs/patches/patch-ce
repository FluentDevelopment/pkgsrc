$NetBSD: patch-ce,v 1.1 2006/06/17 12:33:53 markd Exp $

--- programs/Xserver/hw/xfree86/drivers/i810/i830_memory.c.orig	2006-06-06 21:30:22.000000000 +1200
+++ programs/Xserver/hw/xfree86/drivers/i810/i830_memory.c
@@ -1239,7 +1239,7 @@ SetFence(ScrnInfoPtr pScrn, int nr, unsi
 
    i830Reg->Fence[nr] = 0;
 
-   if (IS_I915G(pI830) || IS_I915GM(pI830) || IS_I945G(pI830))
+   if (IS_I9X5(pI830))
    	fence_mask = ~I915G_FENCE_START_MASK;
    else
    	fence_mask = ~I830_FENCE_START_MASK;
@@ -1247,7 +1247,7 @@ SetFence(ScrnInfoPtr pScrn, int nr, unsi
    if (start & fence_mask) {
       xf86DrvMsg(X_WARNING, pScrn->scrnIndex,
 		 "SetFence: %d: start (0x%08x) is not %s aligned\n",
-		 nr, start, (IS_I915G(pI830) || IS_I915GM(pI830) || IS_I945G(pI830)) ? "1MB" : "512k");
+		 nr, start, (IS_I9X5(pI830)) ? "1MB" : "512k");
       return;
    }
 
@@ -1267,7 +1267,7 @@ SetFence(ScrnInfoPtr pScrn, int nr, unsi
 
    val = (start | FENCE_X_MAJOR | FENCE_VALID);
 
-   if (IS_I915G(pI830) || IS_I915GM(pI830) || IS_I945G(pI830)) {
+   if (IS_I9X5(pI830)) {
    	switch (size) {
 	   case MB(1):
       		val |= I915G_FENCE_SIZE_1M;
@@ -1328,7 +1328,7 @@ SetFence(ScrnInfoPtr pScrn, int nr, unsi
    	}
    }
 
-   if (IS_I915G(pI830) || IS_I915GM(pI830) || IS_I945G(pI830))
+   if (IS_I9X5(pI830))
 	fence_pitch = pitch / 512;
    else
 	fence_pitch = pitch / 128;
