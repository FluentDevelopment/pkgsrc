$NetBSD: patch-ab,v 1.10 2005/01/09 17:30:47 jmmv Exp $

--- gtk/gtkicontheme.c.orig	2005-01-03 15:44:33.000000000 +0100
+++ gtk/gtkicontheme.c
@@ -568,10 +568,7 @@ gtk_icon_theme_init (GtkIconTheme *icon_
   xdg_data_dirs = g_get_system_data_dirs ();
   for (i = 0; xdg_data_dirs[i]; i++) ;
 
-  priv->search_path_len = i + 2;
-#ifdef G_OS_UNIX
-  priv->search_path_len++;
-#endif
+  priv->search_path_len = i * 2 + 2;
   
   priv->search_path = g_new (char *, priv->search_path_len);
   
@@ -579,12 +576,10 @@ gtk_icon_theme_init (GtkIconTheme *icon_
   priv->search_path[i++] = g_build_filename (g_get_home_dir (), ".icons", NULL);
   priv->search_path[i++] = g_build_filename (g_get_user_data_dir (), "icons", NULL);
   
-  for (j = 0; xdg_data_dirs[j]; j++) 
+  for (j = 0; xdg_data_dirs[j]; j++) {
     priv->search_path[i++] = g_build_filename (xdg_data_dirs[j], "icons", NULL);
-
-#ifdef G_OS_UNIX
-  priv->search_path[i++] = g_strdup ("/usr/share/pixmaps");
-#endif
+    priv->search_path[i++] = g_build_filename (xdg_data_dirs[j], "pixmaps", NULL);
+  }
 
   priv->themes_valid = FALSE;
   priv->themes = NULL;
