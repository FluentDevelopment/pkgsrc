$NetBSD: patch-ad,v 1.1 2005/04/07 09:33:55 rillig Exp $

--- libxklavier/xklavier_evt_xmm.c.orig	Fri Jan  7 03:58:03 2005
+++ libxklavier/xklavier_evt_xmm.c	Sun Apr  3 17:44:48 2005
@@ -13,15 +13,16 @@ static int _XklXmmKeypressEventHandler( 
 {
   if( _xklListenerType & XKLL_MANAGE_LAYOUTS )
   {
-    XklDebug( 200, "Processing the KeyPress event\n" );
     int currentShortcut = 0;
-    const XmmSwitchOptionPtr sop = _XklXmmFindSwitchOption( kpe->keycode, 
+    XmmSwitchOptionPtr sop;
+    XklDebug( 200, "Processing the KeyPress event\n" );
+    sop = _XklXmmFindSwitchOption( kpe->keycode, 
                                                             kpe->state,
                                                             &currentShortcut );
     if( sop != NULL )
     {
-      XklDebug( 150, "It is THE shortcut\n" );
       XklState state;
+      XklDebug( 150, "It is THE shortcut\n" );
       _XklXmmGetRealState( &state );
       if( state.group != -1 )
       {
