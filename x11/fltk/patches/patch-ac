$NetBSD: patch-ac,v 1.5 2003/12/01 16:35:51 ben Exp $

--- configure.orig	2001-05-07 07:53:14.000000000 -0700
+++ configure
@@ -18,6 +18,9 @@ ac_help="$ac_help
 ac_help="$ac_help
   --enable-shared         turn on shared libraries [default=no]"
 ac_help="$ac_help
+  --enable-libtool=LIBTOOL_PATH
+                          turn on building with libtool [default=no]"
+ac_help="$ac_help
   --with-x                use the X Window System"
 
 # Initialize some variables set by options.
@@ -562,6 +565,9 @@ fi
 
 
 LIBNAME="libfltk.a"
+LIBRARY="../lib/\$(LIBNAME)"
+LIBFLTK="../lib/\$(LIBNAME)"
+LINKFLTK="-L../lib -lfltk"
 if test "$RANLIB" != ":"; then
   LIBCOMMAND="ar cr"
 else
@@ -600,8 +606,23 @@ fi
 # Check whether --enable-shared or --disable-shared was given.
 if test "${enable_shared+set}" = set; then
   enableval="$enable_shared"
+  :
+fi
+
+# Check whether --enable-libtool or --disable-libtool was given.
+if test "${enable_libtool+set}" = set; then
+  enableval="$enable_libtool"
   
-if eval "test x$enable_shared = xyes"; then
+if eval "test x$enable_libtool != xno"; then
+    LIBTOOL="$enable_libtool"
+    enable_shared=no
+else
+    LIBTOOL=""
+fi
+fi
+
+
+if test "$enable_shared" = "yes"; then
   PICFLAG=1
   case $uname in
       SunOS* | UNIX_S*)
@@ -638,8 +659,13 @@ if eval "test x$enable_shared = xyes"; t
 	  ;;
   esac
 fi
-fi
 
+if test "x$LIBTOOL" != "x"; then
+    LIBNAME="libfltk.la"
+    LIBRARY="\$(LIBNAME)"
+    LIBFLTK="../src/\$(LIBNAME)"
+    LINKFLTK="../src/\$(LIBNAME)"
+fi
 
 # Extract the first word of "gcc", so it can be a program name with args.
 set dummy gcc; ac_word=$2
@@ -3072,7 +3098,7 @@ MAKEDEPEND="\$(CXX) -M"
 if test -n "$GXX"; then
     # Use gcc instead of c++ or g++, since we don't need the C++
     # library to depend on...
-    CXX="$CC"
+#    CXX="$CC"
     CFLAGS="-Wall $CFLAGS"
     CXXFLAGS="-Wall $CXXFLAGS"
     if test -z "$DEBUGFLAG"; then
@@ -3220,6 +3246,10 @@ CXXFLAGS="$DEBUGFLAG $CXXFLAGS"
 
 
 
+
+
+
+
 trap '' 1 2 15
 cat > confcache <<\EOF
 # This file is a shell script that caches the results of configure
@@ -3369,7 +3399,11 @@ s%@CAT3EXT@%$CAT3EXT%g
 s%@DSONAME@%$DSONAME%g
 s%@DSOCOMMAND@%$DSOCOMMAND%g
 s%@LIBNAME@%$LIBNAME%g
+s%@LIBRARY@%$LIBRARY%g
+s%@LIBFLTK@%$LIBFLTK%g
+s%@LINKFLTK@%$LINKFLTK%g
 s%@LIBCOMMAND@%$LIBCOMMAND%g
+s%@LIBTOOL@%$LIBTOOL%g
 s%@MAKEDEPEND@%$MAKEDEPEND%g
 
 CEOF
