$NetBSD: patch-ag,v 1.4 2004/10/21 08:29:45 adam Exp $

--- src/Makefile.orig	2004-10-18 20:22:25.000000000 +0000
+++ src/Makefile
@@ -199,6 +199,10 @@ $(LIBNAME): $(OBJECTS)
 	$(LIBCOMMAND) $@ $(OBJECTS)
 	$(RANLIB) $@
 
+libfltk.la: $(OBJECTS)
+	echo $(CXX) $@ ...
+	$(CXX) -o $@ $(OBJECTS:.o=.lo) -rpath $(prefix)/lib -version-info 1:6 $(LDLIBS) $DEBUGFLAG
+
 libfltk.so.1.1: $(OBJECTS)
 	echo $(DSOCOMMAND) $@ ...
 	$(DSOCOMMAND) $@ $(OBJECTS)
@@ -235,6 +239,10 @@ $(FLLIBNAME): $(FLOBJECTS)
 	$(LIBCOMMAND) $@ $(FLOBJECTS)
 	$(RANLIB) $@
 
+libfltk_forms.la: $(FLOBJECTS)
+	echo $(CXX) $@ ...
+	$(CXX) -o $@ $(FLOBJECTS:.o=.lo) -rpath $(prefix)/lib -version-info 1:6 $(LDLIBS) $DEBUGFLAG
+
 libfltk_forms.so.1.1: $(FLOBJECTS) libfltk.so.1.1
 	echo $(DSOCOMMAND) $@ ...
 	$(DSOCOMMAND) $@ $(FLOBJECTS) -L. -lfltk
@@ -271,6 +279,10 @@ $(GLLIBNAME): $(GLOBJECTS)
 	$(LIBCOMMAND) $@ $(GLOBJECTS)
 	$(RANLIB) $@
 
+libfltk_gl.la: $(GLOBJECTS)
+	echo $(CXX) $@ ...
+	$(CXX) -o $@ $(GLOBJECTS:.o=.lo) -rpath $(prefix)/lib -version-info 1:6 $(LDLIBS) $DEBUGFLAG
+
 libfltk_gl.so.1.1: $(GLOBJECTS) libfltk.so.1.1
 	echo $(DSOCOMMAND) $@ ...
 	$(DSOCOMMAND) $@ $(GLOBJECTS) -L. -lfltk
@@ -307,6 +319,10 @@ $(IMGLIBNAME): $(IMGOBJECTS)
 	$(LIBCOMMAND) $@ $(IMGOBJECTS)
 	$(RANLIB) $@
 
+libfltk_images.la: $(IMGOBJECTS)
+	echo $(CXX) $@ ...
+	$(CXX) -o $@ $(IMGOBJECTS:.o=.lo) -rpath $(prefix)/lib -version-info 1:6 $(LDLIBS) $DEBUGFLAG
+
 libfltk_images.so.1.1: $(IMGOBJECTS) libfltk.so.1.1
 	echo $(DSOCOMMAND) $@ ...
 	$(DSOCOMMAND) $@ $(IMGOBJECTS) $(IMAGELIBS) -L. -lfltk
@@ -429,6 +445,9 @@ install: $(LIBNAME) $(DSONAME) \
 		$(RANLIB) $(DESTDIR)$(libdir)/$(GLLIBNAME); \
 	fi
 	$(RANLIB) $(DESTDIR)$(libdir)/$(IMGLIBNAME)
+	if test x$(DSONAME) = xlibfltk.la; then\
+		$(INSTALL_LIB) libfltk.la $(libdir); \
+	fi
 	if test x$(DSONAME) = xlibfltk.so.1.1; then\
 		$(RM) $(DESTDIR)$(libdir)/libfltk.so*;\
 		$(CP) libfltk.so.1.1 $(DESTDIR)$(libdir); \
@@ -452,6 +471,9 @@ install: $(LIBNAME) $(DSONAME) \
 		$(CP) libfltk_s.a $(DESTDIR)$(libdir); \
 		$(CHMOD) 755 $(DESTDIR)$(libdir)/libfltk_s.a; \
 	fi
+	if test x$(FLDSONAME) = xlibfltk_forms.la; then\
+		$(INSTALL_LIB) libfltk_forms.la $(libdir); \
+	fi
 	if test x$(FLDSONAME) = xlibfltk_forms.so.1.1; then\
 		$(RM) $(DESTDIR)$(libdir)/libfltk_forms.so*;\
 		$(CP) libfltk_forms.so.1.1 $(DESTDIR)$(libdir); \
@@ -475,6 +497,9 @@ install: $(LIBNAME) $(DSONAME) \
 		$(CP) libfltk_forms_s.a $(DESTDIR)$(libdir); \
 		$(CHMOD) 755 $(DESTDIR)$(libdir)/libfltk_forms.a; \
 	fi
+	if test x$(GLDSONAME) = xlibfltk_gl.la; then\
+		$(INSTALL_LIB) libfltk_gl.la $(libdir); \
+	fi
 	if test x$(GLDSONAME) = xlibfltk_gl.so.1.1; then\
 		$(RM) $(DESTDIR)$(libdir)/libfltk_gl.so*;\
 		$(CP) libfltk_gl.so.1.1 $(DESTDIR)$(libdir); \
@@ -498,6 +523,9 @@ install: $(LIBNAME) $(DSONAME) \
 		$(CP) libfltk_gl_s.a $(DESTDIR)$(libdir); \
 		$(CHMOD) 755 $(DESTDIR)$(libdir)/libfltk_gl.a; \
 	fi
+	if test x$(IMGDSONAME) = xlibfltk_images.la; then\
+		$(INSTALL_LIB) libfltk_images.la $(libdir); \
+	fi
 	if test x$(IMGDSONAME) = xlibfltk_images.so.1.1; then\
 		$(RM) $(DESTDIR)$(libdir)/libfltk_images.so*;\
 		$(CP) libfltk_images.so.1.1 $(DESTDIR)$(libdir); \
