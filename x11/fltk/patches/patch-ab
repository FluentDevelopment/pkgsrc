$NetBSD: patch-ab,v 1.10 2005/03/19 15:26:18 ben Exp $

--- configure.in.orig	2004-11-19 19:44:17.000000000 -0800
+++ configure.in
@@ -95,6 +95,7 @@ AC_SUBST(GLLIBNAME)
 AC_SUBST(IMGLIBNAME)
 AC_SUBST(LIBEXT)
 AC_SUBST(LIBNAME)
+AC_SUBST(LIBTOOL)
 AC_SUBST(LINKFLTK)
 AC_SUBST(LINKFLTKGL)
 AC_SUBST(LINKFLTKIMG)
@@ -110,6 +111,15 @@ fi
 AC_ARG_ENABLE(gl, [  --enable-gl             turn on OpenGL support [default=yes]])
 
 AC_ARG_ENABLE(shared, [  --enable-shared         turn on shared libraries [default=no]])
+AC_ARG_ENABLE(libtool, [  --enable-libtool=LIBTOOL_PATH
+                          turn on building with libtool [default=no]],[
+if eval "test x$enable_libtool != xno"; then
+    LIBTOOL="$enable_libtool"
+    enable_shared=no
+else
+    LIBTOOL=""
+fi])
+
 if test x$enable_shared = xyes; then
     PICFLAG=1
     SHAREDSUFFIX=""
@@ -209,6 +219,21 @@ else
     LINKSHARED="-L../lib -lfltk_images -lfltk_forms -lfltk"
 fi
 
+if test "x$LIBTOOL" != "x"; then
+    LINKFLTK="../src/libfltk.la"
+    if test "x$LINKFLTKGL" != "x"; then    
+        LINKFLTKGL="../src/libfltk_gl.la"    
+    fi    
+    if test "x$LINKFLTKIMG" != "x"; then    
+        LINKFLTKIMG="../src/libfltk_images.la"    
+    fi
+    LINKSHARED="-lfltk_images -lfltk_forms -lfltk"
+    DSONAME="libfltk.la"
+    FLDSONAME="libfltk_forms.la"
+    GLDSONAME="libfltk_gl.la"
+    IMGDSONAME="libfltk_images.la"
+fi
+
 AC_SUBST(DSOCOMMAND)
 AC_SUBST(DSOLINK)
 AC_SUBST(DSONAME)
@@ -658,23 +683,8 @@ AC_SUBST(POSTBUILD)
 AC_SUBST(THREADS)
 
 dnl Figure out the appropriate formatted man page extension...
-case "$uname" in
-    *BSD* | Darwin*)
-	# *BSD
-	CAT1EXT=0
-	CAT3EXT=0
-	;;
-    IRIX*)
-	# SGI IRIX
-	CAT1EXT=z
-	CAT3EXT=z
-	;;
-    *)
-	# All others
 	CAT1EXT=1
 	CAT3EXT=3
-	;;
-esac
 
 AC_SUBST(CAT1EXT)
 AC_SUBST(CAT3EXT)
@@ -743,7 +753,7 @@ if test -n "$GCC"; then
 	    ;;
     esac
 
-    CXX="$CC"
+#    CXX="$CC"
 
     # Show all standard warnings + unused variables, conversion errors,
     # and inlining problems when compiling...
