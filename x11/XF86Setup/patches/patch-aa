$NetBSD: patch-aa,v 1.8 2005/01/22 03:58:32 minskim Exp $

--- Imakefile.orig	Tue Jul 20 19:23:50 1999
+++ Imakefile	Sun Jul 22 23:13:29 2001
@@ -63,6 +63,20 @@
     EXTRASYSLIBS = -ldl
 #endif
 
+EXTINCSRC=	$(X11BASE)/include/X11/extensions
+SERVERSRC=	../../..
+XINCLUDESRC=	$(X11BASE)/include/X11
+
+TCLLIBDIR=	$(LOCALBASE)/lib
+TCLINCDIR=	$(LOCALBASE)/include
+TCLLIBNAME=	tcl
+TCLLIBRARY=	-L$(TCLLIBDIR) -l$(TCLLIBNAME)
+
+TKLIBDIR=	$(LOCALBASE)/lib
+TKINCDIR=	$(LOCALBASE)/include
+TKLIBNAME=	tk
+TKLIBRARY=	-L$(TKLIBDIR) -l$(TKLIBNAME)
+
 #if XF86SetupUsesStaticTk
        TKLIBRARY = StaticLibrary($(TKLIBDIR),$(TKLIBNAME))
 #endif
@@ -75,7 +89,7 @@
 		   $(TCLTK_LIBRARIES) $(XXF86VMLIB) $(XXF86MISCLIB) \
 		   $(USEINSTALLEDLIB) XawClientLibs MathLibrary
          DEPLIBS = XawClientDepLibs $(DEPXXF86VMLIB)
-      CARDDBFILE = $(LIBDIR)/Cards
+      CARDDBFILE = $(X11BASE)/lib/X11/Cards
       XCONFIGSRC = xf86Config
      XCONFIGFILE = XF86Config
 
@@ -85,7 +99,7 @@
 
  XF86SETUPLIBDIR = $(LIBDIR)/XF86Setup
          DEFINES = -DCARD_DATABASE_FILE='"$(CARDDBFILE)"' \
-		   $(XCONFIG_DEFINES)
+		   $(XCONFIG_DEFINES) `cat res_cpp_symbol`
         INCLUDES = -I../os-support -I../common \
 		   -I$(SERVERSRC)/include -I$(XINCLUDESRC) -I$(INCLUDESRC) \
 		   -I$(EXTINCSRC) $(USEINSTALLEDINC) \
@@ -122,3 +136,5 @@
 
 #endif
 
+depend:: res_cpp_symbol
+	-sh ./configure
