$NetBSD: patch-aa,v 1.4 2007/01/30 20:41:32 joerg Exp $

--- configure.orig	2006-10-03 11:20:57.000000000 +0000
+++ configure
@@ -3291,59 +3291,6 @@ fi
 LINKER=$LINKER
 
 
-if test -z "$orig_CXXFLAGS"; then
-  if test x$GCC = xyes && test "x$GXX" = xyes; then
-     CXXFLAGS="-g -O3 -fno-threadsafe-statics -fno-enforce-eh-specs"
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-
-int
-main ()
-{
-
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext
-if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-  (eval $ac_compile) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_cxx_werror_flag"			 || test ! -s conftest.err'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; }; then
-  :
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-CXXFLAGS="-g -O3"
-fi
-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
-  else
-    CXXFLAGS="-O"
-  fi
-  CFLAGS="$CXXFLAGS"
-fi
-
 
 cat >>confdefs.h <<\_ACEOF
 #define _GNU_SOURCE 1
@@ -6356,11 +6303,16 @@ cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 
+extern "C" {
+#include <X11/xpm.h>
+#include <stddef.h>
+}
+
 int
 main ()
 {
-XpmReadFileToPixmap()
-  ;
+  Drawable d;
+  XpmReadFileToPixmap(NULL, d, NULL, NULL, NULL, NULL);
   return 0;
 }
 _ACEOF
