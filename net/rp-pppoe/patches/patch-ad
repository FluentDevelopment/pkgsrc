$NetBSD: patch-ad,v 1.2 2001/10/07 13:26:38 tron Exp $

--- pppoe.c.orig	Fri Sep 14 21:18:53 2001
+++ pppoe.c	Sun Oct  7 14:15:21 2001
@@ -113,7 +113,7 @@
 * packet before passing it here.
 ***********************************************************************/
 void
-sessionDiscoveryPacket(PPPoEPacket *packet)
+sessionDiscoveryPacket(PPPoEConnection *conn, PPPoEPacket *packet)
 {
     /* Sanity check */
     if (packet->code != CODE_PADT) {
@@ -695,7 +695,7 @@
     /* Make sure this is a session packet before processing further */
     type = etherType(&packet);
     if (type == Eth_PPPOE_Discovery) {
-	sessionDiscoveryPacket(&packet);
+	sessionDiscoveryPacket(conn, &packet);
     } else if (type != Eth_PPPOE_Session) {
 	return;
     }
@@ -822,7 +822,7 @@
     /* Make sure this is a session packet before processing further */
     type = etherType(&packet);
     if (type == Eth_PPPOE_Discovery) {
-	sessionDiscoveryPacket(&packet);
+	sessionDiscoveryPacket(conn, &packet);
     } else if (type != Eth_PPPOE_Session) {
 	return;
     }
