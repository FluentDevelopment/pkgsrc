$NetBSD: patch-aa,v 1.5 2001/09/11 01:46:31 wrstuden Exp $

--- configure.in.orig	Tue Jan 30 15:10:50 2001
+++ configure.in	Tue Jan 30 15:16:46 2001
@@ -1011,23 +1011,23 @@
 dnl
 dnl now check for rpm using the appropriate db library
 dnl
-AC_CHECK_LIB(rpm, rpmdbOpen,[
-  AC_DEFINE(HAVE_LIBRPM)
-  LIBS="-lrpm $LIBS"
-  CFLAGS="$CFLAGS -I/usr/include/rpm"
-],,-lz)
+#AC_CHECK_LIB(rpm, rpmdbOpen,[
+#  AC_DEFINE(HAVE_LIBRPM)
+#  LIBS="-lrpm $LIBS"
+#  CFLAGS="$CFLAGS -I/usr/include/rpm"
+#],,-lz)
 
 dnl
 dnl now check for rpm using the appropriate db library
 dnl
-if test x$ac_cv_lib_rpm_rpmdbOpen = xno; then
-  unset ac_cv_lib_rpm_rpmdbOpen
-  AC_CHECK_LIB(rpm, rpmdbOpen,[
-    AC_DEFINE(HAVE_LIBRPM)
-    LIBS="-lrpm -lpopt $LIBS"
-    CFLAGS="$CFLAGS -I/usr/include/rpm"
-  ],,-lpopt -lz)
-fi
+#if test x$ac_cv_lib_rpm_rpmdbOpen = xno; then
+#  unset ac_cv_lib_rpm_rpmdbOpen
+#  AC_CHECK_LIB(rpm, rpmdbOpen,[
+#    AC_DEFINE(HAVE_LIBRPM)
+#    LIBS="-lrpm -lpopt $LIBS"
+#    CFLAGS="$CFLAGS -I/usr/include/rpm"
+#  ],,-lpopt -lz)
+#fi
 
 
 dnl Replace `main' with a function in -lkstat:
@@ -1053,7 +1053,7 @@
 AC_HEADER_STDC
 AC_HEADER_DIRENT
 AC_HEADER_SYS_WAIT
-AC_CHECK_HEADERS(stdarg.h string.h fcntl.h limits.h sys/file.h sys/ioctl.h syslog.h unistd.h netinet/tcpip.h netinet/in.h netinet/ip.h net/if.h netdb.h sys/dmap.h machine/pte.h xti.h sys/sockio.h sys/socket.h sys/un.h fstab.h sys/fs.h mtab.h ufs/fs.h ufs/ffs/fs.h sys/fixpoint.h machine/param.h sys/vm.h vm/vm.h sys/vmmeter.h sys/vmparam.h sys/vmmac.h sys/vmsystm.h sys/mbuf.h sys/time.h sys/swap.h inet/mib2.h sys/statvfs.h sys/vfs.h sys/mnttab.h sys/user.h sys/proc.h sys/select.h mntent.h sys/mntent.h kstat.h utsname.h sys/utsname.h sys/cdefs.h getopt.h locale.h pthread.h sys/loadavg.h regex.h pwd.h grp.h)
+AC_CHECK_HEADERS(stdarg.h string.h fcntl.h limits.h sys/file.h sys/ioctl.h syslog.h unistd.h netinet/tcpip.h netinet/in.h netinet/ip.h net/if.h netdb.h sys/dmap.h machine/pte.h xti.h sys/sockio.h sys/socket.h sys/un.h fstab.h sys/fs.h mtab.h ufs/fs.h ufs/ffs/fs.h sys/fixpoint.h machine/param.h vm/vm.h sys/vmmeter.h sys/vmparam.h sys/vmmac.h sys/vmsystm.h sys/mbuf.h sys/time.h sys/swap.h inet/mib2.h sys/statvfs.h sys/vfs.h sys/mnttab.h sys/user.h sys/proc.h sys/select.h mntent.h sys/mntent.h kstat.h utsname.h sys/utsname.h sys/cdefs.h getopt.h locale.h pthread.h sys/loadavg.h regex.h pwd.h grp.h)
 dnl FreeBSD required headers
 AC_CHECK_HEADERS(malloc.h sys/param.h net/if_dl.h sys/sysctl.h stdlib.h net/if_mib.h net/if_types.h net/if_var.h sys/queue.h osreldate.h sys/disklabel.h machine/types.h sys/socketvar.h)
 dnl Linux
@@ -1061,7 +1061,7 @@
 dnl NetBSD required headers
 AC_CHECK_HEADERS(arpa/inet.h kvm.h sys/pool.h)
 dnl BSDi2 headers
-AC_CHECK_HEADERS(sys/mount.h vm/swap_pager.h ufs/ufs/dinode.h)
+AC_CHECK_HEADERS(sys/mount.h ufs/ufs/dinode.h)
 dnl BSDi3 headers
 AC_CHECK_HEADERS(sys/stat.h sys/vnode.h ufs/ufs/quota.h ufs/ufs/inode.h)
 dnl irix headers
@@ -1314,11 +1314,7 @@
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ], rtentry, rt_dst, no)
 
@@ -1332,11 +1328,7 @@
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ],[
 
@@ -1356,11 +1348,7 @@
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ],[
 struct rtentry rt; 
@@ -1413,11 +1401,7 @@
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ],[
 struct rtentry rt; 
@@ -1437,11 +1421,7 @@
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ], rtentry, rt_unit)
 
@@ -1450,11 +1430,7 @@
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ], rtentry, rt_refcnt)
 
@@ -1463,11 +1439,7 @@
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ], rtentry, rt_hash)
 
@@ -1476,11 +1448,7 @@
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ], rtentry, rt_use)
 
