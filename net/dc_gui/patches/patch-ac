$NetBSD: patch-ac,v 1.6 2002/12/17 19:14:43 wiz Exp $

--- src/callbacks.c.orig	Sun Dec  1 08:03:43 2002
+++ src/callbacks.c
@@ -2,6 +2,13 @@
 #  include <config.h>
 #endif
 
+#ifdef __linux__
+#include <linux/sem.h>
+#else
+#ifndef SEMVMX
+#define SEMVMX  32767           /* semaphore maximum value */
+#endif
+#endif
 #include <math.h>
 #include <sys/types.h>
 #include <signal.h>
@@ -14,7 +21,6 @@
 #include <dirent.h>
 #include <gdk/gdkkeysyms.h>
 #include <gdk/gdk.h>
-#include <linux/sem.h>
 #include <gnome.h>
 #include <glib.h>
 #include <time.h>
@@ -40,6 +46,10 @@
 #include "find_result_clist.h"
 #include "user_file_list_clist.h"
 #include "ls_cache_clist.h"
+
+#ifndef MSG_NOSIGNAL
+#define MSG_NOSIGNAL 0
+#endif
 
 static void start_download_from_find_result_clist(void);
 static void reload_flagged_user_clist(int only_if_empty);
