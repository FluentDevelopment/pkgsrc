$NetBSD: patch-ac,v 1.3 2002/10/03 11:44:40 wiz Exp $

--- src/callbacks.c.orig	Tue Sep 24 18:25:08 2002
+++ src/callbacks.c
@@ -2,6 +2,13 @@
 #  include <config.h>
 #endif
 
+#ifdef __linux__
+#include <linux/sem.h>
+#else
+#ifndef SEMVMX
+#define SEMVMX  32767           /* semaphore maximum value */
+#endif
+#endif
 #include <math.h>
 #include <sys/types.h>
 #include <signal.h>
@@ -14,7 +21,6 @@
 #include <dirent.h>
 #include <gdk/gdkkeysyms.h>
 #include <gdk/gdk.h>
-#include <linux/sem.h>
 #include <gnome.h>
 #include <glib.h>
 #include <time.h>
@@ -1631,7 +1637,7 @@ on_find_entry_activate                 (
 
 		val=atof(gtk_entry_get_text(GTK_ENTRY(w)));
 
-		g_string_sprintfa(req,"%lf",scale*val);
+		g_string_sprintfa(req,"%f",scale*val);
 	}
 
 	w=get_widget_by_widget_name("find_result");
@@ -2857,7 +2863,7 @@ on_apply_pref_clicked                  (
 			}
 			if(i==4)
 				i=0;
-			g_string_sprintf(out,"/OFFSET %lf\n",strtod(v,NULL)*scale[i]);
+			g_string_sprintf(out,"/OFFSET %f\n",strtod(v,NULL)*scale[i]);
 			send_data_to_dctc(out->str);
 		}
 	}
@@ -3429,7 +3435,7 @@ static void reload_ls_cache_clist(int ev
 				nw[1]=buf;
 
 				printf("%llX",lsch.share_size);
-				sprintf(buf,"%'llu", lsch.share_size);
+				sprintf(buf,"%llu", lsch.share_size);
 				gtk_clist_append(clst,nw);
 			}
 		}
