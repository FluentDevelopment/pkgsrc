$NetBSD: patch-aa,v 1.2 2002/04/09 10:55:01 agc Exp $

--- src/Makefile.orig	Fri Jul 14 13:38:56 2000
+++ src/Makefile	Tue Apr  9 11:42:33 2002
@@ -97,7 +97,7 @@
 PWLIBDIR=$(HOME)/pwlib
 endif
 
-include $(PWLIBDIR)/make/unix.mak
+include $(PWLIBDIR)/share/pwlib/make/unix.mak
 
 ifndef OPENH323DIR
 OPENH323DIR=$(HOME)/openh323
@@ -322,13 +322,13 @@
 
 ####################################################
 
-include $(PWLIBDIR)/make/common.mak
+include $(PWLIBDIR)/share/pwlib/make/common.mak
 
 ####################################################
 
 LIB_BASENAME	=	$(OH323_FILE)
 
-include $(PWLIBDIR)/make/lib.mak
+include $(PWLIBDIR)/share/pwlib/make/lib.mak
 
 ####################################################
 
@@ -339,8 +339,8 @@
 ASNPARSE = $(ASNPARSE_DIR)/obj_$(PLATFORM_TYPE)_r/asnparser 
 ASNPARSE += -x $(ASN_EXCLUDE)
 else
-ASNPARSE_DIR = $(PWLIBDIR)/tools/asnparser
-ASNPARSE = $(ASNPARSE_DIR)/obj_$(PLATFORM_TYPE)_r/asnparser 
+ASNPARSE_DIR = 
+ASNPARSE = ${PREFIX}/bin/asnparser
 endif
 
 #### h245
@@ -413,45 +413,45 @@
 
 $(OH323_OBJDIR)/%.o : $(VIC_DIR)/%.cxx
 	@if [ ! -d $(OH323_OBJDIR) ] ; then mkdir -p $(OH323_OBJDIR) ; fi
-	$(CPLUS) -I$(VIC_DIR) $(STDCCFLAGS) $(CFLAGS) -c $< -o $@
+	${LIBTOOL} --tag=CXX $(CPLUS) -I$(VIC_DIR) $(STDCCFLAGS) $(CFLAGS) -c $< -o $@
 
 $(OH323_OBJDIR)/%.o : $(VIC_DIR)/%.c
 	@if [ ! -d $(OH323_OBJDIR) ] ; then mkdir -p $(OH323_OBJDIR) ; fi
-	$(CC) -I$(VIC_DIR) $(STDCCFLAGS) $(CFLAGS) -c $< -o $@
+	${LIBTOOL} --tag=CC $(CC) -I$(VIC_DIR) $(STDCCFLAGS) $(CFLAGS) -c $< -o $@
 
 $(DEPDIR)/%.dep : $(VIC_DIR)/%.c
 	@if [ ! -d $(DEPDIR) ] ; then mkdir -p $(DEPDIR) ; fi
 	@printf %s $(OH323_OBJDIR)/ > $@
-	$(CPLUS) -I$(VIC_DIR) $(STDCCFLAGS) $(CFLAGS) -M $< >> $@
+	${LIBTOOL} --tag=CXX $(CPLUS) -I$(VIC_DIR) $(STDCCFLAGS) $(CFLAGS) -M $< >> $@
 
 $(DEPDIR)/%.dep : $(VIC_DIR)/%.cxx
 	@if [ ! -d $(DEPDIR) ] ; then mkdir -p $(DEPDIR) ; fi
 	@printf %s $(OH323_OBJDIR)/ > $@
-	$(CPLUS) -I$(VIC_DIR) $(STDCCFLAGS) $(CFLAGS) -M $< >> $@
+	${LIBTOOL} --tag=CXX $(CPLUS) -I$(VIC_DIR) $(STDCCFLAGS) $(CFLAGS) -M $< >> $@
 
 
 # Build rules for the GSM codec
 
 $(OH323_OBJDIR)/%.o : $(GSM_SRCDIR)/%.c
 	@if [ ! -d $(OH323_OBJDIR) ] ; then mkdir -p $(OH323_OBJDIR) ; fi
-	$(CC) -ansi -I$(GSM_INCDIR) -DNeedFunctionPrototypes=1 $(OPTCCFLAGS) $(CFLAGS) -c $< -o $@
+	${LIBTOOL} --tag=CC $(CC) -ansi -I$(GSM_INCDIR) -DNeedFunctionPrototypes=1 $(OPTCCFLAGS) $(CFLAGS) -c $< -o $@
 
 $(DEPDIR)/%.dep : $(GSM_SRCDIR)/%.c
 	@if [ ! -d $(DEPDIR) ] ; then mkdir -p $(DEPDIR) ; fi
 	@printf %s $(OH323_OBJDIR)/ > $@
-	$(CC) -ansi -I$(GSM_INCDIR) -DNeedFunctionPrototypes=1 $(CFLAGS) -M $< >> $@
+	${LIBTOOL} --tag=CC $(CC) -ansi -I$(GSM_INCDIR) -DNeedFunctionPrototypes=1 $(CFLAGS) -M $< >> $@
 
 
 # Build rules for the LPC10 codec
 
 $(OH323_OBJDIR)/%.o : $(LPC10_SRCDIR)/%.c
 	@if [ ! -d $(OH323_OBJDIR) ] ; then mkdir -p $(OH323_OBJDIR) ; fi
-	$(CC) -I$(LPC10_INCDIR) $(OPTCCFLAGS) $(CFLAGS) -c $< -o $@
+	${LIBTOOL} --tag=CC $(CC) -I$(LPC10_INCDIR) $(OPTCCFLAGS) $(CFLAGS) -c $< -o $@
 
 $(DEPDIR)/%.dep : $(LPC10_SRCDIR)/%.c
 	@if [ ! -d $(DEPDIR) ] ; then mkdir -p $(DEPDIR) ; fi
 	@printf %s $(OH323_OBJDIR)/ > $@
-	$(CC) -I$(LPC10_INCDIR) $(CFLAGS) -M $< >> $@
+	${LIBTOOL} --tag=CC $(CC) -I$(LPC10_INCDIR) $(CFLAGS) -M $< >> $@
 
 
 # Pass through commands to the subdirectory for test app
