$NetBSD: patch-aa,v 1.16 2003/07/30 21:05:00 jmmv Exp $

--- configure.in.orig	2002-03-27 10:55:22.000000000 +0100
+++ configure.in
@@ -529,7 +529,7 @@ if test "x$DEFAULT_MIBDIRS" = "x"; then
 fi
 
 SNMPCONFPATH=""
-tmpset="$sysconfdir/snmp"
+tmpset="$sysconfdir"
 while test "x$tmpset" != "x$SNMPCONFPATH"; do
   SNMPCONFPATH="$tmpset"
   eval tmpset="$tmpset"
@@ -1037,18 +1037,18 @@ dnl rpm-4.0.x needs rpmio.
 AC_CHECK_LIB(rpmio, Fopen, [_rpmlibs="-lrpmio $_rpmlibs"],,$_rpmlibs)
 
 dnl now check for rpm using the appropriate libraries.
-AC_CHECK_LIB(rpm, rpmGetFilesystemList,[
-  AC_DEFINE(HAVE_LIBRPM)
-  LIBS="-lrpm $_rpmlibs $LIBS"
-  CFLAGS="$CFLAGS -I/usr/include/rpm"
-],[
-  dnl rpm-4.0.3 librpmdb actually contains what we need.
-  AC_CHECK_LIB(rpmdb, rpmdbOpen,[
-    AC_DEFINE(HAVE_LIBRPM)
-    LIBS="-lrpmdb -lrpm $_rpmlibs $LIBS"
-    CFLAGS="$CFLAGS -I/usr/include/rpm"
-  ],,-lrpm $_rpmlibs)
-])
+#AC_CHECK_LIB(rpm, rpmGetFilesystemList,[
+#  AC_DEFINE(HAVE_LIBRPM)
+#  LIBS="-lrpm $_rpmlibs $LIBS"
+#  CFLAGS="$CFLAGS -I/usr/include/rpm"
+#],[
+#  dnl rpm-4.0.3 librpmdb actually contains what we need.
+#  AC_CHECK_LIB(rpmdb, rpmdbOpen,[
+#    AC_DEFINE(HAVE_LIBRPM)
+#    LIBS="-lrpmdb -lrpm $_rpmlibs $LIBS"
+#    CFLAGS="$CFLAGS -I/usr/include/rpm"
+#  ],,-lrpm $_rpmlibs)
+#])
 
 dnl Replace `main' with a function in -lkstat:
 AC_CHECK_LIB(kstat, kstat_lookup)
@@ -1073,7 +1073,7 @@ dnl Checks for header files.
 AC_HEADER_STDC
 AC_HEADER_DIRENT
 AC_HEADER_SYS_WAIT
-AC_CHECK_HEADERS(stdarg.h string.h fcntl.h limits.h sys/file.h sys/ioctl.h syslog.h unistd.h netinet/tcpip.h netinet/in.h netinet/ip.h netinet/ip_icmp.h net/if.h netdb.h sys/dmap.h machine/pte.h xti.h sys/sockio.h sys/socket.h sys/un.h fstab.h sys/fs.h mtab.h ufs/fs.h ufs/ffs/fs.h sys/fixpoint.h machine/param.h sys/vm.h vm/vm.h sys/vmmeter.h sys/vmparam.h sys/vmmac.h sys/vmsystm.h sys/mbuf.h sys/time.h sys/swap.h inet/mib2.h sys/statvfs.h sys/vfs.h sys/mnttab.h sys/user.h sys/proc.h sys/select.h mntent.h sys/mntent.h kstat.h utsname.h sys/utsname.h sys/cdefs.h getopt.h locale.h pthread.h sys/loadavg.h regex.h linux/tasks.h pwd.h grp.h utmpx.h)
+AC_CHECK_HEADERS(stdarg.h string.h fcntl.h limits.h sys/file.h sys/ioctl.h syslog.h unistd.h netinet/tcpip.h netinet/in.h netinet/ip.h netinet/ip_icmp.h net/if.h netdb.h sys/dmap.h machine/pte.h xti.h sys/sockio.h sys/socket.h sys/un.h fstab.h sys/fs.h mtab.h ufs/fs.h ufs/ffs/fs.h sys/fixpoint.h machine/param.h vm/vm.h sys/vmmeter.h sys/vmparam.h sys/vmmac.h sys/vmsystm.h sys/mbuf.h sys/time.h sys/swap.h inet/mib2.h sys/statvfs.h sys/vfs.h sys/mnttab.h sys/user.h sys/proc.h sys/select.h mntent.h sys/mntent.h kstat.h utsname.h sys/utsname.h sys/cdefs.h getopt.h locale.h pthread.h sys/loadavg.h regex.h linux/tasks.h pwd.h grp.h utmpx.h)
 dnl FreeBSD required headers
 AC_CHECK_HEADERS(malloc.h sys/param.h net/if_dl.h sys/sysctl.h stdlib.h net/if_mib.h net/if_types.h net/if_var.h sys/queue.h osreldate.h sys/disklabel.h machine/types.h sys/socketvar.h)
 dnl Linux
@@ -1081,7 +1081,7 @@ AC_CHECK_HEADERS(sys/conf.h netinet/in_s
 dnl NetBSD required headers
 AC_CHECK_HEADERS(arpa/inet.h kvm.h sys/pool.h)
 dnl BSDi2 headers
-AC_CHECK_HEADERS(sys/mount.h vm/swap_pager.h ufs/ufs/dinode.h)
+AC_CHECK_HEADERS(sys/mount.h ufs/ufs/dinode.h)
 dnl BSDi3 headers
 AC_CHECK_HEADERS(sys/stat.h sys/vnode.h ufs/ufs/quota.h ufs/ufs/inode.h)
 dnl irix headers
@@ -1339,11 +1339,7 @@ AC_CHECK_STRUCT_FOR([
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ], rtentry, rt_dst, no)
 
@@ -1357,11 +1353,7 @@ AC_TRY_COMPILE([
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ],[
 
@@ -1381,11 +1373,7 @@ AC_TRY_COMPILE([
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ],[
 struct rtentry rt; 
@@ -1438,11 +1426,7 @@ AC_TRY_COMPILE([
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ],[
 struct rtentry rt; 
@@ -1462,11 +1446,7 @@ AC_CHECK_STRUCT_FOR([
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ], rtentry, rt_unit)
 
@@ -1475,11 +1455,7 @@ AC_CHECK_STRUCT_FOR([
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ], rtentry, rt_refcnt)
 
@@ -1488,11 +1464,7 @@ AC_CHECK_STRUCT_FOR([
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ], rtentry, rt_hash)
 
@@ -1501,11 +1473,7 @@ AC_CHECK_STRUCT_FOR([
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ], rtentry, rt_use)
 
