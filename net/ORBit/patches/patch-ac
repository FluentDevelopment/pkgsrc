$NetBSD: patch-ac,v 1.12 2002/11/25 21:20:06 jlam Exp $

--- configure.orig	Wed Mar 20 06:45:48 2002
+++ configure
@@ -8628,6 +8628,7 @@ rm -f conftest.$ac_objext conftest.$ac_e
 
 echo "$as_me:8629: checking \"whether to use TCP wrappers\"" >&5
 echo $ECHO_N "checking \"whether to use TCP wrappers\"... $ECHO_C" >&6
+if test -z "$LIBWRAP_PATH" && test -z "$LIB_WRAP"; then
 LIBWRAP_PATH=""
 LIB_WRAP=""
 for I in $LDFLAGS $LIBS -L/usr/lib; do
@@ -8639,6 +8640,10 @@ for I in $LDFLAGS $LIBS -L/usr/lib; do
 		LIB_WRAP=-lwrap
 		echo "Found $THEFILE/libwrap.so" 1>&5
 		break
+	elif test -f `set $THEFILE/libwrap.so.*.*; echo $1`; then
+		LIB_WRAP=-lwrap
+		echo "Found $THEFILE/libwrap.so" 1>&5
+		break
 	else
 		echo "From $I, checking in dir $THEFILE for libwrap.a" 1>&5
 		if test -f $THEFILE/libwrap.a; then
@@ -8649,6 +8654,7 @@ for I in $LDFLAGS $LIBS -L/usr/lib; do
 	fi
 	esac
 done
+fi
 if test -n "$LIBWRAP_PATH" || test -n "$LIB_WRAP"; then
 	echo "$as_me:8653: result: yes" >&5
 echo "${ECHO_T}yes" >&6
