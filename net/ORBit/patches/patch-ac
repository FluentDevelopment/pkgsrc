$NetBSD: patch-ac,v 1.13 2003/12/16 11:22:31 sketch Exp $

--- configure.orig	2002-03-20 14:45:48.000000000 +0000
+++ configure	2003-12-15 17:52:22.568422320 +0000
@@ -7715,7 +7715,7 @@
 fi
 done
 
-for ac_header in stddef.h wchar.h wcstr.h wctype.h machine/types.h tcpd.h
+for ac_header in alloca.h stddef.h wchar.h wcstr.h wctype.h machine/types.h tcpd.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 echo "$as_me:7721: checking for $ac_header" >&5
@@ -8628,6 +8628,7 @@
 
 echo "$as_me:8629: checking \"whether to use TCP wrappers\"" >&5
 echo $ECHO_N "checking \"whether to use TCP wrappers\"... $ECHO_C" >&6
+if test -z "$LIBWRAP_PATH" && test -z "$LIB_WRAP"; then
 LIBWRAP_PATH=""
 LIB_WRAP=""
 for I in $LDFLAGS $LIBS -L/usr/lib; do
@@ -8639,6 +8640,10 @@
 		LIB_WRAP=-lwrap
 		echo "Found $THEFILE/libwrap.so" 1>&5
 		break
+	elif test -f `set $THEFILE/libwrap.so.*.*; echo $1`; then
+		LIB_WRAP=-lwrap
+		echo "Found $THEFILE/libwrap.so" 1>&5
+		break
 	else
 		echo "From $I, checking in dir $THEFILE for libwrap.a" 1>&5
 		if test -f $THEFILE/libwrap.a; then
@@ -8649,6 +8654,7 @@
 	fi
 	esac
 done
+fi
 if test -n "$LIBWRAP_PATH" || test -n "$LIB_WRAP"; then
 	echo "$as_me:8653: result: yes" >&5
 echo "${ECHO_T}yes" >&6
