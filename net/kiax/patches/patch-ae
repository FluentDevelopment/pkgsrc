$NetBSD: patch-ae,v 1.3 2006/04/14 09:56:03 adam Exp $

--- lib/libiax2/src/iax.c.orig	2006-02-05 01:01:33.000000000 +0100
+++ lib/libiax2/src/iax.c
@@ -38,6 +38,7 @@ void gettimeofday(struct timeval *tv, vo
 
 #else
 
+#include <sys/types.h>
 #include <netdb.h>
 #include <sys/socket.h>
 #include <netinet/in.h>
@@ -62,7 +63,7 @@ void gettimeofday(struct timeval *tv, vo
 #ifndef MACOSX
 #include <malloc.h>
 #ifndef SOLARIS
-#if !defined(__NetBSD__) && !defined(__FreeBSD__)
+#if !defined(__NetBSD__) && !defined(__FreeBSD__) && !defined(__DragonFly__)
 #include <error.h>
 #endif
 #endif
@@ -97,7 +98,7 @@ void gettimeofday(struct timeval *tv, vo
 #ifdef SOLARIS
 #define IAX_SOCKOPTS MSG_DONTWAIT
 #else
-#ifdef __NetBSD__
+#if defined(__NetBSD__) || defined(__DragonFly__)
 #define IAX_SOCKOPTS MSG_DONTWAIT
 #else  /* Linux and others */
 #define IAX_SOCKOPTS MSG_DONTWAIT | MSG_NOSIGNAL
