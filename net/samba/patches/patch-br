$NetBSD: patch-br,v 1.1 2005/11/14 08:05:28 jlam Exp $

--- lib/util.c.orig	2005-10-12 13:03:29.000000000 -0400
+++ lib/util.c
@@ -2370,6 +2370,26 @@ char *lock_path(const char *name)
 }
 
 /*****************************************************************
+ A useful function for returning a path in the Samba state directory.
+*****************************************************************/  
+
+char *state_path(const char *name)
+{
+	static pstring fname;
+
+	pstrcpy(fname,lp_statedir());
+	trim_char(fname,'\0','/');
+	
+	if (!directory_exist(fname,NULL))
+		mkdir(fname,0755);
+	
+	pstrcat(fname,"/");
+	pstrcat(fname,name);
+
+	return fname;
+}
+
+/*****************************************************************
  A useful function for returning a path in the Samba pid directory.
 *****************************************************************/
 
