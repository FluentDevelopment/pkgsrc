$NetBSD: patch-af,v 1.2 2007/06/07 08:08:16 rh Exp $

--- threadutil/src/ThreadPool.c.orig	2007-03-13 13:19:24.000000000 +1000
+++ threadutil/src/ThreadPool.c
@@ -354,8 +354,15 @@ tp->stats.totalJobsLQ++; tp->stats.total
     srand( ( unsigned int )t.millitm + (unsigned int)ithread_get_current_thread_id(  ).p );
 #elif defined(__FreeBSD__)
     srand( ( unsigned int )t.millitm + (unsigned int)ithread_get_current_thread_id(  ) );
-#else
+#elif defined(__linux__)
     srand( ( unsigned int )t.millitm + ithread_get_current_thread_id(  ) );
+#else
+     {
+	volatile union { volatile pthread_t tid; volatile unsigned i; } idu;
+  
+	idu.tid = ithread_get_current_thread_id();
+	srand( ( unsigned int )t.millitm + idu.i );
+     }
 #endif
     }
 
