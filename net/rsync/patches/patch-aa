$NetBSD: patch-aa,v 1.8 2002/03/12 16:02:57 tron Exp $

--- match.c.orig	Sun Feb  3 02:38:39 2002
+++ match.c	Tue Mar 12 16:55:19 2002
@@ -247,7 +247,7 @@
 		   running match, the checksum update and the
 		   literal send. */
 		if (offset > last_match &&
-		    offset-last_match >= CHUNK_SIZE+s->n && 
+		    offset >= last_match+CHUNK_SIZE+s->n && 
 		    (end-offset > CHUNK_SIZE)) {
 			matched(f,s,buf,offset - s->n, -2);
 		}
