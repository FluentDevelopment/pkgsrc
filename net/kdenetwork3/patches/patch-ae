$NetBSD: patch-ae,v 1.2 2003/03/11 13:13:28 markd Exp $

--- ksirc/Makefile.am.orig	Tue Nov  5 05:02:30 2002
+++ ksirc/Makefile.am
@@ -17,13 +17,13 @@ testview_SOURCES = kstextviewtest.cpp
 testview_LDADD = kstextview.lo $(LIB_KDEUI)
 testview_LDFLAGS = $(all_libraries) $(KDE_RPATH)
 
-lib_LTLIBRARIES = ksirc.la
+lib_LTLIBRARIES = libksirc_main.la ksirc.la
 
 noinst_PROGRAMS = getdate
 
 # Which sources should be compiled for ksirc.
 
-ksirc_la_SOURCES = \
+libksirc_main_la_SOURCES = \
 	toplevel.cpp \
 	charSelector.cpp \
 	chanButtons.cpp \
@@ -57,8 +57,11 @@ ksirc_la_SOURCES = \
         colorpicker.cpp
 
 # the library search path
+libksirc_main_la_LDFLAGS = $(all_libraries)
+libksirc_main_la_COMPILE_FIRST = cdate.h
+
+ksirc_la_SOURCES = ksirc_main.cpp
 ksirc_la_LDFLAGS = $(all_libraries) -module -avoid-version
-ksirc_la_COMPILE_FIRST = cdate.h
 
 all_ksirc_libraries = \
 	./KSPrefs/libksprefs.la \
@@ -68,10 +71,10 @@ all_ksirc_libraries = \
 
 # the libraries to link against. Be aware of the order. First the libraries,
 # that depend on the following ones.
-ksirc_la_LIBADD   = $(all_ksirc_libraries)
+libksirc_main_la_LIBADD   = $(all_ksirc_libraries)
 
-ksirc_SOURCES = dummy.cpp
-ksirc_LDADD = ksirc.la
+ksirc_SOURCES = ksirc_main.cpp
+ksirc_LDADD = libksirc_main.la
 ksirc_LDFLAGS = $(all_libraries) $(KDE_RPATH)
 
 kdoc:
@@ -134,6 +137,3 @@ miscdir = $(kde_datadir)/ksirc
 
 conf_DATA = ksircrc
 confdir = $(kde_confdir)
-
-dummy.cpp:
-	echo > dummy.cpp
