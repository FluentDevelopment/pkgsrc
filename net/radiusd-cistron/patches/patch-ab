$NetBSD: patch-ab,v 1.2 2001/12/20 10:05:50 martti Exp $

--- src/Make.inc.orig	Thu Dec 20 10:52:00 2001
+++ src/Make.inc	Thu Dec 20 10:52:06 2001
@@ -4,7 +4,7 @@
 #
 #
 
-RADIUS_DIR    = /etc/raddb
+RADIUS_DIR    = ${PREFIX}/etc/raddb
 
 SERVER_OBJS   = radiusd.o files.o acct.o pam.o version.o proxy.o \
 			exec.o auth.o timestr.o cache.o readusers.o
@@ -118,8 +118,6 @@
 
 install:
 	# Install the binaries
-	$(DINSTALL) $(SBINDIR)
-	$(DINSTALL) $(BINDIR)
 	$(DINSTALL) $(RADIUS_DIR)
 	$(INSTALL) -m 755 -s radiusd  $(SBINDIR)/radiusd
 	$(INSTALL) -m 755 -s radrelay $(SBINDIR)/radrelay
@@ -131,35 +129,12 @@
 	$(INSTALL) -m 755    checkrad.pl $(SBINDIR)/checkrad
 	$(INSTALL) -m 755    radlast $(BINDIR)
 	$(INSTALL) -m 755    radtest $(BINDIR)
-	# Install the man pages
-	@for section in 1 5 8; do \
-		$(DINSTALL) $(MANDIR)/man$$section; \
-		for manfile in ../doc/*.$$section*; do \
-		    echo $(INSTALL) -m 644 $$manfile $(MANDIR)/man$$section; \
-		    $(INSTALL) -m 644 $$manfile $(MANDIR)/man$$section; \
-		done ; \
-	done
-	test -n "$(DBM)" || rm -f $(MANDIR)/man8/builddbm.8rad
-	@if [ -d /etc/pam.d/ ] && [ ! -f /etc/pam.d/radius ]; then \
-		$(INSTALL) -m 644 ../redhat/radiusd-pam /etc/pam.d/radius;\
-	fi
 	# Install the config files
 	@echo; echo "Creating/updating files in $(RADIUS_DIR)"; \
 	cd ../raddb; \
 	for i in [a-c]* [e-z]*; do \
-		[ ! -f $(RADIUS_DIR)/$$i ] && cp $$i $(RADIUS_DIR)/$$i; \
+		$(INSTALL) -m 444 $$i $(RADIUS_DIR)/$$i.sample; \
 	done; \
 	for i in dictionary*; do \
-		[ ! -f $(RADIUS_DIR)/$$i ] && cp $$i $(RADIUS_DIR)/$$i; \
-		if [ "`find $$i -newer $(RADIUS_DIR)/$$i`" ]; then \
-			echo "** $(RADIUS_DIR)/$$i"; \
-			nt=1; \
-		fi; \
-	done; \
-	if [ "$$nt" ]; then \
-		echo "** The samples in ../raddb are newer than these files";\
-		echo "** Please investigate and copy manually if appropriate";\
-		echo ;\
-	fi
-
-
+		$(INSTALL) -m 444 $$i $(RADIUS_DIR)/$$i; \
+	done
