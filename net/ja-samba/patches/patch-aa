$NetBSD: patch-aa,v 1.6 2004/06/05 13:16:35 taca Exp $

--- Makefile.in.orig	2004-01-22 20:24:22.000000000 +0900
+++ Makefile.in
@@ -117,6 +117,8 @@ LDSHFLAGSPO = @LDSHFLAGS@ @ARCHFLAGPO@
 LDSHFLAGS32 = @LDSHFLAGS@ @ARCHFLAG32@
 LDSHFLAGS64 = @LDSHFLAGS@ @ARCHFLAG64@
 
+PAM_NEEDS_LIBC = @PAM_NEEDS_LIBC@
+
 WINBIND_PROGS = @WINBIND_TARGETS@
 WINBIND_SPROGS = @WINBIND_STARGETS@
 WINBIND_PAM_PROGS = @WINBIND_PAM_TARGETS@
@@ -753,7 +755,7 @@ bin/libsmbclient.a: $(LIBSMBCLIENT_PICOB
 
 bin/pam_smbpass.@SHLIBEXT@: $(PAM_SMBPASS_OBJ) bin/.dummy
 	@echo Linking shared library $@
-	@$(SHLD) $(LDSHFLAGS) -o $@ $(PAM_SMBPASS_OBJ) -lpam $(SHDYNEXP) $(SOLIBS) $(LDAPLIBS) -lc \
+	@$(SHLD) $(LDSHFLAGS) -o $@ $(PAM_SMBPASS_OBJ) -lpam $(SHDYNEXP) $(SOLIBS) $(LDAPLIBS) $(PAM_NEEDS_LIBC) \
 		@SONAMEFLAG@`basename $@`
 
 nsswitch/libnss_wins.@SHLIBEXT@: $(NSS_OBJ)
@@ -777,7 +779,7 @@ nsswitch/libnss_winbind.@SHLIBEXT@: $(WI
 
 nsswitch/pam_winbind.@SHLIBEXT@: $(PAM_WINBIND_OBJ)
 	@echo Linking $@
-	@$(SHLD) $(LDSHFLAGS) -o $@ $(PAM_WINBIND_OBJ) \
+	@$(SHLD) $(LDSHFLAGS) -o $@ $(PAM_WINBIND_OBJ) $(LDFLAGS) $(DYNEXP) $(PAM_NEEDS_LIBC) \
 		@SONAMEFLAG@`basename $@`
 
 bin/wbinfo: $(WBINFO_OBJ) $(PARAM_OBJ) $(LIB_OBJ) $(NOPROTO_OBJ) \
