$NetBSD: patch-as,v 1.1 2003/04/07 18:10:08 taca Exp $

--- smbd/password.c.orig	2002-11-21 22:05:51.000000000 +0900
+++ smbd/password.c
@@ -816,7 +816,7 @@ and given password ok\n", user));
 		if (!ok && lp_username(snum)) {
 			char *auser;
 			pstring user_list;
-			StrnCpy(user_list,lp_username(snum),sizeof(pstring));
+			StrnCpy(user_list,lp_username(snum),sizeof(pstring)-1);
 
 			pstring_sub(user_list,"%S",lp_servicename(snum), True);
 	  
