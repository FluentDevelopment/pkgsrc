$NetBSD: patch-ab,v 1.6 2006/01/12 23:37:31 joerg Exp $

--- configure.orig	2005-07-14 11:22:39.000000000 +0000
+++ configure
@@ -19864,7 +19864,6 @@ else
 echo "${ECHO_T}no" >&6
     #autoconf_compflags is set to "-g -O2" with GCC
     #override CFLAGS when running configure to avoid this
-    CFLAGS="$CFLAGS $autoconf_compflags"
 fi
 
 #-Wall ?
@@ -25309,8 +25308,13 @@ cat >>conftest.$ac_ext <<_ACEOF
 #include <netdb.h>
 #include <unistd.h>
 
+#if defined(__DragonFly__)
 struct hostent *
 gethostbyaddr( const char *, int, int
+#else
+struct hostent *
+gethostbyaddr( const char *, socklen_t, int
+#endif
 );
 int
 main ()
@@ -25352,7 +25356,11 @@ cat >>confdefs.h <<_ACEOF
 _ACEOF
 
 cat >>confdefs.h <<_ACEOF
+#if defined(__DragonFly__)
 #define HAVE_PROT_GETHOSTBYADDR_2 int
+#else
+#define HAVE_PROT_GETHOSTBYADDR_2 socklen_t
+#endif
 _ACEOF
 
 cat >>confdefs.h <<_ACEOF
