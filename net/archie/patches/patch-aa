$NetBSD: patch-aa,v 1.4 2003/09/22 16:24:28 wiz Exp $

--- Makefile.orig	1992-10-26 23:11:04.000000000 +0000
+++ Makefile	2003-09-22 16:05:37.399992470 +0100
@@ -9,7 +9,7 @@
 #	* If you're on a Stardent, add  -43
 #	* If you're running EP/IX, you may need to add  -systype bsd43
 #	  but try it without it first.
-OPTIONS= -O -I. -I/usr/netinclude -I/usr/ucbinclude
+OPTIONS= -I.
 
 # For this, DEFINES is usually ok as-is.  Try it without any of these
 # first; if some stuff fails or shows up undefined, then come back and
@@ -30,7 +30,7 @@
 #     * if your system is lacking strspn(), add               -DSTRSPN
 #     * if you're using the unbundled SparcCompiler on a
 #	Solaris 2 system, add				      -DSOLARIS2
-DEFINES= -DDEBUG
+DEFINES= # -DDEBUG -DNOREGEX
 
 # The default Archie server; choose one of:
 #    archie.ans.net		(USA [NY])
@@ -46,14 +46,14 @@
 #
 # Note this only applies to the command-line client; to change the
 # default for the Emacs lisp version, set the archie-server variable.
-ARCHIE= archie.sura.net
+ARCHIE= archie.rutgers.edu
 
 #	Usually LDFLAGS is empty; if, after you build this, archie
 #	 complains that it can't resolve ARCHIE.ANS.NET (or whatever
 #	 you defined ARCHIE_HOST as), you need to add `-lresolv'.
 #
 #	* If you need the PW library (e.g. A/UX), add -lPW
-LDFLAGS=
+#LDFLAGS=
 # If you're using ISC, use:
 #LDFLAGS= -linet
 # If you're using Wallongong TCP/IP on an AT&T box, use:
@@ -73,7 +73,7 @@
 # Yer' done....make archie.
 # =========================
 #
-CFLAGS=$(OPTIONS) $(DEFINES) -DARCHIE_HOST=\"$(ARCHIE)\"
+CFLAGS+=$(OPTIONS) $(DEFINES) -DARCHIE_HOST=\"$(ARCHIE)\"
 
 VERSION=1.4.1
 VMS_VERSION=`echo $(VERSION) | sed -e 's,\\.,_,g'`
@@ -85,6 +85,10 @@
 
 all: archie
 
+install:
+	${BSD_INSTALL_PROGRAM} archie  ${PREFIX}/bin/archie
+	${BSD_INSTALL_MAN} archie.man ${PREFIX}/man/man1/archie.1
+
 archie: $(OBJS)
 	$(CC) $(CFLAGS) -o $@ $(OBJS) $(LDFLAGS)
 
