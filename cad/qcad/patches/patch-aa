$NetBSD: patch-aa,v 1.6 2003/04/29 21:51:54 jtb Exp $

--- Makefile.orig
+++ Makefile
@@ -8,20 +8,20 @@
 
 ####### Compiler, tools and options
 
-CC       = gcc
-CXX      = g++
-LEX      = flex
-YACC     = yacc
-CFLAGS   = -pipe -Wall -W -O2  -DQT_NO_DEBUG
-CXXFLAGS = -pipe -Wall -W -O2  -DQT_NO_DEBUG
+CC       ?= gcc
+CXX      ?= g++
+LEX      ?= flex
+YACC     ?= yacc
+CFLAGS   += -Wall -W -DQT_NO_DEBUG
+CXXFLAGS += -Wall -W -DQT_NO_DEBUG
 LEXFLAGS = 
 YACCFLAGS= -d
-INCPATH  = -I$(QTDIR)/include -I$(QTDIR)/mkspecs/linux-g++
+INCPATH  = -I$(QTDIR)/include -I$(X11BASE)/include
 LINK     = g++
 LFLAGS   = 
-LIBS     = $(SUBLIBS)  -Wl,-rpath,$(QTDIR)/lib  -L$(QTDIR)/lib  -L/usr/X11R6/lib -lqt -lXext -lX11 -lm
-AR       = ar cqs
-RANLIB   = 
+LIBS     = -Wl,-R,$(QTDIR)/lib -L$(QTDIR)/lib -Wl,-R$(X11BASE)/lib -L$(X11BASE)/lib -Wl,-R$(LOCALBASE)/lib -L$(LOCALBASE)/lib -lqt-mt -lGLU -lGL -lXmu -lXext -lX11 -lm -lSM -lICE -lXmu -lpng -lz -ljpeg
+AR       ?= ar cqs
+RANLIB   ?= 
 MOC      = $(QTDIR)/bin/moc
 UIC      = $(QTDIR)/bin/uic
 QMAKE    = qmake
@@ -1766,10 +1766,16 @@
 
 moc_rappwin.o: moc_rappwin.cpp rappwin.h ractiondef.h \
 		rprgdef.h
+.if (${MACHINE_ARCH} == "alpha")
+	$(CXX) -c $(CXXFLAGS_NOOPT) $(INCPATH) -o $@ moc_rappwin.cpp
+.endif
 
 moc_rattribdialog.o: moc_rattribdialog.cpp rattribdialog.h rcombobox.h \
 		rgraphdef.h \
 		rprgdef.h
+.if (${MACHINE_ARCH} == "alpha")
+	$(CXX) -c $(CXXFLAGS_NOOPT) $(INCPATH) -o $@ moc_rfontdialog.cpp
+.endif
 
 moc_rbuttongroup.o: moc_rbuttongroup.cpp rbuttongroup.h 
 
@@ -1836,8 +1842,14 @@
 		rtypes.h \
 		rprgdef.h \
 		rmathdef.h
+.if (${MACHINE_ARCH} == "alpha")
+	$(CXX) -c $(CXXFLAGS_NOOPT) $(INCPATH) -o $@ moc_rgraphic.cpp
+.endif
 
 moc_rgroupbox.o: moc_rgroupbox.cpp rgroupbox.h 
+.if (${MACHINE_ARCH} == "alpha")
+	$(CXX) -c $(CXXFLAGS_NOOPT) $(INCPATH) -o $@ moc_rlayerwidget.cpp
+.endif
 
 moc_rhatchdialog.o: moc_rhatchdialog.cpp rhatchdialog.h rcombobox.h \
 		rgraphdef.h \
