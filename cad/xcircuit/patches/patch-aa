$NetBSD: patch-aa,v 1.4 2003/08/04 07:17:37 jmc Exp $

--- configure.in.orig	Fri Jun 27 20:12:07 2003
+++ configure.in	Mon Aug  4 01:44:58 2003
@@ -395,7 +395,7 @@
   fi
 
   case $target in
-    *-sunos4*|*-*-netbsd|NetBSD-*|FreeBSD-*|OpenBSD-*)
+    *-sunos4*|*-*-netbsd|*-*-netbsdelf|NetBSD-*|FreeBSD-*|OpenBSD-*)
       TCL_LIB_NAME="tcl${TCL_MAJOR_VERSION}${TCL_MINOR_VERSION}"
       TK_LIB_NAME="tk${TK_MAJOR_VERSION}${TK_MINOR_VERSION}"
       ;;
@@ -718,9 +718,9 @@
       # Not available on all versions:  check for include file.
       AC_CHECK_HEADER(dlfcn.h, test_ok=yes, test_ok=no)
       if test "$test_ok" = yes; then
-        SHLIB_CFLAGS="-fpic"
-        SHLIB_LD="ld"
-        LDDL_FLAGS="-Bshareable -x ${LIB_SPEC}"
+        SHLIB_CFLAGS="-fPIC"
+        SHLIB_LD=$CC
+        LDDL_FLAGS="-shared"
       fi
       ;;
 
