$NetBSD: patch-ad,v 1.8 2002/11/23 23:14:41 wiz Exp $

--- lib/Makefile.orig	Wed Sep 18 15:31:55 2002
+++ lib/Makefile
@@ -2,4 +2,19 @@
 # Original from FreeBSD, no rcs id.
 
+OPSYS!=		uname -s
+RELEASE!=	uname -r
+
+.if ${OPSYS} == "Darwin"
+SRCS+=		md5c.c md5hl.c strlcpy.c
+.endif
+
+.if ${OPSYS} == "Linux"
+SRCS+=		fgetln.c md5c.c md5hl.c strlcpy.c
+.endif
+
+.if ${OPSYS} == "NetBSD" && (${RELEASE:M1.4.[12]} != "" || ${RELEASE:M1.4} != "")
+SRCS+=		strlcpy.c
+.endif
+
 NOLINT=		# defined
 NOMAN=		# defined
@@ -7,4 +22,9 @@ NOPIC=		# defined
 NOPROFILE=	# defined
 
+MKLINT=		no
+MKMAN=		no
+MKPIC=		no
+MKPROFILE=	no
+
 LIB+=		install
 SRCS+=		exec.c file.c ftpio.c global.c lpkg.c pen.c pkgdb.c \
@@ -12,5 +32,9 @@ SRCS+=		exec.c file.c ftpio.c global.c l
 
 # only needed during build - prevent installation of library
+.if ${OPSYS} == "Darwin"
+install::
+.else
 libinstall::
+.endif
 
 version.o: version.h version.c
