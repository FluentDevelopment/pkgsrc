.\"	$NetBSD: pkglint.1,v 1.7 2003/05/28 16:32:22 wiz Exp $
.\"	From FreeBSD: portlint.1,v 1.8 1997/11/25 14:53:14 itojun Exp
.\"
.\" Copyright (c) 1997 by Jun-ichiro Itoh <itojun@itojun.org>.
.\" All Rights Reserved.  Absolutely no warranty.
.\"
.Dd September 5, 2000
.Dt PKGLINT 1
.Sh NAME
.Nm pkglint
.Nd a verifier for pkgsrc directories
.Sh SYNOPSIS
.Nm pkglint
.Op Fl hvIN
.Op Fl B Ar n
.Op Ar dir
.Sh DESCRIPTION
.Nm
tries to verify the content of a pkgsrc directory.
The purpose of
.Nm
can be separated into two parts:
.Pq 1
to let the submitters easily polish her/his own pkgsrc directory, and
.Pq 2
to decrease the labor of the committers.
.Pp
.Nm
uses very simple regular-expression matching for verifying
files that make up a pkgsrc directory.
Note that it does NOT implement a complete parser for those files.
Because of this the user may see some extra warnings,
especially when checking complex
.Pa Makefile Ns No s .
.Pp
.Sy Options
.Bl -tag -width Fl
.It Fl B Ar n
Set the number of contiguous blank lines allowed in
.Pa Makefile
to
.Ar n
(by default,
.Ar n
is 1.)
.It Fl h
Show the summary of command line options, then exit.
.It Fl I
Show the Makefile that is constructed by including all the files that
are slurped in via .include directives.
This flag is mainly for debugging.
.It Fl N
New package flag.
Adds several checks specific to newly submitted packages.
If you are willing to submit the directory to be checked as a new package,
use this option.
.It Fl v
Be verbose.
Show the progress report for items that are being checked.
.It dir
The pkgsrc directory to be checked.
If omitted, all checks will be performed on the current directory.
.El
.Sh FILES
.Bl -tag -width /usr/share/mk/bsd.port.mk -compact
.\".It FreeBSD:
.\".It Pa /usr/share/mk/bsd.port.mk
.\"master Makefile for ports
.\".It Pa /usr/ports/*
.\"port collection
.\".Pp
.\".It NetBSD:
.It Pa /usr/pkgsrc/mk/bsd.pkg.mk
master Makefile for pkgsrc
.It Pa /usr/pkgsrc/*
pkgsrc collection
.El
.Sh DIAGNOSTICS
Messages will be sent to standard output, not standard error.
.Bl -tag -width "WARN: foobaa"
.It FATAL: ...
This type of error messages suggests that there is some fatal error
in the pkgsrc directory.
For example, if some files need a rewrite, or if
some necessary files are missing, this message will show up.
This kind of error should be fixed BEFORE submitting
a pkgsrc via send-pr to the comitters.
.\"If a submitter submit it without update, committers will need to rewrite
.\"on behalf of the submitters, which may result in delay of
.\"the development of operating system itself.
.It WARN: ...
This type of error messages suggests that some files may (or may not)
need some fixes.
Basically, warnings are produced when
.Nm
is not completely sure about the result.
For example, complex
.Pa Makefile Ns No s
may need some statements that can match the regular expression
.Nm
uses for sanity checks.
In those cases, the user should evaluate the result manually,
and obey/ignore the result.
.It OK: ...
This type of messages is used in verbose mode
.Pq Fl v .
.El
.Sh AUTHORS
Jun-ichiro Itoh
.Aq itojun@itojun.org
and
Yoshishige Arai
.Aq ryo2@on.rim.or.jp .
Many people have contributed patches and comments/suggestions.
.Sh BUGS
.Nm
is not a magic wand, as described above.
