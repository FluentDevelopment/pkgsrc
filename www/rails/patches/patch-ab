$NetBSD: patch-ab,v 1.3 2007/02/18 23:49:14 minskim Exp $

--- environments/boot.rb.orig	2007-02-05 21:29:54.000000000 -0800
+++ environments/boot.rb
@@ -15,30 +15,7 @@ unless defined?(Rails::Initializer)
   if File.directory?("#{RAILS_ROOT}/vendor/rails")
     require "#{RAILS_ROOT}/vendor/rails/railties/lib/initializer"
   else
-    require 'rubygems'
-
-    environment_without_comments = IO.readlines(File.dirname(__FILE__) + '/environment.rb').reject { |l| l =~ /^#/ }.join
-    environment_without_comments =~ /[^#]RAILS_GEM_VERSION = '([\d.]+)'/
-    rails_gem_version = $1
-
-    if version = defined?(RAILS_GEM_VERSION) ? RAILS_GEM_VERSION : rails_gem_version
-      # Asking for 1.1.6 will give you 1.1.6.5206, if available -- makes it easier to use beta gems
-      rails_gem = Gem.cache.search('rails', "~>#{version}.0").sort_by { |g| g.version.version }.last
-
-      if rails_gem
-        gem "rails", "=#{rails_gem.version.version}"
-        require rails_gem.full_gem_path + '/lib/initializer'
-      else
-        STDERR.puts %(Cannot find gem for Rails ~>#{version}.0:
-    Install the missing gem with 'gem install -v=#{version} rails', or
-    change environment.rb to define RAILS_GEM_VERSION with your desired version.
-  )
-        exit 1
-      end
-    else
-      gem "rails"
-      require 'initializer'
-    end
+    require 'initializer'
   end
 
   Rails::Initializer.run(:set_load_path)
