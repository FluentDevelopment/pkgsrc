$NetBSD: patch-ac,v 1.5 2001/12/31 23:54:25 jlam Exp $

--- acinclude.m4.orig	Sat Nov 17 19:33:19 2001
+++ acinclude.m4
@@ -341,10 +341,19 @@
   ;;
 esac
 
+dnl Having php_always_shared=yes override the configure options breaks
+dnl because it's assumed that the answer to every question is yes.  We
+dnl really only want just the ext_shared=yes to denote that we'll be
+dnl using outside shared libraries.
+dnl
+dnl if test "$php_always_shared" = "yes"; then
+dnl   ext_output="yes, shared"
+dnl   ext_shared=yes
+dnl   test "[$]$1" = "no" && $1=yes
+dnl fi
+
 if test "$php_always_shared" = "yes"; then
-  ext_output="yes, shared"
   ext_shared=yes
-  test "[$]$1" = "no" && $1=yes
 fi
 
 AC_MSG_RESULT($ext_output)
@@ -675,7 +684,7 @@
   if test "$1" != "/usr/lib"; then
     PHP_EXPAND_PATH($1, ai_p)
     if test "$ext_shared" = "yes" && test -n "$2"; then
-      $2="-R$1 -L$1 [$]$2"
+      $2="-L$1 [$]$2"
     else
       AC_PHP_ONCE(LIBPATH, $ai_p, [
         test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
