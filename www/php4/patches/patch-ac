$NetBSD: patch-ac,v 1.6 2002/10/14 06:21:19 martti Exp $

--- acinclude.m4.orig	Mon Jul 29 02:15:18 2002
+++ acinclude.m4	Sat Oct 12 09:25:51 2002
@@ -364,10 +364,19 @@
   ;;
 esac
 
+dnl Having php_always_shared=yes override the configure options breaks
+dnl because it's assumed that the answer to every question is yes.  We
+dnl really only want just the ext_shared=yes to denote that we'll be
+dnl using outside shared libraries.
+dnl
+dnl if test "$php_always_shared" = "yes"; then
+dnl   ext_output="yes, shared"
+dnl   ext_shared=yes
+dnl   test "[$]$1" = "no" && $1=yes
+dnl fi
+
 if test "$php_always_shared" = "yes"; then
-  ext_output="yes, shared"
   ext_shared=yes
-  test "[$]$1" = "no" && $1=yes
 fi
 
 if test -n "$2"; then
@@ -704,7 +713,7 @@
   if test "$1" != "/usr/lib"; then
     PHP_EXPAND_PATH($1, ai_p)
     if test "$ext_shared" = "yes" && test -n "$2"; then
-      $2="-R$1 -L$1 [$]$2"
+      $2="-L$1 [$]$2"
     else
       AC_PHP_ONCE(LIBPATH, $ai_p, [
         test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
