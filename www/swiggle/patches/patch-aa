$NetBSD: patch-aa,v 1.3 2007/01/09 13:59:05 gavan Exp $

--- swiggle.c.orig	2004-10-23 21:58:37.000000000 +0100
+++ swiggle.c
@@ -956,8 +956,10 @@ get_exif_data(ExifData *ed, ExifTag t)
 	
 	for (i = 0; i < EXIF_IFD_COUNT; i++) {
 		if (ed->ifd[i] && ed->ifd[i]->count) {
-			if (exif_entry_get_value(
-			    exif_content_get_entry(ed->ifd[i], t), p, EXIFSIZ)
+			ExifEntry *ee;
+
+			ee = exif_content_get_entry(ed->ifd[i], t);
+			if (ee && exif_entry_get_value(ee, p, EXIFSIZ)
 			    != NULL) {
 				if ((x = strdup(p)) == NULL) {
 					fprintf(stderr, "%s: can't strdup(%s): "
