$NetBSD: patch-at,v 1.1 2007/06/28 01:20:53 lkundrak Exp $

Part of fix for CVE-2007-3304 Denial of Service.

--- server/mpm/worker/worker.c.orig	2007-06-28 02:53:26.000000000 +0200
+++ server/mpm/worker/worker.c
@@ -1814,7 +1814,7 @@ int ap_mpm_run(apr_pool_t *_pconf, apr_p
             active_children = 0;
             for (index = 0; index < ap_daemons_limit; ++index) {
                 if (MPM_CHILD_PID(index) != 0) {
-                    if (kill(MPM_CHILD_PID(index), 0) == 0) {
+                    if (ap_mpm_safe_kill(MPM_CHILD_PID(index), 0) == 0) {
                             active_children = 1;
                             /* Having just one child is enough to stay around */
                             break;
