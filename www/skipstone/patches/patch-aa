$NetBSD: patch-aa,v 1.5 2002/03/28 10:40:33 jmc Exp $

--- config.mk.orig	Wed Mar 27 14:12:02 2002
+++ config.mk	Thu Mar 28 10:35:00 2002
@@ -1,78 +1,32 @@
-PREFIX=/usr/local
+#PREFIX=/usr/local
 PLUGINDIR=$(HOME)/.skipstone/plugins
 
 MOZILLA_INCLUDES = \
-	-I/usr/include/mozilla \
-	-I$(PREFIX)/include/mozilla \
-	-I/usr/include/nspr \
-	-I/usr/include/mozilla/dom \
-	-I/usr/include/mozilla/windowwatcher \
-	-I/usr/include/mozilla/webbrowserpersist \
-	-I/usr/include/mozilla/appcomps \
-	-I/usr/include/mozilla/find \
-	-I/usr/include/mozilla/txtsvc \
-	-I/usr/include/mozilla/docshell \
-	-I/usr/include/mozilla/shistory \
-	-I/usr/include/mozilla/webshell \
-	-I/usr/include/mozilla/gfx \
-	-I/usr/include/mozilla/necko \
-	-I/usr/include/mozilla/widget \
-	-I/usr/include/mozilla/content \
-	-I/usr/include/mozilla/layout \
-	-I/usr/include/mozilla/browser \
-	-I/usr/include/mozilla/webbrwsr \
-	-I/usr/include/mozilla/string \
-	-I/usr/include/mozilla/xpcom \
-	-I/usr/include/mozilla/pref \
-	-I/usr/include/mozilla/gtkembedmoz \
-	-I/usr/include/mozilla/nspr \
-	-I/usr/include/mozilla/uconv \
-	-I/usr/local/include/nspr \
-	-I/usr/local/include/mozilla/gtkembedmoz \
-	-I/usr/local/include/mozilla/dom \
-	-I/usr/local/include/mozilla/windowwatcher \
-	-I/usr/local/include/mozilla/appcomps \
-	-I/usr/local/include/mozilla/find \
-	-I/usr/local/include/mozilla/txtsvc \
-	-I/usr/local/include/mozilla/docshell \
-	-I/usr/local/include/mozilla/shistory \
-	-I/usr/local/include/mozilla/webshell \
-	-I/usr/local/include/mozilla/gfx \
-	-I/usr/include/mozilla/webbrowserpersist \
-	-I/usr/local/include/mozilla/necko \
-	-I/usr/local/include/mozilla/widget \
-	-I/usr/local/include/mozilla/content \
-	-I/usr/local/include/mozilla/layout \
-	-I/usr/local/include/mozilla/browser \
-	-I/usr/local/include/mozilla/webbrwsr \
-	-I/usr/local/include/mozilla/string \
-	-I/usr/local/include/mozilla/xpcom \
-	-I/usr/local/include/mozilla/pref \
-	-I/usr/local/include/mozilla/uconv \
-	-I$(PREFIX)/include/mozilla/nspr \
-	-I$(PREFIX)/include/mozilla/gtkembedmoz \
-	-I$(PREFIX)/include/mozilla/dom \
-	-I$(PREFIX)/include/mozilla/windowwatcher \
-	-I$(PREFIX)/include/mozilla/appcomps \
-	-I$(PREFIX)/include/mozilla/find \
-	-I$(PREFIX)/include/mozilla/txtsvc \
-	-I$(PREFIX)/include/mozilla/docshell \
-	-I$(PREFIX)/include/mozilla/shistory \
-	-I$(PREFIX)/include/mozilla/webshell \
-	-I$(PREFIX)/include/mozilla/gfx \
-	-I$(PREFIX)/include/mozilla/necko \
-	-I$(PREFIX)/include/mozilla/widget \
-	-I$(PREFIX)/include/mozilla/webbrowserpersist \
-	-I$(PREFIX)/include/mozilla/content \
-	-I$(PREFIX)/include/mozilla/layout \
-	-I$(PREFIX)/include/mozilla/browser \
-	-I$(PREFIX)/include/mozilla/webbrwsr \
-	-I$(PREFIX)/include/mozilla/string \
-	-I$(PREFIX)/include/mozilla/xpcom \
-	-I$(PREFIX)/include/mozilla/pref \
-	-I$(PREFIX)/include/mozilla/uconv 
+	-I$(X11PREFIX)/include/mozilla/nspr \
+	-I$(X11PREFIX)/include/mozilla/gtkembedmoz \
+	-I$(X11PREFIX)/include/mozilla/dom \
+	-I$(X11PREFIX)/include/mozilla/windowwatcher \
+	-I$(X11PREFIX)/include/mozilla/appcomps \
+	-I$(X11PREFIX)/include/mozilla/find \
+	-I$(X11PREFIX)/include/mozilla/txtsvc \
+	-I$(X11PREFIX)/include/mozilla/docshell \
+	-I$(X11PREFIX)/include/mozilla/shistory \
+	-I$(X11PREFIX)/include/mozilla/webshell \
+	-I$(X11PREFIX)/include/mozilla/gfx \
+	-I$(X11PREFIX)/include/mozilla/necko \
+	-I$(X11PREFIX)/include/mozilla/widget \
+	-I$(X11PREFIX)/include/mozilla/webbrowserpersist \
+	-I$(X11PREFIX)/include/mozilla/content \
+	-I$(X11PREFIX)/include/mozilla/layout \
+	-I$(X11PREFIX)/include/mozilla/browser \
+	-I$(X11PREFIX)/include/mozilla/webbrwsr \
+	-I$(X11PREFIX)/include/mozilla/string \
+	-I$(X11PREFIX)/include/mozilla/xpcom \
+	-I$(X11PREFIX)/include/mozilla/pref \
+	-I$(X11PREFIX)/include/mozilla/uconv 
 
 MOZILLA_LIBS = \
+	-L$(X11PREFIX)/lib/mozilla -Wl,-R${X11PREFIX}/lib/mozilla \
 	-L/usr/lib/mozilla \
 	-L$(PREFIX)/lib/mozilla \
 	-lgtkembedmoz -lplds4 -lplc4 -lnspr4 -lgtksuperwin -lxpcom
@@ -84,6 +38,7 @@
 CXX = g++
 
 CPPFLAGS = $(GTK_INCLUDES) $(MOZILLA_INCLUDES)
+CPPFLAGS += -DPREFIX=\"${PREFIX}\"
 CFLAGS = -g -O2 -Wall
 CXXFLAGS = $(CFLAGS) -fno-rtti
 
