$NetBSD: patch-aa,v 1.1 2003/07/27 08:07:06 taca Exp $

--- mod_ruby.c.orig	Mon Mar 17 11:34:23 2003
+++ mod_ruby.c
@@ -86,7 +86,7 @@ static const char *default_kcode;
 static int ruby_is_running = 0;
 array_header *ruby_required_libraries = NULL;
 
-#ifdef APR_HAS_THREADS
+#if APR_HAS_THREADS
 #include "apr_thread_cond.h"
 
 static apr_thread_t *ruby_thread;
@@ -662,7 +662,7 @@ static void ruby_finalize_interpreter()
     }
 }
 
-#ifdef APR_HAS_THREADS
+#if APR_HAS_THREADS
 static void *ruby_thread_start(apr_thread_t *t, void *data)
 {
     server_rec *s = (server_rec *) data;
@@ -731,7 +731,7 @@ apr_status_t ruby_call_interpreter(pool 
 
 static APR_CLEANUP_RETURN_TYPE ruby_child_cleanup(void *data)
 {
-#ifdef APR_HAS_THREADS
+#if APR_HAS_THREADS
     pool *p;
     apr_status_t status;
 
@@ -754,7 +754,7 @@ static void ruby_child_init(server_rec *
 #endif
 {
     if (!ruby_running()) {
-#ifdef APR_HAS_THREADS
+#if APR_HAS_THREADS
 	apr_status_t status;
 	status = apr_thread_mutex_create(&ruby_request_queue_mutex,
 					 APR_THREAD_MUTEX_DEFAULT, p);
@@ -1097,7 +1097,7 @@ static int ruby_handler(request_rec *r,
     arg->run_all = run_all;
     arg->flush = flush;
     arg->retval = 0;
-#ifdef APR_HAS_THREADS
+#if APR_HAS_THREADS
     {
 	apr_status_t status;
 	char buf[256];
