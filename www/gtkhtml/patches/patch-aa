$NetBSD: patch-aa,v 1.5 2002/04/10 16:56:13 jlam Exp $

--- configure.orig	Mon Dec 17 13:04:07 2001
+++ configure
@@ -1650,8 +1650,8 @@
 fi
 	if test x$gnome_cv_orbit_found = xyes; then
 
-		ORBIT_CFLAGS=`orbit-config --cflags client server`
-		ORBIT_LIBS=`orbit-config --use-service=name --libs client server`
+		ORBIT_CFLAGS=`$ORBIT_CONFIG --cflags client server`
+		ORBIT_LIBS=`$ORBIT_CONFIG --use-service=name --libs client server`
 
 	else
     		if test xfail = xfailure; then
@@ -1669,8 +1669,8 @@
 
 		gnome_cv_gnorba_found=no
 		if test x$gnome_cv_orbit_found = xyes; then
-			GNORBA_CFLAGS="`gnome-config --cflags gnorba gnomeui`"
-			GNORBA_LIBS="`gnome-config --libs gnorba gnomeui`"
+			GNORBA_CFLAGS="`$GNOME_CONFIG --cflags gnorba gnomeui`"
+			GNORBA_LIBS="`$GNOME_CONFIG --libs gnorba gnomeui`"
 			if test -n "$GNORBA_LIBS"; then
 				gnome_cv_gnorba_found=yes
 			fi
@@ -1689,8 +1689,8 @@
 fi
 	if test x$gnome_cv_orbit_found = xyes; then
 
-		GNORBA_CFLAGS="`gnome-config --cflags gnorba gnomeui`"
-		GNORBA_LIBS="`gnome-config --libs gnorba gnomeui`"
+		GNORBA_CFLAGS="`$GNOME_CONFIG --cflags gnorba gnomeui`"
+		GNORBA_LIBS="`$GNOME_CONFIG --libs gnorba gnomeui`"
 
 	else
 	    	if test xfail = xfailure; then
@@ -8775,7 +8775,7 @@
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 CATOBJEXT=.mo
-		   DATADIRNAME=lib
+		   DATADIRNAME=share
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 		INSTOBJEXT=.mo
@@ -9176,8 +9176,8 @@
   echo "$as_me:9176: checking for $dispname >= $dispvers" >&5
 echo $ECHO_N "checking for $dispname >= $dispvers... $ECHO_C" >&6
   cmpvers=`echo $dispvers | awk -F. '{ print $1 * 1000000 + $2 * 10000 + $3 * 100 + $4;}'`
-  if gnome-config --libs $pkgname > /dev/null 2>&1; then
-    pkgvers=`gnome-config --modversion $pkgname | sed -e 's/^[^0-9]*//'`
+  if $GNOME_CONFIG --libs $pkgname > /dev/null 2>&1; then
+    pkgvers=`$GNOME_CONFIG --modversion $pkgname | sed -e 's/^[^0-9]*//'`
   else
     pkgvers=not
   fi
@@ -9204,8 +9204,8 @@
   echo "$as_me:9204: checking for $dispname >= $dispvers" >&5
 echo $ECHO_N "checking for $dispname >= $dispvers... $ECHO_C" >&6
   cmpvers=`echo $dispvers | awk -F. '{ print $1 * 1000000 + $2 * 10000 + $3 * 100 + $4;}'`
-  if gnome-config --libs $pkgname > /dev/null 2>&1; then
-    pkgvers=`gnome-config --modversion $pkgname | sed -e 's/^[^0-9]*//'`
+  if $GNOME_CONFIG --libs $pkgname > /dev/null 2>&1; then
+    pkgvers=`$GNOME_CONFIG --modversion $pkgname | sed -e 's/^[^0-9]*//'`
   else
     pkgvers=not
   fi
@@ -9232,8 +9232,8 @@
   echo "$as_me:9232: checking for $dispname >= $dispvers" >&5
 echo $ECHO_N "checking for $dispname >= $dispvers... $ECHO_C" >&6
   cmpvers=`echo $dispvers | awk -F. '{ print $1 * 1000000 + $2 * 10000 + $3 * 100 + $4;}'`
-  if gnome-config --libs $pkgname > /dev/null 2>&1; then
-    pkgvers=`gnome-config --modversion $pkgname | sed -e 's/^[^0-9]*//'`
+  if $GNOME_CONFIG --libs $pkgname > /dev/null 2>&1; then
+    pkgvers=`$GNOME_CONFIG --modversion $pkgname | sed -e 's/^[^0-9]*//'`
   else
     pkgvers=not
   fi
@@ -9260,8 +9260,8 @@
   echo "$as_me:9260: checking for $dispname >= $dispvers" >&5
 echo $ECHO_N "checking for $dispname >= $dispvers... $ECHO_C" >&6
   cmpvers=`echo $dispvers | awk -F. '{ print $1 * 1000000 + $2 * 10000 + $3 * 100 + $4;}'`
-  if gnome-config --libs $pkgname > /dev/null 2>&1; then
-    pkgvers=`gnome-config --modversion $pkgname | sed -e 's/^[^0-9]*//'`
+  if $GNOME_CONFIG --libs $pkgname > /dev/null 2>&1; then
+    pkgvers=`$GNOME_CONFIG --modversion $pkgname | sed -e 's/^[^0-9]*//'`
   else
     pkgvers=not
   fi
@@ -9291,7 +9291,10 @@
 
 if test "x$enable_xim" = "xyes"; then
 	BACKUP_LDFLAGS=$LDFLAGS
-	LDFLAGS="$LDFLAGS `gtk-config --libs`"
+	if test "x$GTK_CONFIG" = "x"; then
+		GTK_CONFIG=gtk-config
+	fi
+	LDFLAGS="$LDFLAGS `$GTK_CONFIG --libs`"
 	echo "$as_me:9295: checking for gdk_im_begin" >&5
 echo $ECHO_N "checking for gdk_im_begin... $ECHO_C" >&6
 if test "${ac_cv_func_gdk_im_begin+set}" = set; then
@@ -9431,16 +9434,16 @@
 have_glibwww=false
 echo "$as_me:9432: checking for glibwww >= 0.2" >&5
 echo $ECHO_N "checking for glibwww >= 0.2... $ECHO_C" >&6
-if gnome-config --libs glibwww > /dev/null 2>&1; then
-	vers=`gnome-config --modversion glibwww | sed -e "s/glibwww-//" | \
+if $GNOME_CONFIG --libs glibwww > /dev/null 2>&1; then
+	vers=`$GNOME_CONFIG --modversion glibwww | sed -e "s/glibwww-//" | \
 		awk 'BEGIN { FS = "."; } { printf "%d", $1 * 1000 + $2;}'`
 
 	if test "$vers" -ge 2; then
 		echo "$as_me:9439: result: found" >&5
 echo "${ECHO_T}found" >&6
 
-		GLIBWWW_CFLAGS="`gnome-config --cflags glibwww`"
-		GLIBWWW_LIBS="`gnome-config --libs glibwww` -lwwwhtml -lmd5"
+		GLIBWWW_CFLAGS="`$GNOME_CONFIG --cflags glibwww`"
+		GLIBWWW_LIBS="`$GNOME_CONFIG --libs glibwww` -lwwwhtml -lmd5"
 
 		have_glibwww=true
 	else
@@ -9473,16 +9476,16 @@
 have_ghttp=false
 echo "$as_me:9474: checking for libghttp >= 1.0" >&5
 echo $ECHO_N "checking for libghttp >= 1.0... $ECHO_C" >&6
-if gnome-config --libs ghttp > /dev/null 2>&1; then
-	vers=`gnome-config --modversion ghttp | sed -e "s/ghttp-//" | \
+if $GNOME_CONFIG --libs ghttp > /dev/null 2>&1; then
+	vers=`$GNOME_CONFIG --modversion ghttp | sed -e "s/ghttp-//" | \
 		awk 'BEGIN { FS = "."; } { printf "%d", $1 * 1000 + $2;}'`
 
 	if test "$vers" -ge 1000; then
 		echo "$as_me:9481: result: found" >&5
 echo "${ECHO_T}found" >&6
 
-		GHTTP_CFLAGS="`gnome-config --cflags ghttp`"
-		GHTTP_LIBS="`gnome-config --libs ghttp`"
+		GHTTP_CFLAGS="`$GNOME_CONFIG --cflags ghttp`"
+		GHTTP_LIBS="`$GNOME_CONFIG --libs ghttp`"
 
 		have_ghttp=true
 	else
@@ -9533,8 +9536,8 @@
 	echo "$as_me:9533: checking for Bonobo >= 0.32" >&5
 echo $ECHO_N "checking for Bonobo >= 0.32... $ECHO_C" >&6
 
-	if gnome-config --libs bonobox > /dev/null 2>&1; then
-		vers=`gnome-config --modversion bonobo | sed -e "s/bonobo-//" | \
+	if $GNOME_CONFIG --libs bonobox > /dev/null 2>&1; then
+		vers=`$GNOME_CONFIG --modversion bonobo | sed -e "s/bonobo-//" | \
 			awk 'BEGIN { FS = "."; } { printf "%d", $1 * 1000 + $2;}'`
 		if test "$vers" -ge 32; then
 			bonobo_ok=true
@@ -9553,7 +9556,7 @@
 EOF
 
 		have_bonobo=true
-		if gnome-config --libs bonobox > /dev/null 2>&1; then
+		if $GNOME_CONFIG --libs bonobox > /dev/null 2>&1; then
 			bonobo=bonobox
 		else
 			bonobo=bonobo
@@ -9581,7 +9584,7 @@
 
 echo "$as_me:9582: checking if Bonobo uses OAF" >&5
 echo $ECHO_N "checking if Bonobo uses OAF... $ECHO_C" >&6
-if ( gnome-config --libs bonobo | grep oaf ) > /dev/null 2>&1 ; then
+if ( $GNOME_CONFIG --libs bonobo | grep oaf ) > /dev/null 2>&1 ; then
 	using_oaf="yes"
 	cat >>confdefs.h <<\EOF
 #define USING_OAF 1
@@ -9622,13 +9625,16 @@
 if $try_gconf; then
 	echo "$as_me:9623: checking for gconf" >&5
 echo $ECHO_N "checking for gconf... $ECHO_C" >&6
-	if gconf-config --version > /dev/null 2>&1; then
-		gconf_ver=`gconf-config --version`
+	if test "x$GCONF_CONFIG" = "x"; then
+		GCONF_CONFIG=gconf-config
+	fi
+	if $GCONF_CONFIG --version > /dev/null 2>&1; then
+		gconf_ver=`$GCONF_CONFIG --version`
 		vers=`echo ${gconf_ver} | awk 'BEGIN { FS = "."; } { print $1 * 1000000 + $2 * 1000 + $3;}'`
 		if test "$vers" -ge 1000007; then
 			have_gconf=true
-			GCONF_CFLAGS="`gconf-config --cflags gconf-gtk` -DGTKHTML_HAVE_GCONF"
-			GCONF_LIBS="`gconf-config --libs gconf-gtk`"
+			GCONF_CFLAGS="`$GCONF_CONFIG --cflags gconf-gtk` -DGTKHTML_HAVE_GCONF"
+			GCONF_LIBS="`$GCONF_CONFIG --libs gconf-gtk`"
 			echo "$as_me:9632: result: found ($gconf_ver)" >&5
 echo "${ECHO_T}found ($gconf_ver)" >&6
 		else
@@ -9643,8 +9649,8 @@
 	fi
 fi
 
-EXTRA_GNOME_LIBS=`gnome-config --libs gnomeui gdk_pixbuf print gal $bonobo libglade oaf`
-EXTRA_GNOME_CFLAGS=`gnome-config --cflags gnomeui gdk_pixbuf print gal $bonobo libglade oaf`
+EXTRA_GNOME_LIBS=`$GNOME_CONFIG --libs gnomeui gdk_pixbuf print gal $bonobo libglade oaf`
+EXTRA_GNOME_CFLAGS=`$GNOME_CONFIG --cflags gnomeui gdk_pixbuf print gal $bonobo libglade oaf`
 
 GTKHTML_LIBDIR="-L${libdir}"
 GTKHTML_INCLUDEDIR="-I${includedir}"
