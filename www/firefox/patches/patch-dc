$NetBSD: patch-dc,v 1.1 2005/10/12 16:39:25 joerg Exp $

--- gc/boehm/mach_dep.c.orig	2004-11-17 10:30:03.000000000 +0100
+++ gc/boehm/mach_dep.c	2004-11-17 10:30:50.000000000 +0100
@@ -206,7 +206,7 @@
 	&& !defined(SCO) && !defined(SCO_ELF) \
  	&& !(defined(LINUX)       && defined(__ELF__)) \
 	&& !(defined(__FreeBSD__) && defined(__ELF__)) \
-	&& !defined(DOS4GW)
+	&& !defined(DOS4GW) && !(defined(__DragonFly__) && defined(__ELF__))
 	/* I386 code, generic code does not appear to work */
 	/* It does appear to work under OS2, and asms dont */
 	/* This is used for some 38g UNIX variants and for CYGWIN32 */
@@ -220,7 +220,7 @@
 #       endif
 
 #	if ( defined(I386) && defined(LINUX) && defined(__ELF__) ) \
-	|| ( defined(I386) && defined(__FreeBSD__) && defined(__ELF__) )
+	|| ( defined(I386) && (defined(__FreeBSD__) || defined(__DragonFly__)) && defined(__ELF__) )
 
 	/* This is modified for Linux with ELF (Note: _ELF_ only) */
 	/* This section handles FreeBSD with ELF. */
