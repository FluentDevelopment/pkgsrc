$NetBSD: patch-aa,v 1.6 2002/09/24 02:01:30 dmcmahill Exp $


no 'locale' command on netbsd so deal with `locale charmap` not returning
correctly.

--- bins.orig	Sat Sep 21 09:50:14 2002
+++ bins
@@ -301,7 +301,7 @@ my %defaultConfig =
    # any new options need corresponding new documentation.
 
    # The following parameters cannot be set in config files for now :
-   globalConfigDir => "/etc/bins",     # System wide
+   globalConfigDir => "@pkgsysconfdir@/bins",     # System wide
                                        # configuration directory.
    userConfigDir    => "~/.bins",      # User configuration directory
    configFileName   => "binsrc",       # Configuration file.
@@ -322,7 +322,7 @@ my %defaultConfig =
 # normally, you don't have to touch that...
 my $localEncoding = `locale charmap`;
 # ANSI is unspeakably primitive, keep LATIN1 instead
-if ($localEncoding && ($localEncoding ne "ANSI_X3.4-1968")) {
+if ($? == 0 && $localEncoding && ($localEncoding ne "ANSI_X3.4-1968")) {
   chop($localEncoding);
   $defaultConfig{defaultEncoding} = $localEncoding;
   beVerboseN("Forcing encoding to $localEncoding", 2);
