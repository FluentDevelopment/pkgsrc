$NetBSD: patch-bd,v 1.3 2006/12/04 21:50:54 jdolecek Exp $

--- src/acl.c.orig	2006-10-16 22:11:41.000000000 +0200
+++ src/acl.c
@@ -3083,7 +3083,7 @@ struct arpreq {
  * token namespace crashing any structures or classes having members
  * of the same names.
  */
-#ifdef _SQUID_OPENBSD_
+#if defined(_SQUID_NETBSD_) || defined(_SQUID_OPENBSD_)
 #undef free
 #endif
 #include <sys/sysctl.h>
@@ -3096,7 +3096,7 @@ struct arpreq {
 #include <net/route.h>
 #endif
 #include <net/if.h>
-#if defined(_SQUID_FREEBSD_) || defined(_SQUID_OPENBSD_)
+#if defined(_SQUID_FREEBSD_) || defined(_SQUID_NETBSD_) || defined(_SQUID_OPENBSD_)
 #include <net/if_arp.h>
 #endif
 #if HAVE_NETINET_IF_ETHER_H
@@ -3318,7 +3318,7 @@ aclMatchArp(void *dataptr, struct in_add
 	    inet_ntoa(c), splayLastResult ? "NOT found" : "found");
 	return (0 == splayLastResult);
     }
-#elif defined(_SQUID_FREEBSD_) || defined(_SQUID_OPENBSD_)
+#elif defined(_SQUID_FREEBSD_) || defined(_SQUID_NETBSD_) || defined(_SQUID_OPENBSD_)
 
     struct arpreq arpReq;
     struct sockaddr_in ipAddr;
@@ -3475,7 +3475,7 @@ aclArpCompare(const void *a, const void 
 	return (d1[4] > d2[4]) ? 1 : -1;
     if (d1[5] != d2[5])
 	return (d1[5] > d2[5]) ? 1 : -1;
-#elif defined(_SQUID_FREEBSD_) || defined(_SQUID_OPENBSD_)
+#elif defined(_SQUID_FREEBSD_) || defined(_SQUID_OPENBSD_) || defined(_SQUID_NETBSD_)
     const unsigned char *d1 = a;
     const unsigned char *d2 = b;
     if (d1[0] != d2[0])
