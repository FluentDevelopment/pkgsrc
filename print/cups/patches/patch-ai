$NetBSD: patch-ai,v 1.15 2006/04/21 17:24:52 wiz Exp $

--- filter/image-png.c.orig	2005-01-03 20:29:57.000000000 +0100
+++ filter/image-png.c
@@ -83,7 +83,7 @@ ImageReadPNG(image_t    *img,		/* IO - I
   png_read_info(pp, info);
 
   fprintf(stderr, "DEBUG: PNG image: %dx%dx%d, color_type=%x (%s%s%s)\n",
-          info->width, info->height, info->bit_depth, info->color_type,
+          (int)info->width, (int)info->height, info->bit_depth, info->color_type,
 	  (info->color_type & PNG_COLOR_MASK_COLOR) ? "RGB" : "GRAYSCALE",
 	  (info->color_type & PNG_COLOR_MASK_ALPHA) ? "+ALPHA" : "",
 	  (info->color_type & PNG_COLOR_MASK_PALETTE) ? "+PALETTE" : "");
@@ -252,7 +252,7 @@ ImageReadPNG(image_t    *img,		/* IO - I
     }
 
   png_read_end(pp, info);
-  png_read_destroy(pp, info, NULL);
+  png_destroy_read_struct(&pp, &info, NULL);
 
   fclose(fp);
   free(in);
