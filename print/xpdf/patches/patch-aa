$NetBSD: patch-aa,v 1.2 2001/10/30 06:32:21 simonb Exp $

Avoid a toolchain bug on mipsel noted in NetBSD-1.4.2/pmax

--- xpdf/Makefile.in.orig	Sat Oct 27 03:52:54 2001
+++ xpdf/Makefile.in	Tue Oct 30 17:23:05 2001
@@ -20,6 +20,9 @@
 
 CXXFLAGS = @CXXFLAGS@ @DEFS@ @OPTIONS@ -I$(GOOSRCDIR) -I$(LTKSRCDIR) -I$(srcdir) @X_CFLAGS@ @Xpm_CFLAGS@ @t1_CFLAGS@ @freetype_CFLAGS@ @freetype2_CFLAGS@ -DSYSTEM_XPDFRC=\"$(sysconfdir)/xpdfrc\"
 
+CXXFLAGS_NOOPT!=	${ECHO} ${CXXFLAGS} | ${SED} 's/-O[0-9]*//g'
+
+
 LDFLAGS = @LDFLAGS@
 
 XLIBS = @Xpm_LIBS@ @t1_LIBS@ @freetype_LIBS@ @freetype2_LIBS@ @X_PRE_LIBS@ @X_LIBS@ -lX11 @X_EXTRA_LIBS@
@@ -268,6 +271,9 @@
  Link.h GfxState.h Function.h GfxFont.h FontEncoding.h FontFile.h \
  Error.h config.h Params.h TextOutputDev.h OutputDev.h XOutputDev.h \
  T1Font.h SFont.h TTFont.h XOutputFontInfo.h
+.if (${MACHINE_ARCH} == "mipsel")
+	${CXX}  ${CXXFLAGS_NOOPT} -c XOutputDev.cc
+.endif
 XRef.o: ./XRef.cc ../goo/gmem.h Object.h ../goo/gtypes.h \
  ../goo/GString.h Array.h Dict.h Stream.h Lexer.h Parser.h Decrypt.h \
  Error.h config.h XRef.h
