$NetBSD: patch-ab,v 1.7 2004/12/30 21:04:25 snj Exp $

--- src/ps.c.orig	2004-12-07 15:55:59.000000000 -0800
+++ src/ps.c	2004-12-30 12:36:25.000000000 -0800
@@ -531,16 +531,16 @@ unc_ok:
       doc->beginheader = position;
       section_len = line_len;
     } else if (iscomment(line,"%PDF-") && cmd_scan_pdf) {
-      
-      /* PDF hack to set DELAYSAFER on interpreter invocation */
-      pdf_delaysafer_hack = 1;
-
       struct document *retval = NULL;
       FILE *tmpfile = (FILE*)NULL;
       char *filename_dsc;
       char cmd[512];
       char s[512];
       mode_t old_umask;
+      
+      /* PDF hack to set DELAYSAFER on interpreter invocation */
+      pdf_delaysafer_hack = 1;
+
       filename_dsc=file_getTmpFilename(NULL,filename_raw);
       sprintf(cmd,cmd_scan_pdf,filename,filename_dsc);
       old_umask = umask(0077);
