$NetBSD: patch-aa,v 1.7 2001/08/17 07:29:18 wiz Exp $

--- fig2dev/Imakefile.orig	Thu Apr 19 19:19:38 2001
+++ fig2dev/Imakefile
@@ -28,13 +28,13 @@
 XCOMM You should point XFIGLIBDIR to the same directory you did when you compiled
 XCOMM and installed xfig.  This will be made automatic in the future.
 
-XFIGLIBDIR =	/usr/local/lib/X11/xfig
+XFIGLIBDIR =	$(PROJECTROOT)/lib/X11/xfig
 
 XCOMM ******
 XCOMM If your system has the strerror() function (doesn't have sys_errlist) then
 XCOMM comment out NEED_STRERROR with an XCOMM comment.
 
-NEED_STRERROR = -DNEED_STRERROR
+XCOMM NEED_STRERROR = -DNEED_STRERROR
 
 XCOMM The following probably only applies to Windows 9x/NT:
 XCOMM If your system can open files in text and binary modes and has the
@@ -47,7 +47,7 @@
 XCOMM inline functions. With the "INLINE" keyword, you should notice that
 XCOMM the display will be a bit faster in complex figures
 
-XCOMM USEINLINE = -DUSE_INLINE
+USEINLINE = -DUSE_INLINE
 
 XCOMM ****************
 XCOMM Change RGB if necessary, to point to your rgb.txt color database
@@ -66,7 +66,7 @@
 
 #ifdef USEPNG
 PNGLIBDIR = $(USRLIBDIR)
-PNGINC = -I/usr/include/X11
+PNGINC = -I$(BUILDLINK_DIR)/include
 #endif
 
 XCOMM ****************
@@ -78,11 +78,11 @@
 XCOMM Change XPMINC if necessary to point to the include file for xpm (xpm.h)
 XCOMM
 
-XCOMM #define USEXPM
+#define USEXPM
 
 #ifdef USEXPM
 XPMLIBDIR = $(USRLIBDIR)
-XPMINC = -I/usr/include/X11
+XPMINC = -I$(BUILDLINK_DIR)/include/X11
 #endif
 
 XCOMM ****************
@@ -104,8 +104,8 @@
 
 #ifdef USEJPEG
 #ifdef USEINSTALLEDJPEG
-JPEGLIBDIR = /usr/local/lib
-JPEGINCDIR = /usr/include/X11
+JPEGLIBDIR = $(BUILDLINK_DIR)/lib
+JPEGINCDIR = $(BUILDLINK_DIR)/include
 #else
 JPEGLIBDIR = ../jpeg
 JPEGINCDIR = $(JPEGLIBDIR)
@@ -158,7 +158,7 @@
 
 #ifdef I18N
 I18N_DEFS = -DI18N 
-FIG2DEV_LIBDIR = /usr/local/lib/fig2dev
+FIG2DEV_LIBDIR = $(PROJECTROOT)/lib/fig2dev
 I18N_DEV_DEFS = $(I18N_DEFS) -DFIG2DEV_LIBDIR=\\\"$(FIG2DEV_LIBDIR)\\\"
 
 install::
@@ -189,12 +189,12 @@
 
 #ifdef USEPNG
 DUSEPNG = -DUSE_PNG
-PNGLIBS = -L$(PNGLIBDIR) -lpng -lz
+PNGLIBS = -Wl,-R$(LOCALBASE)/lib -L$(PNGLIBDIR) -lpng -lz
 #endif /* USEPNG */
 
 #ifdef USEXPM
 DUSEXPM = -DUSE_XPM
-XPMLIBS = -L$(XPMLIBDIR) -lXpm -lX11
+XPMLIBS = -Wl,-R$(XPMLIBDIR) -L$(XPMLIBDIR) -lXpm -lX11
 #endif
 
 #if defined(NOSTRSTR) 
@@ -207,7 +207,7 @@
 JPEGINC = -I$(JPEGINCDIR)
 
 #ifdef USEINSTALLEDJPEG
-JPEGLIB = -L$(JPEGLIBDIR) -ljpeg
+JPEGLIB = -Wl,-R$(LOCALBASE)/lib -L$(JPEGLIBDIR) -ljpeg
 #else
 JPEGCONF = configure
 JPEGLIB = $(JPEGLIBDIR)/libjpeg.a
@@ -218,7 +218,7 @@
 
 IMAKE_DEFINES = $(DUSEPNG) $(DUSEJPEG) $(DUSEXPM)
 
-DEVDEFINES = $(DUSEPNG) $(DUSEJPEG) $(DUSEXPM) $(XPMINC) $(JPEGINC) $(DDNFSS) $(DDA4) \
+DEVDEFINES = $(DUSEPNG) $(DUSEJPEG) $(DUSEXPM) $(PNGINC) $(XPMINC) $(JPEGINC) $(DDNFSS) $(DDA4) \
 		$(DDLATEX2E_GRAPHICS) $(DDEPSFIG) $(DDIBMGEC) $(DDDVIPS) $(I18N_DEV_DEFS)
 
 #define IHaveSubdirs
